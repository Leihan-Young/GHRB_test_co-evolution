{
  "issue_id": 7710,
  "issue_url": "https://github.com/apache/rocketmq/issues/7710",
  "title": "[Bug] Deleting the last item problem of the ACL topic/group perms or the global white list caused by the UtilAll#split func flaw",
  "description": "<h3 dir=\"auto\">Before Creating the Bug Report</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\">\n<p dir=\"auto\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I found a bug, not just asking a question, which should be created in <a href=\"https://github.com/apache/rocketmq/discussions\">GitHub Discussions</a>.</p>\n</li>\n<li class=\"task-list-item\">\n<p dir=\"auto\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I have searched the <a href=\"https://github.com/apache/rocketmq/issues\">GitHub Issues</a> and <a href=\"https://github.com/apache/rocketmq/discussions\">GitHub Discussions</a>  of this repository and believe that this is not a duplicate.</p>\n</li>\n<li class=\"task-list-item\">\n<p dir=\"auto\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I have confirmed that this bug belongs to the current repository, not other repositories of RocketMQ.</p>\n</li>\n</ul>\n<h3 dir=\"auto\">Runtime platform environment</h3>\n<p dir=\"auto\">OS(CentOS release 7.6.1810)</p>\n<h3 dir=\"auto\">RocketMQ version</h3>\n<p dir=\"auto\">branch(develop) version(5.1.5-SNAPSHOT)</p>\n<h3 dir=\"auto\">JDK Version</h3>\n<p dir=\"auto\">Compliler(Oracke JDK 1.8.0_361) OS(CentOS release 7.6.1810)</p>\n<h3 dir=\"auto\">Describe the Bug</h3>\n<p dir=\"auto\">I found an bug of ACL during my work on RocketMQ.<br>\nWhen I tried to delete the last item of the ACL topic/group perms, there was an error which indicates the resouce fomat is incrorrect. And there's also an similar problem of the global white list, which is always remain an empty data at last.</p>\n<h3 dir=\"auto\">Steps to Reproduce</h3>\n<p dir=\"auto\"><strong>To reproduce you can use two ways:</strong></p>\n<ol dir=\"auto\">\n<li>If you use the Dashboard(take the topic/group perms for example)<br>\n1.1 Create an ACL with mutiple topic perms and group perms.<br>\n1.2 Delete the topic perms or group perms one by one.<br>\n1.3 The error woud appear when delete the last one.</li>\n</ol>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/29912051/293581427-10e0ddc4-84a9-4306-9f13-b29a26c2cddc.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODE0MjctMTBlMGRkYzQtODRhOS00MzA2LTlmMTMtYjI5YTI2YzJjZGRjLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTdjZTE1ZmFlZWZhNDhlMTMzM2Q2OTAzMzBmYmU1ZGQ0ODYyNDMwNzUxYTFkOTM1ZThiNjg5OTNkOTJkZTllN2EmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.vNMlQvTKGOTh5rSEpHF6IiWhXUMpjRS93hVoUObBMo0\"><img src=\"https://private-user-images.githubusercontent.com/29912051/293581427-10e0ddc4-84a9-4306-9f13-b29a26c2cddc.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODE0MjctMTBlMGRkYzQtODRhOS00MzA2LTlmMTMtYjI5YTI2YzJjZGRjLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTdjZTE1ZmFlZWZhNDhlMTMzM2Q2OTAzMzBmYmU1ZGQ0ODYyNDMwNzUxYTFkOTM1ZThiNjg5OTNkOTJkZTllN2EmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.vNMlQvTKGOTh5rSEpHF6IiWhXUMpjRS93hVoUObBMo0\" alt=\"AgAACF5zlnReY1XDkERMf6P-SgV5fqC1\" style=\"max-width: 100%;\"></a><br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/29912051/293581449-641c7900-25ae-422f-b892-78725dba4fe3.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODE0NDktNjQxYzc5MDAtMjVhZS00MjJmLWI4OTItNzg3MjVkYmE0ZmUzLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTMwNDgyMDhkYTU2M2Y0MWNiMmFjNjU4NzFjMTQ3ZDEzNzRmOTdjODNiNTdkNjAzMDQ0YzBlMzAyMDlhZGFjNGUmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.eDHh81lE6v_9KVeHpVorcOCuvMg4SKDLKpIV-GtwNHI\"><img src=\"https://private-user-images.githubusercontent.com/29912051/293581449-641c7900-25ae-422f-b892-78725dba4fe3.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODE0NDktNjQxYzc5MDAtMjVhZS00MjJmLWI4OTItNzg3MjVkYmE0ZmUzLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTMwNDgyMDhkYTU2M2Y0MWNiMmFjNjU4NzFjMTQ3ZDEzNzRmOTdjODNiNTdkNjAzMDQ0YzBlMzAyMDlhZGFjNGUmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.eDHh81lE6v_9KVeHpVorcOCuvMg4SKDLKpIV-GtwNHI\" alt=\"AgAACF5zlnR_G2hISrFGkp9IHvbLVnhw\" style=\"max-width: 100%;\"></a><br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/29912051/293581463-64ca490f-838a-43da-b16a-92fc2995a509.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODE0NjMtNjRjYTQ5MGYtODM4YS00M2RhLWIxNmEtOTJmYzI5OTVhNTA5LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWRlY2ZmYTJlMDkwMDRmYjQyYzA4NjIxMDI5Y2ZjOTIyZGRhYzViM2RlMWZlNzQwNjcxYTAzZWUxMmVkOTc2M2UmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.YqHE8bQJ5UFksGCz_Ygd7po7wR38Pk5VcvjTMKTElVk\"><img src=\"https://private-user-images.githubusercontent.com/29912051/293581463-64ca490f-838a-43da-b16a-92fc2995a509.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODE0NjMtNjRjYTQ5MGYtODM4YS00M2RhLWIxNmEtOTJmYzI5OTVhNTA5LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWRlY2ZmYTJlMDkwMDRmYjQyYzA4NjIxMDI5Y2ZjOTIyZGRhYzViM2RlMWZlNzQwNjcxYTAzZWUxMmVkOTc2M2UmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.YqHE8bQJ5UFksGCz_Ygd7po7wR38Pk5VcvjTMKTElVk\" alt=\"AgAACF5zlnQIxRfBwMZA4odWFJ1KCjd_\" style=\"max-width: 100%;\"></a></p>\n<ol start=\"2\" dir=\"auto\">\n<li>If you want to create an test method for reproduce<br>\n2.1 New an DefaultMQAdminExt and config it with namesrv and then start it.<br>\n2.2 New an PlainAccessConfig and setGroupPerms(Collections.EMPTY_LIST), setTopicPerms(Collections.EMPTY_LIST).<br>\n2.3 Then call DefaultMQAdminExt #createAndUpdatePlainAccessConfig.<br>\n2.4 Or to call DefaultMQAdminExt #updateGlobalWhiteAddrConfig with the second parmeter an empty string.</li>\n</ol>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/29912051/293581324-978d469c-a105-4109-bc9a-76491a5b7cbc.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODEzMjQtOTc4ZDQ2OWMtYTEwNS00MTA5LWJjOWEtNzY0OTFhNWI3Y2JjLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWY0ZWYyMWU3YjI3YzYwZWQ2ZTVjNmZlODkxMWE5MzQ0YjZiN2Y4MDc1NTBhMzUwM2UxZGQ5OWI2NWFkMzM0YTUmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.d7H8YUjlvcmteLiXpOJuMJ8Kj77WxtkFRob1dNkFD5A\"><img src=\"https://private-user-images.githubusercontent.com/29912051/293581324-978d469c-a105-4109-bc9a-76491a5b7cbc.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODEzMjQtOTc4ZDQ2OWMtYTEwNS00MTA5LWJjOWEtNzY0OTFhNWI3Y2JjLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWY0ZWYyMWU3YjI3YzYwZWQ2ZTVjNmZlODkxMWE5MzQ0YjZiN2Y4MDc1NTBhMzUwM2UxZGQ5OWI2NWFkMzM0YTUmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.d7H8YUjlvcmteLiXpOJuMJ8Kj77WxtkFRob1dNkFD5A\" alt=\"\u56fe\u7247\" style=\"max-width: 100%;\"></a><br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/29912051/293581414-f0c277ee-1e91-4c6e-a627-320c2ac59ec4.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODE0MTQtZjBjMjc3ZWUtMWU5MS00YzZlLWE2MjctMzIwYzJhYzU5ZWM0LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWQyZTVlMDU5NGYyYmIyNWZkMzI5MmU1MjFkZjQwZTIzMWM4ZDUzMjljZGMxMWNmMmNhZDYxYjY0MDg1OGIyZWImWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.tY5dHa9ssYV8Cq7J45FmpgxQvFj05DzbTglpaWkPkD8\"><img src=\"https://private-user-images.githubusercontent.com/29912051/293581414-f0c277ee-1e91-4c6e-a627-320c2ac59ec4.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODE0MTQtZjBjMjc3ZWUtMWU5MS00YzZlLWE2MjctMzIwYzJhYzU5ZWM0LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWQyZTVlMDU5NGYyYmIyNWZkMzI5MmU1MjFkZjQwZTIzMWM4ZDUzMjljZGMxMWNmMmNhZDYxYjY0MDg1OGIyZWImWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.tY5dHa9ssYV8Cq7J45FmpgxQvFj05DzbTglpaWkPkD8\" alt=\"\u56fe\u7247\" style=\"max-width: 100%;\"></a></p>\n<h3 dir=\"auto\">What Did You Expect to See?</h3>\n<p dir=\"auto\">For the topic/group perms, it should not be an error to delete the last item.<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/29912051/293581614-26cc5b3d-6b9f-455f-a1ba-5c67668dc20f.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODE2MTQtMjZjYzViM2QtNmI5Zi00NTVmLWExYmEtNWM2NzY2OGRjMjBmLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTlkNTk3MDIyODY2ZTJiNjFkZTkyZWU1OGI4YWMzZTRjZWVjMTU3M2E1MWEyYjFkYjY4NWE3ZDA5ZTI3NWRiMjEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.j-xiqjg9mjLOnrlHrFyZFQGG1NC_tMWdMcdfZHy7djw\"><img src=\"https://private-user-images.githubusercontent.com/29912051/293581614-26cc5b3d-6b9f-455f-a1ba-5c67668dc20f.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODE2MTQtMjZjYzViM2QtNmI5Zi00NTVmLWExYmEtNWM2NzY2OGRjMjBmLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTlkNTk3MDIyODY2ZTJiNjFkZTkyZWU1OGI4YWMzZTRjZWVjMTU3M2E1MWEyYjFkYjY4NWE3ZDA5ZTI3NWRiMjEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.j-xiqjg9mjLOnrlHrFyZFQGG1NC_tMWdMcdfZHy7djw\" alt=\"\u56fe\u7247\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">For the global white list, it should not be an empty data</p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/29912051/293581607-04377834-cdd7-4a6f-a929-c68bd00482ce.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODE2MDctMDQzNzc4MzQtY2RkNy00YTZmLWE5MjktYzY4YmQwMDQ4MmNlLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWNhYzJlZjkwMjRkNTZmMGFlNmY3NzczZDE4ZmQ4ZjhjOTllYjU3ODhhODk2MWMzYzc5YjhiYTI3OTNhZDRlMTgmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.OeEftCNk67JHt0MazuSBvmIdJ2mGotN-DoLJAB50hTg\"><img src=\"https://private-user-images.githubusercontent.com/29912051/293581607-04377834-cdd7-4a6f-a929-c68bd00482ce.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODE2MDctMDQzNzc4MzQtY2RkNy00YTZmLWE5MjktYzY4YmQwMDQ4MmNlLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWNhYzJlZjkwMjRkNTZmMGFlNmY3NzczZDE4ZmQ4ZjhjOTllYjU3ODhhODk2MWMzYzc5YjhiYTI3OTNhZDRlMTgmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.OeEftCNk67JHt0MazuSBvmIdJ2mGotN-DoLJAB50hTg\" alt=\"\u56fe\u7247\" style=\"max-width: 100%;\"></a></p>\n<h3 dir=\"auto\">What Did You See Instead?</h3>\n<p dir=\"auto\">For the topic/group perms, it popup an error:<br>\norg.apache.rocketmq.client.exception.MQClientException: CODE: 209  DESC: Parse Resource format error for .<br>\nThe expected resource format is 'Res=Perm'. For example: topicA=SUB</p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/29912051/293581697-b06c98b8-852e-4227-9d13-dde47df42f03.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODE2OTctYjA2Yzk4YjgtODUyZS00MjI3LTlkMTMtZGRlNDdkZjQyZjAzLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTBjNDFlNzA5ZjhkODY5YzBjYjE5YmE2N2U0ZDM1N2FkMjljYmJhNzc4YWFjMDI1OTMwOGY1YjU2ODE5OTA3MzgmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.KeBIQez_-WPjtlqoGLDBbuN2WPh6ufg-xuYC7snIX8Y\"><img src=\"https://private-user-images.githubusercontent.com/29912051/293581697-b06c98b8-852e-4227-9d13-dde47df42f03.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODE2OTctYjA2Yzk4YjgtODUyZS00MjI3LTlkMTMtZGRlNDdkZjQyZjAzLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTBjNDFlNzA5ZjhkODY5YzBjYjE5YmE2N2U0ZDM1N2FkMjljYmJhNzc4YWFjMDI1OTMwOGY1YjU2ODE5OTA3MzgmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.KeBIQez_-WPjtlqoGLDBbuN2WPh6ufg-xuYC7snIX8Y\" alt=\"AgAACF5zlnReY1XDkERMf6P-SgV5fqC1\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">For the global white list, it remains an empty data</p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/29912051/293581734-794828f0-6471-446c-a885-6e4cd4949803.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODE3MzQtNzk0ODI4ZjAtNjQ3MS00NDZjLWE4ODUtNmU0Y2Q0OTQ5ODAzLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTk3OTZlN2FiNDA4MTJkMmVlYTBkODc4OTM1ZDNiYjI0YjcwMGUwY2UzMGFlNmI5M2E5YjA2MTE0NDgwZmU3ZmImWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.NV2qf3cuavuy2FhB4ptdydDHGPuXNvLdM3Si_X8sWNA\"><img src=\"https://private-user-images.githubusercontent.com/29912051/293581734-794828f0-6471-446c-a885-6e4cd4949803.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTY0MjcsIm5iZiI6MTcxMjA1NjEyNywicGF0aCI6Ii8yOTkxMjA1MS8yOTM1ODE3MzQtNzk0ODI4ZjAtNjQ3MS00NDZjLWE4ODUtNmU0Y2Q0OTQ5ODAzLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDExMDg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTk3OTZlN2FiNDA4MTJkMmVlYTBkODc4OTM1ZDNiYjI0YjcwMGUwY2UzMGFlNmI5M2E5YjA2MTE0NDgwZmU3ZmImWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.NV2qf3cuavuy2FhB4ptdydDHGPuXNvLdM3Si_X8sWNA\" alt=\"AgAACF5zlnR_G2hISrFGkp9IHvbLVnhw\" style=\"max-width: 100%;\"></a></p>\n<h3 dir=\"auto\">Additional Context</h3>\n<p dir=\"auto\"><strong>I've already found and fixed the bug, and I'll submit an PR later.</strong></p>",
  "description_text": "Before Creating the Bug Report\n\n\n I found a bug, not just asking a question, which should be created in GitHub Discussions.\n\n\n I have searched the GitHub Issues and GitHub Discussions  of this repository and believe that this is not a duplicate.\n\n\n I have confirmed that this bug belongs to the current repository, not other repositories of RocketMQ.\n\n\nRuntime platform environment\nOS(CentOS release 7.6.1810)\nRocketMQ version\nbranch(develop) version(5.1.5-SNAPSHOT)\nJDK Version\nCompliler(Oracke JDK 1.8.0_361) OS(CentOS release 7.6.1810)\nDescribe the Bug\nI found an bug of ACL during my work on RocketMQ.\nWhen I tried to delete the last item of the ACL topic/group perms, there was an error which indicates the resouce fomat is incrorrect. And there's also an similar problem of the global white list, which is always remain an empty data at last.\nSteps to Reproduce\nTo reproduce you can use two ways:\n\nIf you use the Dashboard(take the topic/group perms for example)\n1.1 Create an ACL with mutiple topic perms and group perms.\n1.2 Delete the topic perms or group perms one by one.\n1.3 The error woud appear when delete the last one.\n\n\n\n\n\nIf you want to create an test method for reproduce\n2.1 New an DefaultMQAdminExt and config it with namesrv and then start it.\n2.2 New an PlainAccessConfig and setGroupPerms(Collections.EMPTY_LIST), setTopicPerms(Collections.EMPTY_LIST).\n2.3 Then call DefaultMQAdminExt #createAndUpdatePlainAccessConfig.\n2.4 Or to call DefaultMQAdminExt #updateGlobalWhiteAddrConfig with the second parmeter an empty string.\n\n\n\nWhat Did You Expect to See?\nFor the topic/group perms, it should not be an error to delete the last item.\n\nFor the global white list, it should not be an empty data\n\nWhat Did You See Instead?\nFor the topic/group perms, it popup an error:\norg.apache.rocketmq.client.exception.MQClientException: CODE: 209  DESC: Parse Resource format error for .\nThe expected resource format is 'Res=Perm'. For example: topicA=SUB\n\nFor the global white list, it remains an empty data\n\nAdditional Context\nI've already found and fixed the bug, and I'll submit an PR later."
}