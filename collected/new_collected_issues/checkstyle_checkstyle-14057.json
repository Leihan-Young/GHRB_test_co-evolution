{
  "issue_id": 14064,
  "issue_url": "https://github.com/checkstyle/checkstyle/issues/14064",
  "title": "Regexp: violation pointing to line 0 while other Checks count first line as 1",
  "description": "<p dir=\"auto\"><a href=\"https://checkstyle.org/checks/regexp/regexp.html#Regexp\" rel=\"nofollow\">https://checkstyle.org/checks/regexp/regexp.html#Regexp</a></p>\n<p dir=\"auto\">problem is detected at <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2004190050\" data-permission-text=\"Title is private\" data-url=\"https://github.com/checkstyle/checkstyle/issues/14057\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/checkstyle/checkstyle/pull/14057/hovercard\" href=\"https://github.com/checkstyle/checkstyle/pull/14057\">#14057</a> and blocks it as test suite can not accept line 0 as expected.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ cat config.xml \n<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n          \"-//Puppy Crawl//DTD Check Configuration 1.3//EN\"\n          \"http://www.puppycrawl.com/dtds/configuration_1_3.dtd\">\n\n<module name=\"Checker\">\n  <module name=\"TreeWalker\">\n    <module name=\"Regexp\">\n      <property name=\"format\" value=\"// This code is copyrighted\"/>\n    </module>\n  </module>\n</module>\n\n$ cat Test.java \n// comment\npublic class TestClass {\n}\n\n$ java -jar checkstyle-10.12.4-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /var/tmp/Test.java:0: Required pattern '// This code is copyrighted' missing in file. [Regexp]\nAudit done.\nCheckstyle ends with 1 errors.\n\"><pre class=\"notranslate\"><code class=\"notranslate\">$ cat config.xml \n<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n          \"-//Puppy Crawl//DTD Check Configuration 1.3//EN\"\n          \"http://www.puppycrawl.com/dtds/configuration_1_3.dtd\">\n\n<module name=\"Checker\">\n  <module name=\"TreeWalker\">\n    <module name=\"Regexp\">\n      <property name=\"format\" value=\"// This code is copyrighted\"/>\n    </module>\n  </module>\n</module>\n\n$ cat Test.java \n// comment\npublic class TestClass {\n}\n\n$ java -jar checkstyle-10.12.4-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /var/tmp/Test.java:0: Required pattern '// This code is copyrighted' missing in file. [Regexp]\nAudit done.\nCheckstyle ends with 1 errors.\n\n</code></pre></div>\n<p dir=\"auto\">example for other Check that shows that line number is 1</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ cat config.xml \n<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n          \"-//Puppy Crawl//DTD Check Configuration 1.3//EN\"\n          \"http://www.puppycrawl.com/dtds/configuration_1_3.dtd\">\n\n<module name=\"Checker\">\n      <module name=\"FileLength\">\n        <property name=\"max\" value=\"1\"/>\n      </module>\n</module>\n\n$ cat Test.java \n// comment\npublic class TestClass {\n}\n\n$ java -jar checkstyle-10.12.4-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /var/tmp/Test.java:1: File length is 3 lines (max allowed is 1). [FileLength]\nAudit done.\nCheckstyle ends with 1 errors.\"><pre class=\"notranslate\"><code class=\"notranslate\">$ cat config.xml \n<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n          \"-//Puppy Crawl//DTD Check Configuration 1.3//EN\"\n          \"http://www.puppycrawl.com/dtds/configuration_1_3.dtd\">\n\n<module name=\"Checker\">\n      <module name=\"FileLength\">\n        <property name=\"max\" value=\"1\"/>\n      </module>\n</module>\n\n$ cat Test.java \n// comment\npublic class TestClass {\n}\n\n$ java -jar checkstyle-10.12.4-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /var/tmp/Test.java:1: File length is 3 lines (max allowed is 1). [FileLength]\nAudit done.\nCheckstyle ends with 1 errors.\n</code></pre></div>\n<p dir=\"auto\">prove in code that line length starts from 1: </p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/checkstyle/checkstyle/blob/55097468aa37d890b0e7b89ac2d27d08c16aee59/src/main/java/com/puppycrawl/tools/checkstyle/api/FileText.java#L279-L280\">checkstyle/src/main/java/com/puppycrawl/tools/checkstyle/api/FileText.java</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 279 to 280\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/checkstyle/checkstyle/commit/55097468aa37d890b0e7b89ac2d27d08c16aee59\">5509746</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L279\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"279\"></td>\n          <td id=\"LC279\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c\">// now we have lineNo and columnNo, both starting at zero.</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L280\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"280\"></td>\n          <td id=\"LC280\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">return</span> <span class=\"pl-k\">new</span> <span class=\"pl-smi\">LineColumn</span>(<span class=\"pl-s1\">lineNo</span> + <span class=\"pl-c1\">1</span>, <span class=\"pl-s1\">columnNo</span>); </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>\n<p dir=\"auto\">Expected:<br>\n<code class=\"notranslate\">[ERROR] /var/tmp/Test.java:1: Required pattern '// This code is copyrighted' missing in file. [Regexp]</code></p>",
  "description_text": "https://checkstyle.org/checks/regexp/regexp.html#Regexp\nproblem is detected at #14057 and blocks it as test suite can not accept line 0 as expected.\n\n\n\n\n\n\n\n\n\n\n$ cat Test.java \n// comment\npublic class TestClass {\n}\n\n$ java -jar checkstyle-10.12.4-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /var/tmp/Test.java:0: Required pattern '// This code is copyrighted' missing in file. [Regexp]\nAudit done.\nCheckstyle ends with 1 errors.\n\">$ cat config.xml \n\n\n\n\n  \n    \n      \n    \n  \n\n\n$ cat Test.java \n// comment\npublic class TestClass {\n}\n\n$ java -jar checkstyle-10.12.4-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /var/tmp/Test.java:0: Required pattern '// This code is copyrighted' missing in file. [Regexp]\nAudit done.\nCheckstyle ends with 1 errors.\n\n\nexample for other Check that shows that line number is 1\n\n\n\n\n\n\n\n\n$ cat Test.java \n// comment\npublic class TestClass {\n}\n\n$ java -jar checkstyle-10.12.4-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /var/tmp/Test.java:1: File length is 3 lines (max allowed is 1). [FileLength]\nAudit done.\nCheckstyle ends with 1 errors.\">$ cat config.xml \n\n\n\n\n      \n        \n      \n\n\n$ cat Test.java \n// comment\npublic class TestClass {\n}\n\n$ java -jar checkstyle-10.12.4-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /var/tmp/Test.java:1: File length is 3 lines (max allowed is 1). [FileLength]\nAudit done.\nCheckstyle ends with 1 errors.\n\nprove in code that line length starts from 1: \n\n\ncheckstyle/src/main/java/com/puppycrawl/tools/checkstyle/api/FileText.java\n\n\n        Lines 279 to 280\n      in\n      5509746\n\n\n\n\n\n\n // now we have lineNo and columnNo, both starting at zero. \n\n\n\n return new LineColumn(lineNo + 1, columnNo); \n\n\n\n\n\nExpected:\n[ERROR] /var/tmp/Test.java:1: Required pattern '// This code is copyrighted' missing in file. [Regexp]"
}