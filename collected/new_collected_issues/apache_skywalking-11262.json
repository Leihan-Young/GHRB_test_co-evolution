{
  "issue_id": 11257,
  "issue_url": "https://github.com/apache/skywalking/issues/11257",
  "title": "[Breaking Change] [Feature] Accept MQE to replace the old hard-coded alerting rules.",
  "description": "<h3 dir=\"auto\">Search before asking</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I had searched in the <a href=\"https://github.com/apache/skywalking/issues?q=is%3Aissue\">issues</a> and found no similar feature requirement.</li>\n</ul>\n<h3 dir=\"auto\">Description</h3>\n<p dir=\"auto\">Alerting core had been there for several years without a significant update, ref <a href=\"https://skywalking.apache.org/docs/main/v9.5.0/en/setup/backend/backend-alarm/\" rel=\"nofollow\">https://skywalking.apache.org/docs/main/v9.5.0/en/setup/backend/backend-alarm/</a>. It is based on a shifted time window for specific metrics of given entities. Last year, <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/kezhenxu94/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/kezhenxu94\">@kezhenxu94</a> added composite rules to support alarms triggered by multiple metrics of the same entity.</p>\n<p dir=\"auto\">This year, we have <a href=\"https://skywalking.apache.org/docs/main/v9.5.0/en/api/metrics-query-expression/\" rel=\"nofollow\">MQE</a> with <a href=\"https://skywalking.apache.org/docs/main/v9.5.0/en/api/query-protocol/#v3-apis\" rel=\"nofollow\">v3 metrics query APIs</a>.</p>\n<p dir=\"auto\">So, <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/wankai123/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/wankai123\">@wankai123</a> and I were trying to immigrate the same query grammar to define query, which would provide a more flexible rule definition. Also, as the calculation capabilities of MQE, the multiple metrics-based alerting would be supported automatically as well.</p>\n<p dir=\"auto\">BTW, as <a href=\"https://skywalking.apache.org/docs/main/next/en/setup/backend/backend-alarm/#hooks\" rel=\"nofollow\">new hook mechanism</a> is there since 9.6.0(next release), the whole alerting kernel would be rewritten.</p>\n<h3 dir=\"auto\">Use case</h3>\n<p dir=\"auto\">We have been working on this direction for weeks. <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/wankai123/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/wankai123\">@wankai123</a> is closing to finish all features and the replacement.</p>\n<h3 dir=\"auto\">Related issues</h3>\n<p dir=\"auto\"><em>No response</em></p>\n<h3 dir=\"auto\">Are you willing to submit a pull request to implement this on your own?</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Yes I am willing to submit a pull request on my own!</li>\n</ul>\n<h3 dir=\"auto\">Code of Conduct</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I agree to follow this project's <a href=\"https://www.apache.org/foundation/policies/conduct\" rel=\"nofollow\">Code of Conduct</a></li>\n</ul>",
  "description_text": "Search before asking\n\n I had searched in the issues and found no similar feature requirement.\n\nDescription\nAlerting core had been there for several years without a significant update, ref https://skywalking.apache.org/docs/main/v9.5.0/en/setup/backend/backend-alarm/. It is based on a shifted time window for specific metrics of given entities. Last year, @kezhenxu94 added composite rules to support alarms triggered by multiple metrics of the same entity.\nThis year, we have MQE with v3 metrics query APIs.\nSo, @wankai123 and I were trying to immigrate the same query grammar to define query, which would provide a more flexible rule definition. Also, as the calculation capabilities of MQE, the multiple metrics-based alerting would be supported automatically as well.\nBTW, as new hook mechanism is there since 9.6.0(next release), the whole alerting kernel would be rewritten.\nUse case\nWe have been working on this direction for weeks. @wankai123 is closing to finish all features and the replacement.\nRelated issues\nNo response\nAre you willing to submit a pull request to implement this on your own?\n\n Yes I am willing to submit a pull request on my own!\n\nCode of Conduct\n\n I agree to follow this project's Code of Conduct\n"
}