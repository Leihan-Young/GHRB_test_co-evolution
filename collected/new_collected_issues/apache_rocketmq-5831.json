{
  "issue_id": 5830,
  "issue_url": "https://github.com/apache/rocketmq/issues/5830",
  "title": "Bug in GetMessageResult#getMessageCount",
  "description": "<p dir=\"auto\">Variable <code class=\"notranslate\">messageCount</code> of GetMessageResult is not used in all <code class=\"notranslate\">addMessage</code> overloaded methods. Therefore <code class=\"notranslate\">getMessageCount</code> function won't get the correct number of messages.</p>\n<p dir=\"auto\"></p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/apache/rocketmq/blob/e38da5590f0677e7b3d092c295218bcafa19149b/store/src/main/java/org/apache/rocketmq/store/GetMessageResult.java#L144-L146\">rocketmq/store/src/main/java/org/apache/rocketmq/store/GetMessageResult.java</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 144 to 146\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/apache/rocketmq/commit/e38da5590f0677e7b3d092c295218bcafa19149b\">e38da55</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L144\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"144\"></td>\n          <td id=\"LC144\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">public</span> <span class=\"pl-smi\">int</span> <span class=\"pl-en\">getMessageCount</span>() { </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L145\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"145\"></td>\n          <td id=\"LC145\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-k\">return</span> <span class=\"pl-s1\">messageCount</span>; </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L146\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"146\"></td>\n          <td id=\"LC146\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> } </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>",
  "description_text": "Variable messageCount of GetMessageResult is not used in all addMessage overloaded methods. Therefore getMessageCount function won't get the correct number of messages.\n\n\n\nrocketmq/store/src/main/java/org/apache/rocketmq/store/GetMessageResult.java\n\n\n        Lines 144 to 146\n      in\n      e38da55\n\n\n\n\n\n\n public int getMessageCount() { \n\n\n\n return messageCount; \n\n\n\n } \n\n\n\n\n"
}