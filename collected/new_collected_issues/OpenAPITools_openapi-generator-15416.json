{
  "issue_id": 15136,
  "issue_url": "https://github.com/OpenAPITools/openapi-generator/issues/15136",
  "title": "[BUG][JAVA][resttemplate] Removal of @Component from ApiClient and <Name>Api classes is a breaking change",
  "description": "<h4 dir=\"auto\">Bug Report Checklist</h4>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> The list does not apply</li>\n</ul>\n<h5 dir=\"auto\">Description</h5>\n<p dir=\"auto\"><a href=\"https://github.com/OpenAPITools/openapi-generator/pull/14845\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/OpenAPITools/openapi-generator/pull/14845/hovercard\">PR</a> prompted by <a href=\"https://github.com/OpenAPITools/openapi-generator/issues/14832\" data-hovercard-type=\"issue\" data-hovercard-url=\"/OpenAPITools/openapi-generator/issues/14832/hovercard\">Issue</a> removed <code class=\"notranslate\">@Component</code> and <code class=\"notranslate\">@Autowired</code> annotations from the ApiClient and Api classes.</p>\n<p dir=\"auto\">Before this change Spring would automatically find the ApiClient and Api classes and they could easily be autowired. Since this change they will not be auto-discovered by Spring and previously working builds will now fail.</p>\n<p dir=\"auto\">You now have to manually provide the classes to Spring by e.g.:</p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"@Bean\npublic DefaultApi defaultApi(RestTemplate restTemplate) {\n  return new DefaultApi(new ApiClient(restTemplate));\n}\"><pre class=\"notranslate\"><span class=\"pl-c1\">@</span><span class=\"pl-c1\">Bean</span>\n<span class=\"pl-k\">public</span> <span class=\"pl-smi\">DefaultApi</span> <span class=\"pl-s1\">defaultApi</span>(<span class=\"pl-smi\">RestTemplate</span> <span class=\"pl-s1\">restTemplate</span>) {\n  <span class=\"pl-k\">return</span> <span class=\"pl-k\">new</span> <span class=\"pl-smi\">DefaultApi</span>(<span class=\"pl-k\">new</span> <span class=\"pl-smi\">ApiClient</span>(<span class=\"pl-s1\">restTemplate</span>));\n}</pre></div>\n<p dir=\"auto\">Furthermore the PR only removed the annotations but did not remove the imports of the annotation. See:<br>\n<a href=\"https://github.com/OpenAPITools/openapi-generator/blob/b409ceb3a08dba80e07381075bdab5c9475be802/modules/openapi-generator/src/main/resources/Java/libraries/resttemplate/ApiClient.mustache#L9\">@Autowired in ApiClient</a><br>\n<a href=\"https://github.com/OpenAPITools/openapi-generator/blob/b409ceb3a08dba80e07381075bdab5c9475be802/modules/openapi-generator/src/main/resources/Java/libraries/resttemplate/ApiClient.mustache#L29\">@Component in ApiClient</a><br>\n<a href=\"https://github.com/OpenAPITools/openapi-generator/blob/b409ceb3a08dba80e07381075bdab5c9475be802/modules/openapi-generator/src/main/resources/Java/libraries/resttemplate/api.mustache#L15\">@Autowired in Api</a><br>\n<a href=\"https://github.com/OpenAPITools/openapi-generator/blob/b409ceb3a08dba80e07381075bdab5c9475be802/modules/openapi-generator/src/main/resources/Java/libraries/resttemplate/api.mustache#L16\">@Component in Api</a></p>\n<h5 dir=\"auto\">openapi-generator version</h5>\n<p dir=\"auto\">6.5.0</p>\n<h5 dir=\"auto\">OpenAPI declaration file content or url</h5>\n\n<h5 dir=\"auto\">Generation Details</h5>\n<p dir=\"auto\">Our config is:</p>\n<div class=\"highlight highlight-text-xml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"<configuration>\n  <generatorName>java</generatorName>\n  <inputSpec>somePath</inputSpec>\n  <generateApiTests>false</generateApiTests>\n  <generateModelTests>false</generateModelTests>\n  <configOptions>\n    <openApiNullable>false</openApiNullable>\n    <useJakartaEe>true</useJakartaEe>\n    <library>resttemplate</library>\n  </configOptions>\n</configuration>\"><pre class=\"notranslate\"><<span class=\"pl-ent\">configuration</span>>\n  <<span class=\"pl-ent\">generatorName</span>>java</<span class=\"pl-ent\">generatorName</span>>\n  <<span class=\"pl-ent\">inputSpec</span>>somePath</<span class=\"pl-ent\">inputSpec</span>>\n  <<span class=\"pl-ent\">generateApiTests</span>>false</<span class=\"pl-ent\">generateApiTests</span>>\n  <<span class=\"pl-ent\">generateModelTests</span>>false</<span class=\"pl-ent\">generateModelTests</span>>\n  <<span class=\"pl-ent\">configOptions</span>>\n    <<span class=\"pl-ent\">openApiNullable</span>>false</<span class=\"pl-ent\">openApiNullable</span>>\n    <<span class=\"pl-ent\">useJakartaEe</span>>true</<span class=\"pl-ent\">useJakartaEe</span>>\n    <<span class=\"pl-ent\">library</span>>resttemplate</<span class=\"pl-ent\">library</span>>\n  </<span class=\"pl-ent\">configOptions</span>>\n</<span class=\"pl-ent\">configuration</span>></pre></div>\n<h5 dir=\"auto\">Steps to reproduce</h5>\n<ol dir=\"auto\">\n<li>Build any spec with the <code class=\"notranslate\">java</code> generator and <code class=\"notranslate\">resttemplate</code> lib in version 6.4.0 and generated APIs have an <code class=\"notranslate\">@Component</code> annotation</li>\n<li>Build any spec with the <code class=\"notranslate\">java</code> generator and <code class=\"notranslate\">resttemplate</code> lib in version 6.5.0 and generated APIs do not have it anymore</li>\n</ol>\n<h5 dir=\"auto\">Related issues/PRs</h5>\n<p dir=\"auto\"><a href=\"https://github.com/OpenAPITools/openapi-generator/pull/14845\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/OpenAPITools/openapi-generator/pull/14845/hovercard\">PR</a><br>\n<a href=\"https://github.com/OpenAPITools/openapi-generator/issues/14832\" data-hovercard-type=\"issue\" data-hovercard-url=\"/OpenAPITools/openapi-generator/issues/14832/hovercard\">Issue</a></p>\n<h5 dir=\"auto\">Suggest a fix</h5>\n<p dir=\"auto\">This should never have been merged in a minor update, since it is a breaking change. But since the damage has already been done now it should at least be documented in the changelog of this version and a migration path should be provided.</p>",
  "description_text": "Bug Report Checklist\n\n The list does not apply\n\nDescription\nPR prompted by Issue removed @Component and @Autowired annotations from the ApiClient and Api classes.\nBefore this change Spring would automatically find the ApiClient and Api classes and they could easily be autowired. Since this change they will not be auto-discovered by Spring and previously working builds will now fail.\nYou now have to manually provide the classes to Spring by e.g.:\n@Bean\npublic DefaultApi defaultApi(RestTemplate restTemplate) {\n  return new DefaultApi(new ApiClient(restTemplate));\n}\nFurthermore the PR only removed the annotations but did not remove the imports of the annotation. See:\n@Autowired in ApiClient\n@Component in ApiClient\n@Autowired in Api\n@Component in Api\nopenapi-generator version\n6.5.0\nOpenAPI declaration file content or url\nGeneration Details\nOur config is:\n<configuration>\n  <generatorName>javageneratorName>\n  <inputSpec>somePathinputSpec>\n  <generateApiTests>falsegenerateApiTests>\n  <generateModelTests>falsegenerateModelTests>\n  <configOptions>\n    <openApiNullable>falseopenApiNullable>\n    <useJakartaEe>trueuseJakartaEe>\n    <library>resttemplatelibrary>\n  configOptions>\nconfiguration>\nSteps to reproduce\n\nBuild any spec with the java generator and resttemplate lib in version 6.4.0 and generated APIs have an @Component annotation\nBuild any spec with the java generator and resttemplate lib in version 6.5.0 and generated APIs do not have it anymore\n\nRelated issues/PRs\nPR\nIssue\nSuggest a fix\nThis should never have been merged in a minor update, since it is a breaking change. But since the damage has already been done now it should at least be documented in the changelog of this version and a migration path should be provided."
}