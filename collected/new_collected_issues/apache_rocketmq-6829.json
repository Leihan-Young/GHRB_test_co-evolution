{
  "issue_id": 6828,
  "issue_url": "https://github.com/apache/rocketmq/issues/6828",
  "title": "[Bug] Ordered messages of different message group may affect each other for grpc pushConsumer",
  "description": "<h3 dir=\"auto\">Before Creating the Bug Report</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\">\n<p dir=\"auto\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I found a bug, not just asking a question, which should be created in <a href=\"https://github.com/apache/rocketmq/discussions\">GitHub Discussions</a>.</p>\n</li>\n<li class=\"task-list-item\">\n<p dir=\"auto\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I have searched the <a href=\"https://github.com/apache/rocketmq/issues\">GitHub Issues</a> and <a href=\"https://github.com/apache/rocketmq/discussions\">GitHub Discussions</a>  of this repository and believe that this is not a duplicate.</p>\n</li>\n<li class=\"task-list-item\">\n<p dir=\"auto\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I have confirmed that this bug belongs to the current repository, not other repositories of RocketMQ.</p>\n</li>\n</ul>\n<h3 dir=\"auto\">Runtime platform environment</h3>\n<p dir=\"auto\">Ubuntu</p>\n<h3 dir=\"auto\">RocketMQ version</h3>\n<p dir=\"auto\">branch: develop</p>\n<h3 dir=\"auto\">JDK Version</h3>\n<p dir=\"auto\">OpenJDK 1.8</p>\n<h3 dir=\"auto\">Describe the Bug</h3>\n<p dir=\"auto\">In the grpc pushConsumer, the concurrency of orderly consumption is equal to the number of partitions returned by queryAssignment.<br>\nNow, due to the number of partitions being equal to the number of brokers, the consumption speed of ordered messages in different partitions of the same broker will affect each other.</p>\n<h3 dir=\"auto\">Steps to Reproduce</h3>\n<ol dir=\"auto\">\n<li>create a fifo topic with two queue on broker.</li>\n<li>send some messages with two different message groups and ensure that these messages are stored in separate message queues.</li>\n<li>start a push consumer, for one message group we consume messages slowly.</li>\n</ol>\n<h3 dir=\"auto\">What Did You Expect to See?</h3>\n<p dir=\"auto\">The slowly consumption group expect not to effect another group.</p>\n<h3 dir=\"auto\">What Did You See Instead?</h3>\n<p dir=\"auto\">The slowly consumption group effect another group.</p>\n<h3 dir=\"auto\">Additional Context</h3>\n<p dir=\"auto\"><em>No response</em></p>",
  "description_text": "Before Creating the Bug Report\n\n\n I found a bug, not just asking a question, which should be created in GitHub Discussions.\n\n\n I have searched the GitHub Issues and GitHub Discussions  of this repository and believe that this is not a duplicate.\n\n\n I have confirmed that this bug belongs to the current repository, not other repositories of RocketMQ.\n\n\nRuntime platform environment\nUbuntu\nRocketMQ version\nbranch: develop\nJDK Version\nOpenJDK 1.8\nDescribe the Bug\nIn the grpc pushConsumer, the concurrency of orderly consumption is equal to the number of partitions returned by queryAssignment.\nNow, due to the number of partitions being equal to the number of brokers, the consumption speed of ordered messages in different partitions of the same broker will affect each other.\nSteps to Reproduce\n\ncreate a fifo topic with two queue on broker.\nsend some messages with two different message groups and ensure that these messages are stored in separate message queues.\nstart a push consumer, for one message group we consume messages slowly.\n\nWhat Did You Expect to See?\nThe slowly consumption group expect not to effect another group.\nWhat Did You See Instead?\nThe slowly consumption group effect another group.\nAdditional Context\nNo response"
}