{
  "issue_id": 362,
  "issue_url": "https://github.com/Hakky54/sslcontext-kickstart/issues/362",
  "title": "Potential Regression in 8.1.3 (#4c16ca8)",
  "description": "<h3 dir=\"auto\">Describe the bug</h3>\n<p dir=\"auto\">Previously supported cipher suites are no longer supported since 8.1.3. I have not had time to debug this yet, but I am opening this issue to track the problem, it did not exist in <a href=\"https://github.com/javalin/javalin-ssl/actions/runs/5373326492\">8.1.2</a>.</p>\n<h3 dir=\"auto\">To Reproduce</h3>\n<p dir=\"auto\">Running the test suite in the actions runner fails with the following error:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"KeystoreLoadingTests > Loading a valid P12 keystore from a path FAILED\n    io.javalin.util.JavalinException: java.lang.IllegalArgumentException: cipherSuite TLS_DHE_RSA_WITH_AES_256_GCM_SHA384 is not supported.\n        at app//io.javalin.Javalin.start(Javalin.java:186)\n        at app//io.javalin.community.ssl.IntegrationTestClass.assertWorks(IntegrationTestClass.java:141)\n        at app//io.javalin.community.ssl.IntegrationTestClass.assertSslWorks(IntegrationTestClass.java:152)\n        at app//io.javalin.community.ssl.KeystoreLoadingTests.loadValidP12FromPath(KeystoreLoadingTests.java:85)\n\n        Caused by:\n        java.lang.IllegalArgumentException: cipherSuite TLS_DHE_RSA_WITH_AES_256_GCM_SHA384 is not supported.\n            at org.conscrypt.NativeCrypto.checkEnabledCipherSuites(NativeCrypto.java:1117)\n            at org.conscrypt.SSLParametersImpl.setEnabledCipherSuites(SSLParametersImpl.java:264)\n            at org.conscrypt.ConscryptEngine.setEnabledCipherSuites(ConscryptEngine.java:677)\n            at java.base/javax.net.ssl.SSLEngine.setSSLParameters(SSLEngine.java:1331)\n            at org.conscrypt.ConscryptEngine.setSSLParameters(ConscryptEngine.java:532)\n            at org.conscrypt.Java8EngineWrapper.setSSLParameters(Java8EngineWrapper.java:66)\n            at nl.altindag.ssl.sslcontext.FenixSSLContextSpi.getSSLEngine(FenixSSLContextSpi.java:84)\n            at nl.altindag.ssl.sslcontext.FenixSSLContextSpi.engineCreateSSLEngine(FenixSSLContextSpi.java:68)\n            at java.base/javax.net.ssl.SSLContext.createSSLEngine(SSLContext.java:373)\n            at org.eclipse.jetty.util.ssl.SslContextFactory.checkConfiguration(SslContextFactory.java:220)\n            at org.eclipse.jetty.util.ssl.SslContextFactory.doStart(SslContextFactory.java:215)\n            at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\n            at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\n            at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\n            at org.eclipse.jetty.server.SslConnectionFactory.doStart(SslConnectionFactory.java:112)\n            at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\n            at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\n            at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\n            at org.eclipse.jetty.server.AbstractConnector.doStart(AbstractConnector.java:367)\n            at org.eclipse.jetty.server.AbstractNetworkConnector.doStart(AbstractNetworkConnector.java:75)\n            at org.eclipse.jetty.server.ServerConnector.doStart(ServerConnector.java:228)\n            at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\n            at org.eclipse.jetty.server.Server.doStart(Server.java:428)\n            at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\n            at io.javalin.jetty.JettyServer.start(JettyServer.kt:82)\n            at io.javalin.Javalin.start(Javalin.java:171)\n            ... 3 more\"><pre class=\"notranslate\"><code class=\"notranslate\">KeystoreLoadingTests > Loading a valid P12 keystore from a path FAILED\n    io.javalin.util.JavalinException: java.lang.IllegalArgumentException: cipherSuite TLS_DHE_RSA_WITH_AES_256_GCM_SHA384 is not supported.\n        at app//io.javalin.Javalin.start(Javalin.java:186)\n        at app//io.javalin.community.ssl.IntegrationTestClass.assertWorks(IntegrationTestClass.java:141)\n        at app//io.javalin.community.ssl.IntegrationTestClass.assertSslWorks(IntegrationTestClass.java:152)\n        at app//io.javalin.community.ssl.KeystoreLoadingTests.loadValidP12FromPath(KeystoreLoadingTests.java:85)\n\n        Caused by:\n        java.lang.IllegalArgumentException: cipherSuite TLS_DHE_RSA_WITH_AES_256_GCM_SHA384 is not supported.\n            at org.conscrypt.NativeCrypto.checkEnabledCipherSuites(NativeCrypto.java:1117)\n            at org.conscrypt.SSLParametersImpl.setEnabledCipherSuites(SSLParametersImpl.java:264)\n            at org.conscrypt.ConscryptEngine.setEnabledCipherSuites(ConscryptEngine.java:677)\n            at java.base/javax.net.ssl.SSLEngine.setSSLParameters(SSLEngine.java:1331)\n            at org.conscrypt.ConscryptEngine.setSSLParameters(ConscryptEngine.java:532)\n            at org.conscrypt.Java8EngineWrapper.setSSLParameters(Java8EngineWrapper.java:66)\n            at nl.altindag.ssl.sslcontext.FenixSSLContextSpi.getSSLEngine(FenixSSLContextSpi.java:84)\n            at nl.altindag.ssl.sslcontext.FenixSSLContextSpi.engineCreateSSLEngine(FenixSSLContextSpi.java:68)\n            at java.base/javax.net.ssl.SSLContext.createSSLEngine(SSLContext.java:373)\n            at org.eclipse.jetty.util.ssl.SslContextFactory.checkConfiguration(SslContextFactory.java:220)\n            at org.eclipse.jetty.util.ssl.SslContextFactory.doStart(SslContextFactory.java:215)\n            at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\n            at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\n            at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\n            at org.eclipse.jetty.server.SslConnectionFactory.doStart(SslConnectionFactory.java:112)\n            at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\n            at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\n            at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\n            at org.eclipse.jetty.server.AbstractConnector.doStart(AbstractConnector.java:367)\n            at org.eclipse.jetty.server.AbstractNetworkConnector.doStart(AbstractNetworkConnector.java:75)\n            at org.eclipse.jetty.server.ServerConnector.doStart(ServerConnector.java:228)\n            at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\n            at org.eclipse.jetty.server.Server.doStart(Server.java:428)\n            at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\n            at io.javalin.jetty.JettyServer.start(JettyServer.kt:82)\n            at io.javalin.Javalin.start(Javalin.java:171)\n            ... 3 more\n</code></pre></div>\n<h3 dir=\"auto\">Environmental Data:</h3>\n<ul dir=\"auto\">\n<li>Java Version: [11,17,18]</li>\n<li>Maven Version: N/A, Using gradle</li>\n<li>OS: [Windows, Linux, Mac]</li>\n</ul>\n<h3 dir=\"auto\">Additional context</h3>\n<p dir=\"auto\">Actions Runner Logs: <a href=\"https://github.com/javalin/javalin-ssl/actions/runs/5606563554?pr=90\">https://github.com/javalin/javalin-ssl/actions/runs/5606563554?pr=90</a><br>\nUbuntu JDK18 runner logs: <a href=\"https://github.com/Hakky54/sslcontext-kickstart/files/12101999/logs_491.zip\">logs_491.zip</a></p>",
  "description_text": "Describe the bug\nPreviously supported cipher suites are no longer supported since 8.1.3. I have not had time to debug this yet, but I am opening this issue to track the problem, it did not exist in 8.1.2.\nTo Reproduce\nRunning the test suite in the actions runner fails with the following error:\nKeystoreLoadingTests > Loading a valid P12 keystore from a path FAILED\n    io.javalin.util.JavalinException: java.lang.IllegalArgumentException: cipherSuite TLS_DHE_RSA_WITH_AES_256_GCM_SHA384 is not supported.\n        at app//io.javalin.Javalin.start(Javalin.java:186)\n        at app//io.javalin.community.ssl.IntegrationTestClass.assertWorks(IntegrationTestClass.java:141)\n        at app//io.javalin.community.ssl.IntegrationTestClass.assertSslWorks(IntegrationTestClass.java:152)\n        at app//io.javalin.community.ssl.KeystoreLoadingTests.loadValidP12FromPath(KeystoreLoadingTests.java:85)\n\n        Caused by:\n        java.lang.IllegalArgumentException: cipherSuite TLS_DHE_RSA_WITH_AES_256_GCM_SHA384 is not supported.\n            at org.conscrypt.NativeCrypto.checkEnabledCipherSuites(NativeCrypto.java:1117)\n            at org.conscrypt.SSLParametersImpl.setEnabledCipherSuites(SSLParametersImpl.java:264)\n            at org.conscrypt.ConscryptEngine.setEnabledCipherSuites(ConscryptEngine.java:677)\n            at java.base/javax.net.ssl.SSLEngine.setSSLParameters(SSLEngine.java:1331)\n            at org.conscrypt.ConscryptEngine.setSSLParameters(ConscryptEngine.java:532)\n            at org.conscrypt.Java8EngineWrapper.setSSLParameters(Java8EngineWrapper.java:66)\n            at nl.altindag.ssl.sslcontext.FenixSSLContextSpi.getSSLEngine(FenixSSLContextSpi.java:84)\n            at nl.altindag.ssl.sslcontext.FenixSSLContextSpi.engineCreateSSLEngine(FenixSSLContextSpi.java:68)\n            at java.base/javax.net.ssl.SSLContext.createSSLEngine(SSLContext.java:373)\n            at org.eclipse.jetty.util.ssl.SslContextFactory.checkConfiguration(SslContextFactory.java:220)\n            at org.eclipse.jetty.util.ssl.SslContextFactory.doStart(SslContextFactory.java:215)\n            at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\n            at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\n            at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\n            at org.eclipse.jetty.server.SslConnectionFactory.doStart(SslConnectionFactory.java:112)\n            at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\n            at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\n            at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\n            at org.eclipse.jetty.server.AbstractConnector.doStart(AbstractConnector.java:367)\n            at org.eclipse.jetty.server.AbstractNetworkConnector.doStart(AbstractNetworkConnector.java:75)\n            at org.eclipse.jetty.server.ServerConnector.doStart(ServerConnector.java:228)\n            at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\n            at org.eclipse.jetty.server.Server.doStart(Server.java:428)\n            at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\n            at io.javalin.jetty.JettyServer.start(JettyServer.kt:82)\n            at io.javalin.Javalin.start(Javalin.java:171)\n            ... 3 more\n\nEnvironmental Data:\n\nJava Version: [11,17,18]\nMaven Version: N/A, Using gradle\nOS: [Windows, Linux, Mac]\n\nAdditional context\nActions Runner Logs: https://github.com/javalin/javalin-ssl/actions/runs/5606563554?pr=90\nUbuntu JDK18 runner logs: logs_491.zip"
}