{
  "issue_id": 13307,
  "issue_url": "https://github.com/checkstyle/checkstyle/issues/13307",
  "title": "Add support to our Inputs for lines with multiple violations",
  "description": "<p dir=\"auto\">This was a problem for long time but become very acute at <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1765614731\" data-permission-text=\"Title is private\" data-url=\"https://github.com/checkstyle/checkstyle/issues/13276\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/checkstyle/checkstyle/pull/13276/hovercard?comment_id=1237941452&comment_type=review_comment\" href=\"https://github.com/checkstyle/checkstyle/pull/13276#discussion_r1237941452\">#13276 (comment)</a></p>\n<p dir=\"auto\">We need to update our Abstract Test classes to allow lines like:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"    Runnable noop = () ->{}; // 4 violations, see messages below \n                          // ''->' is not followed by whitespace'\n                          // ''{' is not followed by whitespace'\n                          // ''{' is not preceded with whitespace'\n                          // ''}' is not preceded with whitespace'\"><pre class=\"notranslate\"><code class=\"notranslate\">    Runnable noop = () ->{}; // 4 violations, see messages below \n                          // ''->' is not followed by whitespace'\n                          // ''{' is not followed by whitespace'\n                          // ''{' is not preceded with whitespace'\n                          // ''}' is not preceded with whitespace'\n</code></pre></div>\n<p dir=\"auto\">so all messages are just on new lines below <code class=\"notranslate\">4 violations, see messages below</code><br>\nSo Reviewer will clearly see what is a violation.</p>\n<p dir=\"auto\">example:<br>\n</p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/checkstyle/checkstyle/blob/3d8ed42ab60c0399550b3e7d54ca9dd767583101/src/test/resources/com/puppycrawl/tools/checkstyle/checks/annotation/annotationlocation/InputAnnotationLocationIncorrect.java#L38\">checkstyle/src/test/resources/com/puppycrawl/tools/checkstyle/checks/annotation/annotationlocation/InputAnnotationLocationIncorrect.java</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 38\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/checkstyle/checkstyle/commit/3d8ed42ab60c0399550b3e7d54ca9dd767583101\">3d8ed42</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L38\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"38\"></td>\n          <td id=\"LC38\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c1\">@</span><span class=\"pl-c1\">MyAnnotation1</span>(<span class=\"pl-s\">\"foo\"</span>) <span class=\"pl-c1\">@</span><span class=\"pl-c1\">MyAnn_21</span> <span class=\"pl-smi\">void</span> <span class=\"pl-en\">foo1</span>() {} <span class=\"pl-c\">// 2 violations</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<br>\nbut there are more in code.<p></p>\n<p dir=\"auto\">pattern that used at <a href=\"https://github.com/checkstyle/checkstyle/pull/13951\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/checkstyle/checkstyle/pull/13951/hovercard\">PR</a>, may be extra <code class=\"notranslate\">:</code> is required to signal that second line is continuation:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"    /**\n     *  <p> <li> <TR> <Td> <tH> <.....\n     *      <tFoot> // ok\n     * @param field5 </p> value to which {@link #field5} is to be set to\n     */\n    // 4 violations 4 lines above:\n    //                            'Unclosed HTML tag found: p'\n    //                            'tag P_TAG_START'\n    //                            'tag LI_TAG_START'\n    //                            'tag BODY_TAG_START'\n    private void setField5(int field5) {this.field5 = field5;}\"><pre class=\"notranslate\"><code class=\"notranslate\">    /**\n     *  <p> <li> <TR> <Td> <tH> <.....\n     *      <tFoot> // ok\n     * @param field5 </p> value to which {@link #field5} is to be set to\n     */\n    // 4 violations 4 lines above:\n    //                            'Unclosed HTML tag found: p'\n    //                            'tag P_TAG_START'\n    //                            'tag LI_TAG_START'\n    //                            'tag BODY_TAG_START'\n    private void setField5(int field5) {this.field5 = field5;}\n</code></pre></div>\n<p dir=\"auto\">As we process lines one by one, of we detect multiple-line pattern we look ahead for defined set of lines. Processing of such lines with violation only will not match any pattern so they will be skipped by general iteration over lines. Location of single quoted message can be at any indentation, to let user user any formatting to show message as he wants.</p>",
  "description_text": "This was a problem for long time but become very acute at #13276 (comment)\nWe need to update our Abstract Test classes to allow lines like:\n    Runnable noop = () ->{}; // 4 violations, see messages below \n                          // ''->' is not followed by whitespace'\n                          // ''{' is not followed by whitespace'\n                          // ''{' is not preceded with whitespace'\n                          // ''}' is not preceded with whitespace'\n\nso all messages are just on new lines below 4 violations, see messages below\nSo Reviewer will clearly see what is a violation.\nexample:\n\n\n\ncheckstyle/src/test/resources/com/puppycrawl/tools/checkstyle/checks/annotation/annotationlocation/InputAnnotationLocationIncorrect.java\n\n\n         Line 38\n      in\n      3d8ed42\n\n\n\n\n\n\n @MyAnnotation1(\"foo\") @MyAnn_21 void foo1() {} // 2 violations \n\n\n\n\n\nbut there are more in code.\npattern that used at PR, may be extra : is required to signal that second line is continuation:\n    /**\n     *       <.....\n     *       // ok\n     * @param field5  value to which {@link #field5} is to be set to\n     */\n    // 4 violations 4 lines above:\n    //                            'Unclosed HTML tag found: p'\n    //                            'tag P_TAG_START'\n    //                            'tag LI_TAG_START'\n    //                            'tag BODY_TAG_START'\n    private void setField5(int field5) {this.field5 = field5;}\n\nAs we process lines one by one, of we detect multiple-line pattern we look ahead for defined set of lines. Processing of such lines with violation only will not match any pattern so they will be skipped by general iteration over lines. Location of single quoted message can be at any indentation, to let user user any formatting to show message as he wants."
}