{
  "issue_id": 5832,
  "issue_url": "https://github.com/apache/rocketmq/issues/5832",
  "title": "TodayConsumeCount is increasing rapidly without sending message",
  "description": "<p dir=\"auto\"><strong>BUG REPORT</strong></p>\n<ol dir=\"auto\">\n<li>Please describe the issue you observed:</li>\n</ol>\n<ul dir=\"auto\">\n<li>What did you do (The steps to reproduce)?</li>\n</ul>\n<ol dir=\"auto\">\n<li>producer send little messages</li>\n<li>stop producer</li>\n<li>consume little messages after switch to mode POP</li>\n<li>stop consumer</li>\n<li>TodayConsumeCount is increasing rapidly  without sending message</li>\n</ol>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://user-images.githubusercontent.com/31796988/210914013-771f043f-3a31-406b-b4ab-331f8134e1e1.png\"><img width=\"520\" alt=\"image\" src=\"https://user-images.githubusercontent.com/31796988/210914013-771f043f-3a31-406b-b4ab-331f8134e1e1.png\" style=\"max-width: 100%;\"></a></p>\n<ul dir=\"auto\">\n<li>\n<p dir=\"auto\">What is expected to see?</p>\n</li>\n<li>\n<p dir=\"auto\">What did you see instead?</p>\n</li>\n</ul>\n<ol start=\"2\" dir=\"auto\">\n<li>\n<p dir=\"auto\">Please tell us about your environment: develop</p>\n</li>\n<li>\n<p dir=\"auto\">Other information (e.g. detailed explanation, logs, related issues, suggestions on how to fix, etc):</p>\n</li>\n</ol>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://user-images.githubusercontent.com/31796988/210914081-9e7faa6e-4e27-47da-8380-f5dc13568a91.png\"><img width=\"488\" alt=\"image\" src=\"https://user-images.githubusercontent.com/31796988/210914081-9e7faa6e-4e27-47da-8380-f5dc13568a91.png\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">In DefaultMessageStore</p>\n<p dir=\"auto\">this.storeStatsService.getGetMessageTransferredMsgCount().add(cqUnit.getBatchNum());</p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://user-images.githubusercontent.com/31796988/210914238-8000c0dd-ade4-4b0a-b37d-50c694a88136.png\"><img width=\"771\" alt=\"image\" src=\"https://user-images.githubusercontent.com/31796988/210914238-8000c0dd-ade4-4b0a-b37d-50c694a88136.png\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">it is ok when in the mode PULL</p>",
  "description_text": "BUG REPORT\n\nPlease describe the issue you observed:\n\n\nWhat did you do (The steps to reproduce)?\n\n\nproducer send little messages\nstop producer\nconsume little messages after switch to mode POP\nstop consumer\nTodayConsumeCount is increasing rapidly  without sending message\n\n\n\n\nWhat is expected to see?\n\n\nWhat did you see instead?\n\n\n\n\nPlease tell us about your environment: develop\n\n\nOther information (e.g. detailed explanation, logs, related issues, suggestions on how to fix, etc):\n\n\n\nIn DefaultMessageStore\nthis.storeStatsService.getGetMessageTransferredMsgCount().add(cqUnit.getBatchNum());\n\nit is ok when in the mode PULL"
}