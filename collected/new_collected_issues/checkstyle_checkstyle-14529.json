{
  "issue_id": 14502,
  "issue_url": "https://github.com/checkstyle/checkstyle/issues/14502",
  "title": "GenericWhitespaceCheck: Handling of whitespace between generic and record header",
  "description": "<p dir=\"auto\">From <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2139931996\" data-permission-text=\"Title is private\" data-url=\"https://github.com/checkstyle/checkstyle/issues/14497\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/checkstyle/checkstyle/pull/14497/hovercard?comment_id=1493346388&comment_type=review_comment\" href=\"https://github.com/checkstyle/checkstyle/pull/14497#discussion_r1493346388\">#14497 (comment)</a> (second last paragraph)</p>\n<p dir=\"auto\">(<a href=\"https://checkstyle.sourceforge.io/checks/whitespace/genericwhitespace.html\" rel=\"nofollow\">Check Documentation</a>)</p>\n<p dir=\"auto\"><strong>Goal of this Issue:</strong></p>\n<ul dir=\"auto\">\n<li>Conclude whether whitespace between generic and record header should be considered as a violation or not.</li>\n<li>Based on the conclusion necessary changes can be done.</li>\n</ul>\n<p dir=\"auto\"><strong>How it works Now:</strong><br>\nCurrently whitespace between generic and record header is not considered a violation.</p>\n<p dir=\"auto\"><strong>Test.java</strong></p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"record Test<T> () {}\n//            ^\n//            +--- whitespace in question\"><pre class=\"notranslate\">record <span class=\"pl-s1\">Test</span><<span class=\"pl-smi\">T</span>> () {}\n<span class=\"pl-c\">//            ^</span>\n<span class=\"pl-c\">//            +--- whitespace in question</span></pre></div>\n<p dir=\"auto\"><strong>config.xml</strong></p>\n<div class=\"highlight highlight-text-xml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n        \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n        \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n<module name=\"Checker\">\n  <module name=\"TreeWalker\">\n    <module name=\"GenericWhitespace\"/>\n  </module>\n</module>\"><pre class=\"notranslate\"><?<span class=\"pl-ent\">xml</span><span class=\"pl-e\"> version</span>=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>1.0<span class=\"pl-pds\">\"</span></span>?>\n<!<span class=\"pl-ent\">DOCTYPE</span> <span class=\"pl-e\">module</span> PUBLIC\n        \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n        \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n<<span class=\"pl-ent\">module</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Checker<span class=\"pl-pds\">\"</span></span>>\n  <<span class=\"pl-ent\">module</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>TreeWalker<span class=\"pl-pds\">\"</span></span>>\n    <<span class=\"pl-ent\">module</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>GenericWhitespace<span class=\"pl-pds\">\"</span></span>/>\n  </<span class=\"pl-ent\">module</span>>\n</<span class=\"pl-ent\">module</span>></pre></div>\n<p dir=\"auto\"><strong>Current CLI Execution:</strong></p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"java -jar checkstyle-10.13.0-all.jar -c config.xml Test.java\nStarting audit...\nAudit done.\"><pre class=\"notranslate\"><code class=\"notranslate\">java -jar checkstyle-10.13.0-all.jar -c config.xml Test.java\nStarting audit...\nAudit done.\n</code></pre></div>\n<p dir=\"auto\"><strong>Expected Working:</strong> <del>To be decided</del><br>\n<code class=\"notranslate\">[ERROR] Test.java:1:14: '>' is followed by whitespace. [GenericWhitespace]</code></p>\n<h3 dir=\"auto\">Findings that may be useful:</h3>\n<ul dir=\"auto\">\n<li>The syntax is kind of similar to Issue <a href=\"https://github.com/checkstyle/checkstyle/issues/14344\" data-hovercard-type=\"issue\" data-hovercard-url=\"/checkstyle/checkstyle/issues/14344/hovercard\">#14344</a></li>\n<li><a href=\"https://google.github.io/styleguide/javaguide.html#s4.6.2-horizontal-whitespace\" rel=\"nofollow\">Horizontal Whitespace</a> from google style, which includes the <em>only</em> places where occurrence of whitespace is valid does not includes this usage.</li>\n<li>In <a href=\"https://docs.oracle.com/en/java/javase/17/language/records.html#GUID-6699E26F-4A9B-4393-A08B-1E47D4B2D263\" rel=\"nofollow\">oracle docs</a> for record classes [see first point of <strong>Features of Record Classes</strong>], a whitespace <em>is</em> present between generic and record header in the example.</li>\n<li>This check adheres to the \"typical convention\".</li>\n</ul>\n<p dir=\"auto\"><strong>Typical Usages of Generic Records (Anecdotal):</strong></p>\n<ul dir=\"auto\">\n<li>Generic records in Checkstyle, <a href=\"https://github.com/checkstyle/contribution/blob/master/checkstyle-tester/projects-to-test-on-for-github-action.properties\">default projects</a> for regression ,and those I have encountered so far, do not contain whitespace between generic and record header.<br>\nThis can be verified by running the following two grep cmds:\n<ol dir=\"auto\">\n<li><code class=\"notranslate\">grep -P -r \"record [a-zA-Z0-9\\s$_]+\\<.*\\>\\(.*\\)\" dir/ | tee >(wc -l)</code></li>\n<li><code class=\"notranslate\">grep -P -r \"record [a-zA-Z0-9\\s$_]+\\<.*\\>\\s+\\(.*\\)\" dir/ | tee >(wc -l)</code></li>\n</ol>\n</li>\n<li>The pattern will match for the generic records, first one matching no-whitespace between generic and record header, while the second one matching atleast a single-whitespace between generic and record header.</li>\n<li>Output for the cmd on Checkstyle repo: <strong>i.</strong> <code class=\"notranslate\">32</code>; <strong>ii:</strong> <code class=\"notranslate\">0</code></li>\n<li>Output for the cmd on regression repos: <strong>i.</strong> <code class=\"notranslate\">60</code>; <strong>ii.</strong> <code class=\"notranslate\">0</code><br>\n<strong>Side note:</strong> Arguably better way to verify that there are no such cases would be implement changes which detects space between generic and record header as a violation, and then check for differences in the report. (lmk if that is needed)</li>\n</ul>",
  "description_text": "From #14497 (comment) (second last paragraph)\n(Check Documentation)\nGoal of this Issue:\n\nConclude whether whitespace between generic and record header should be considered as a violation or not.\nBased on the conclusion necessary changes can be done.\n\nHow it works Now:\nCurrently whitespace between generic and record header is not considered a violation.\nTest.java\nrecord Test<T> () {}\n//            ^\n//            +--- whitespace in question\nconfig.xml\n\n\n\n\n\n\n\">xml version=\"1.0\"?>\nDOCTYPE module PUBLIC\n        \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n        \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n<module name=\"Checker\">\n  <module name=\"TreeWalker\">\n    <module name=\"GenericWhitespace\"/>\n  module>\nmodule>\nCurrent CLI Execution:\njava -jar checkstyle-10.13.0-all.jar -c config.xml Test.java\nStarting audit...\nAudit done.\n\nExpected Working: To be decided\n[ERROR] Test.java:1:14: '>' is followed by whitespace. [GenericWhitespace]\nFindings that may be useful:\n\nThe syntax is kind of similar to Issue #14344\nHorizontal Whitespace from google style, which includes the only places where occurrence of whitespace is valid does not includes this usage.\nIn oracle docs for record classes [see first point of Features of Record Classes], a whitespace is present between generic and record header in the example.\nThis check adheres to the \"typical convention\".\n\nTypical Usages of Generic Records (Anecdotal):\n\nGeneric records in Checkstyle, default projects for regression ,and those I have encountered so far, do not contain whitespace between generic and record header.\nThis can be verified by running the following two grep cmds:\n\ngrep -P -r \"record [a-zA-Z0-9\\s$_]+\\<.*\\>\\(.*\\)\" dir/ | tee >(wc -l)\ngrep -P -r \"record [a-zA-Z0-9\\s$_]+\\<.*\\>\\s+\\(.*\\)\" dir/ | tee >(wc -l)\n\n\nThe pattern will match for the generic records, first one matching no-whitespace between generic and record header, while the second one matching atleast a single-whitespace between generic and record header.\nOutput for the cmd on Checkstyle repo: i. 32; ii: 0\nOutput for the cmd on regression repos: i. 60; ii. 0\nSide note: Arguably better way to verify that there are no such cases would be implement changes which detects space between generic and record header as a violation, and then check for differences in the report. (lmk if that is needed)\n"
}