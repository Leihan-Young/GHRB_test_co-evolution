{
  "issue_id": 14801,
  "issue_url": "https://github.com/OpenAPITools/openapi-generator/issues/14801",
  "title": "[BUG][Go] Generator results in missing objects when defining inline anyOf, or oneOf",
  "description": "<h4 dir=\"auto\">Bug Report Checklist</h4>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you provided a full/minimal spec to reproduce the issue?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you validated the input using an OpenAPI validator (<a href=\"https://apidevtools.org/swagger-parser/online/\" rel=\"nofollow\">example</a>)?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you <a href=\"https://github.com/OpenAPITools/openapi-generator/wiki/FAQ#how-to-test-with-the-latest-master-of-openapi-generator\">tested with the latest master</a> to confirm the issue still exists?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you searched for related issues/PRs?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> What's the actual output vs expected output?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> [Optional] Sponsorship to speed up the bug fix or feature request (<a href=\"https://github.com/OpenAPITools/openapi-generator/issues/6178\" data-hovercard-type=\"issue\" data-hovercard-url=\"/OpenAPITools/openapi-generator/issues/6178/hovercard\">example</a>)</li>\n</ul>\n\n<h5 dir=\"auto\">Description</h5>\n\n<p dir=\"auto\">If an inline oneOf or anyOf definition is used below an allOf or oneOf, the generated code will contain the name of the inline defined structure, but the structure itself will not be generated.</p>\n<p dir=\"auto\">If the schema is rearranged to avoid using the inline definition, the missing part is also generated.<br>\nOne possible way to do this is to define the inline oneOf or anyOf at the top level and reference it from below allOf or oneOf.</p>\n<h5 dir=\"auto\">openapi-generator version</h5>\n\n<p dir=\"auto\">6.4.0</p>\n<h5 dir=\"auto\">OpenAPI declaration file content or url</h5>\n\n<h6 dir=\"auto\">oneOf below allOf</h6>\n<p dir=\"auto\"><a href=\"https://gist.github.com/phegyi81/425d2bfe756c1bfa72626d3b1d5a3f03\">Inline version</a><br>\n<a href=\"https://gist.github.com/phegyi81/df500abad365d21caad4a63873c284d3\">Referenced version</a></p>\n<h6 dir=\"auto\">anyOf below oneOf</h6>\n<p dir=\"auto\"><a href=\"https://gist.github.com/phegyi81/07a086f93efce4d0249ae697883fc463\">Inline version</a><br>\n<a href=\"https://gist.github.com/phegyi81/b52a5546116c7b3b49343a6444991672\">Referenced version</a></p>\n<h5 dir=\"auto\">Generation Details</h5>\n\n<p dir=\"auto\">Nothing special is needed beyond the steps specified in the next section. That is, download the 4 samples and compile them with the linked generator. Two of the samples are the wrongly compilable inline version, while two of them are the properly compilable referenced version.</p>\n<h5 dir=\"auto\">Steps to reproduce</h5>\n\n<ul dir=\"auto\">\n<li>Download the gists linked above</li>\n<li>Download the <a href=\"https://gist.github.com/phegyi81/b18f8b5e5eba67cb62d91f196c5209d0\">generator script</a> also</li>\n<li>Run the script <code class=\"notranslate\">generate.sh</code></li>\n<li>Recognise that\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">AnyOfstringstring</code> is missing from <code class=\"notranslate\">go-anyOf-below-oneOf-inline</code> directory, while it is referenced in <code class=\"notranslate\">model_b.go</code></li>\n<li><code class=\"notranslate\">OneOfDE</code> and <code class=\"notranslate\">NullableOneOfDE</code> are missing from <code class=\"notranslate\">go-oneOf-below-allOf-inline</code> directory, while it is referenced in <code class=\"notranslate\">model_a_all_of_attributes.go</code></li>\n<li>The generated openapi.yaml files are not the same by byte, but they cover practically the same structure</li>\n</ul>\n</li>\n</ul>\n<h5 dir=\"auto\">Related issues/PRs</h5>\n\n<p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1164350358\" data-permission-text=\"Title is private\" data-url=\"https://github.com/OpenAPITools/openapi-generator/issues/11842\" data-hovercard-type=\"issue\" data-hovercard-url=\"/OpenAPITools/openapi-generator/issues/11842/hovercard\" href=\"https://github.com/OpenAPITools/openapi-generator/issues/11842\">#11842</a><br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"611814412\" data-permission-text=\"Title is private\" data-url=\"https://github.com/OpenAPITools/openapi-generator/issues/6161\" data-hovercard-type=\"issue\" data-hovercard-url=\"/OpenAPITools/openapi-generator/issues/6161/hovercard\" href=\"https://github.com/OpenAPITools/openapi-generator/issues/6161\">#6161</a></p>\n<h5 dir=\"auto\">Suggest a fix</h5>\n",
  "description_text": "Bug Report Checklist\n\n Have you provided a full/minimal spec to reproduce the issue?\n Have you validated the input using an OpenAPI validator (example)?\n Have you tested with the latest master to confirm the issue still exists?\n Have you searched for related issues/PRs?\n What's the actual output vs expected output?\n [Optional] Sponsorship to speed up the bug fix or feature request (example)\n\nDescription\nIf an inline oneOf or anyOf definition is used below an allOf or oneOf, the generated code will contain the name of the inline defined structure, but the structure itself will not be generated.\nIf the schema is rearranged to avoid using the inline definition, the missing part is also generated.\nOne possible way to do this is to define the inline oneOf or anyOf at the top level and reference it from below allOf or oneOf.\nopenapi-generator version\n6.4.0\nOpenAPI declaration file content or url\noneOf below allOf\nInline version\nReferenced version\nanyOf below oneOf\nInline version\nReferenced version\nGeneration Details\nNothing special is needed beyond the steps specified in the next section. That is, download the 4 samples and compile them with the linked generator. Two of the samples are the wrongly compilable inline version, while two of them are the properly compilable referenced version.\nSteps to reproduce\n\nDownload the gists linked above\nDownload the generator script also\nRun the script generate.sh\nRecognise that\n\nAnyOfstringstring is missing from go-anyOf-below-oneOf-inline directory, while it is referenced in model_b.go\nOneOfDE and NullableOneOfDE are missing from go-oneOf-below-allOf-inline directory, while it is referenced in model_a_all_of_attributes.go\nThe generated openapi.yaml files are not the same by byte, but they cover practically the same structure\n\n\n\nRelated issues/PRs\n#11842\n#6161\nSuggest a fix\n"
}