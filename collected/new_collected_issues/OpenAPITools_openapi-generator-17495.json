{
  "issue_id": 17494,
  "issue_url": "https://github.com/OpenAPITools/openapi-generator/issues/17494",
  "title": "[BUG] [ExampleGenerator] Generated examples from String type with `date` format are in the wrong format (extra T00:00:00.000+00:00)",
  "description": "<h4 dir=\"auto\">Bug Report Checklist</h4>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you provided a full/minimal spec to reproduce the issue?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you validated the input using an OpenAPI validator (<a href=\"https://apidevtools.org/swagger-parser/online/\" rel=\"nofollow\">example</a>)?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you <a href=\"https://github.com/OpenAPITools/openapi-generator/wiki/FAQ#how-to-test-with-the-latest-master-of-openapi-generator\">tested with the latest master</a> to confirm the issue still exists?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you searched for related issues/PRs?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> What's the actual output vs expected output?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> [Optional] Sponsorship to speed up the bug fix or feature request (<a href=\"https://github.com/OpenAPITools/openapi-generator/issues/6178\" data-hovercard-type=\"issue\" data-hovercard-url=\"/OpenAPITools/openapi-generator/issues/6178/hovercard\">example</a>)</li>\n</ul>\n\n<h5 dir=\"auto\">Description</h5>\n<p dir=\"auto\">When providing an example to a type <code class=\"notranslate\">string</code> property with format <code class=\"notranslate\">date</code>, the generated example is in the wrong format.</p>\n<p dir=\"auto\"><strong>Current <em>(undesired)</em> behavior:</strong></p>\n<p dir=\"auto\">Consider the following schema:</p>\n<div class=\"highlight highlight-source-yaml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"components:\n  schemas:\n    DateSchema:\n      type: object\n      properties:\n        date_with_example:\n          type: string\n          format: date\n          example: 2024-01-01\n        date_without_example:\n          type: string\n          format: date\"><pre class=\"notranslate\"><span class=\"pl-ent\">components</span>:\n  <span class=\"pl-ent\">schemas</span>:\n    <span class=\"pl-ent\">DateSchema</span>:\n      <span class=\"pl-ent\">type</span>: <span class=\"pl-s\">object</span>\n      <span class=\"pl-ent\">properties</span>:\n        <span class=\"pl-ent\">date_with_example</span>:\n          <span class=\"pl-ent\">type</span>: <span class=\"pl-s\">string</span>\n          <span class=\"pl-ent\">format</span>: <span class=\"pl-s\">date</span>\n          <span class=\"pl-ent\">example</span>: <span class=\"pl-c1\">2024-01-01</span>\n        <span class=\"pl-ent\">date_without_example</span>:\n          <span class=\"pl-ent\">type</span>: <span class=\"pl-s\">string</span>\n          <span class=\"pl-ent\">format</span>: <span class=\"pl-s\">date</span></pre></div>\n<p dir=\"auto\">I'd expect the generated example to look like:</p>\n<div class=\"highlight highlight-source-json notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"{\n  \"date_with_example\" : \"2024-01-01\",\n  \"date_without_example\" : \"2000-01-23\"\n}\"><pre class=\"notranslate\">{\n  <span class=\"pl-ent\">\"date_with_example\"</span> : <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>2024-01-01<span class=\"pl-pds\">\"</span></span>,\n  <span class=\"pl-ent\">\"date_without_example\"</span> : <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>2000-01-23<span class=\"pl-pds\">\"</span></span>\n}</pre></div>\n<p dir=\"auto\">However, it currently generates the following:</p>\n<div class=\"highlight highlight-source-json notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"{\n  \"date_with_example\" : \"2024-01-01T00:00:00.000+00:00\",\n  \"date_without_example\" : \"2000-01-23\"\n}\"><pre class=\"notranslate\">{\n  <span class=\"pl-ent\">\"date_with_example\"</span> : <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>2024-01-01T00:00:00.000+00:00<span class=\"pl-pds\">\"</span></span>,\n  <span class=\"pl-ent\">\"date_without_example\"</span> : <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>2000-01-23<span class=\"pl-pds\">\"</span></span>\n}</pre></div>\n<p dir=\"auto\"><em>Note: the date without example refers to the current behavior in using a default predetermined value:</em></p>\n<p dir=\"auto\"><a href=\"https://github.com/OpenAPITools/openapi-generator/blob/a5d3fb4f601e4bced19f39cb6d82799a71531282/modules/openapi-generator/src/main/java/org/openapitools/codegen/examples/ExampleGenerator.java#L254C10-L255\">https://github.com/OpenAPITools/openapi-generator/blob/a5d3fb4f601e4bced19f39cb6d82799a71531282/modules/openapi-generator/src/main/java/org/openapitools/codegen/examples/ExampleGenerator.java#L254C10-L255</a></p>\n<p dir=\"auto\"><strong>Why is this behavior happening?</strong></p>\n<p dir=\"auto\">This issue is happening because how swagger-core is handling <code class=\"notranslate\">DateSchema</code> classes.</p>\n<p dir=\"auto\">As you can see, this PR tried to solve the issue directely in swagger-core: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1049923235\" data-permission-text=\"Title is private\" data-url=\"https://github.com/swagger-api/swagger-core/issues/4046\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/swagger-api/swagger-core/pull/4046/hovercard\" href=\"https://github.com/swagger-api/swagger-core/pull/4046\">swagger-api/swagger-core#4046</a></p>\n<p dir=\"auto\">So what's happening is that the model for a date format resolves to a <code class=\"notranslate\">DateSchema</code> which gets parsed as a <code class=\"notranslate\">java.util.Date</code> and gets printed using it's <code class=\"notranslate\">toString()</code> method.</p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/22034450/293405384-ceef7059-b90f-4e16-91bb-7e07a90c328a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwODM0ODMsIm5iZiI6MTcxMjA4MzE4MywicGF0aCI6Ii8yMjAzNDQ1MC8yOTM0MDUzODQtY2VlZjcwNTktYjkwZi00ZTE2LTkxYmItN2UwN2E5MGMzMjhhLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDE4Mzk0M1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWM4ODhjMDNkZTlhN2NmY2M2YzhlZDE4MWNmMzFkNWQ5YzFkMDE0NGM3MzIwNGZhNjQ3ZjVlZmY0NjE1Y2U3OTgmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.BF13joIDF_HPKws4GMGaK4AMGefIle3CG2jYo2GZeN4\"><img src=\"https://private-user-images.githubusercontent.com/22034450/293405384-ceef7059-b90f-4e16-91bb-7e07a90c328a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwODM0ODMsIm5iZiI6MTcxMjA4MzE4MywicGF0aCI6Ii8yMjAzNDQ1MC8yOTM0MDUzODQtY2VlZjcwNTktYjkwZi00ZTE2LTkxYmItN2UwN2E5MGMzMjhhLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDE4Mzk0M1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWM4ODhjMDNkZTlhN2NmY2M2YzhlZDE4MWNmMzFkNWQ5YzFkMDE0NGM3MzIwNGZhNjQ3ZjVlZmY0NjE1Y2U3OTgmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.BF13joIDF_HPKws4GMGaK4AMGefIle3CG2jYo2GZeN4\" alt=\"image\" style=\"max-width: 100%;\"></a></p>\n<h5 dir=\"auto\">openapi-generator version</h5>\n<p dir=\"auto\">master <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/OpenAPITools/openapi-generator/commit/a5d3fb4f601e4bced19f39cb6d82799a71531282/hovercard\" href=\"https://github.com/OpenAPITools/openapi-generator/commit/a5d3fb4f601e4bced19f39cb6d82799a71531282\"><tt>a5d3fb4</tt></a></p>\n<h5 dir=\"auto\">OpenAPI declaration file content or url</h5>\n<div class=\"highlight highlight-source-yaml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"openapi: 3.0.2\ninfo:\n  version: 1.0.0\n  title: OpenAPI Petstore\n  license:\n    name: Apache-2.0\npaths:\n  /generate_from_response_schema_with_date_format:\n    get:\n      operationId: generateFromResponseSchemaWithDateFormat\n      responses:\n        '200':\n          description: successful operation\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/DateSchema'\ncomponents:\n  schemas:\n    DateSchema:\n      type: object\n      properties:\n        date_with_example:\n          type: string\n          format: date\n          example: 2024-01-01\n        date_without_example:\n          type: string\n          format: date\"><pre class=\"notranslate\"><span class=\"pl-ent\">openapi</span>: <span class=\"pl-s\">3.0.2</span>\n<span class=\"pl-ent\">info</span>:\n  <span class=\"pl-ent\">version</span>: <span class=\"pl-s\">1.0.0</span>\n  <span class=\"pl-ent\">title</span>: <span class=\"pl-s\">OpenAPI Petstore</span>\n  <span class=\"pl-ent\">license</span>:\n    <span class=\"pl-ent\">name</span>: <span class=\"pl-s\">Apache-2.0</span>\n<span class=\"pl-ent\">paths</span>:\n  <span class=\"pl-ent\">/generate_from_response_schema_with_date_format</span>:\n    <span class=\"pl-ent\">get</span>:\n      <span class=\"pl-ent\">operationId</span>: <span class=\"pl-s\">generateFromResponseSchemaWithDateFormat</span>\n      <span class=\"pl-ent\">responses</span>:\n        <span class=\"pl-s\"><span class=\"pl-pds\">'</span><span class=\"pl-ent\">200</span><span class=\"pl-pds\">'</span></span>:\n          <span class=\"pl-ent\">description</span>: <span class=\"pl-s\">successful operation</span>\n          <span class=\"pl-ent\">content</span>:\n            <span class=\"pl-ent\">application/json</span>:\n              <span class=\"pl-ent\">schema</span>:\n                <span class=\"pl-ent\">$ref</span>: <span class=\"pl-s\"><span class=\"pl-pds\">'</span>#/components/schemas/DateSchema<span class=\"pl-pds\">'</span></span>\n<span class=\"pl-ent\">components</span>:\n  <span class=\"pl-ent\">schemas</span>:\n    <span class=\"pl-ent\">DateSchema</span>:\n      <span class=\"pl-ent\">type</span>: <span class=\"pl-s\">object</span>\n      <span class=\"pl-ent\">properties</span>:\n        <span class=\"pl-ent\">date_with_example</span>:\n          <span class=\"pl-ent\">type</span>: <span class=\"pl-s\">string</span>\n          <span class=\"pl-ent\">format</span>: <span class=\"pl-s\">date</span>\n          <span class=\"pl-ent\">example</span>: <span class=\"pl-c1\">2024-01-01</span>\n        <span class=\"pl-ent\">date_without_example</span>:\n          <span class=\"pl-ent\">type</span>: <span class=\"pl-s\">string</span>\n          <span class=\"pl-ent\">format</span>: <span class=\"pl-s\">date</span></pre></div>\n<h5 dir=\"auto\">Generation Details</h5>\n<p dir=\"auto\">Running <code class=\"notranslate\">ExampleGeneratorTest.java</code></p>\n<h5 dir=\"auto\">Steps to reproduce</h5>\n<p dir=\"auto\">Apply the following patch which adds the test case for example generation on date format.</p>\n<div class=\"highlight highlight-source-diff notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Subject: [PATCH] Add failing test case to ExampleGenerator for date format\n---\nIndex: modules/openapi-generator/src/test/resources/3_0/example_generator_test.yaml\nIDEA additional info:\nSubsystem: com.intellij.openapi.diff.impl.patch.CharsetEP\n<+>UTF-8\n===================================================================\ndiff --git a/modules/openapi-generator/src/test/resources/3_0/example_generator_test.yaml b/modules/openapi-generator/src/test/resources/3_0/example_generator_test.yaml\n--- a/modules/openapi-generator/src/test/resources/3_0/example_generator_test.yaml\t(revision a5d3fb4f601e4bced19f39cb6d82799a71531282)\n+++ b/modules/openapi-generator/src/test/resources/3_0/example_generator_test.yaml\t(date 1703871594752)\n@@ -26,6 +26,16 @@\n               schema:\n                 type: string\n                 example: primitive type example value\n+  /generate_from_response_schema_with_date_format:\n+    get:\n+      operationId: generateFromResponseSchemaWithDateFormat\n+      responses:\n+        '200':\n+          description: successful operation\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/DateSchema'\n   /generate_from_response_schema_with_array_of_model:\n     get:\n       operationId: generateFromResponseSchemaWithArrayOfModel\n@@ -63,6 +73,16 @@\n                 $ref: '#/components/schemas/ExampleSchema'\n components:\n   schemas:\n+    DateSchema:\n+      type: object\n+      properties:\n+        date_with_example:\n+          type: string\n+          format: date\n+          example: 2024-01-01\n+        date_without_example:\n+          type: string\n+          format: date\n     StringSchema:\n       type: string\n       example: string schema example value\nIndex: modules/openapi-generator/src/test/java/org/openapitools/codegen/ExampleGeneratorTest.java\nIDEA additional info:\nSubsystem: com.intellij.openapi.diff.impl.patch.CharsetEP\n<+>UTF-8\n===================================================================\ndiff --git a/modules/openapi-generator/src/test/java/org/openapitools/codegen/ExampleGeneratorTest.java b/modules/openapi-generator/src/test/java/org/openapitools/codegen/ExampleGeneratorTest.java\n--- a/modules/openapi-generator/src/test/java/org/openapitools/codegen/ExampleGeneratorTest.java\t(revision a5d3fb4f601e4bced19f39cb6d82799a71531282)\n+++ b/modules/openapi-generator/src/test/java/org/openapitools/codegen/ExampleGeneratorTest.java\t(date 1703871597569)\n@@ -39,6 +39,35 @@\n         assertEquals(\"200\", examples.get(0).get(\"statusCode\"));\n     }\n \n+    @Test\n+    public void generateFromResponseSchemaWithDateFormat() {\n+        OpenAPI openAPI = TestUtils.parseFlattenSpec(\"src/test/resources/3_0/example_generator_test.yaml\");\n+\n+        new InlineModelResolver().flatten(openAPI);\n+\n+        ExampleGenerator exampleGenerator = new ExampleGenerator(openAPI.getComponents().getSchemas(), openAPI);\n+        Set<String> mediaTypeKeys = new TreeSet<>();\n+        mediaTypeKeys.add(\"application/json\");\n+        List<Map<String, String>> examples = exampleGenerator.generateFromResponseSchema(\n+                \"200\",\n+                openAPI\n+                        .getPaths()\n+                        .get(\"/generate_from_response_schema_with_date_format\")\n+                        .getGet()\n+                        .getResponses()\n+                        .get(\"200\")\n+                        .getContent()\n+                        .get(\"application/json\")\n+                        .getSchema(),\n+                mediaTypeKeys\n+        );\n+\n+        assertEquals(1, examples.size());\n+        assertEquals(\"application/json\", examples.get(0).get(\"contentType\"));\n+        assertEquals(String.format(Locale.ROOT, \"{%n  \\\"date_with_example\\\" : \\\"2024-01-01\\\",%n  \\\"date_without_example\\\" : \\\"2000-01-23\\\"%n}\"), examples.get(0).get(\"example\"));\n+        assertEquals(\"200\", examples.get(0).get(\"statusCode\"));\n+    }\n+\n     @Test\n     public void generateFromResponseSchemaWithNoExample() {\n         OpenAPI openAPI = TestUtils.parseFlattenSpec(\"src/test/resources/3_0/example_generator_test.yaml\");\n\"><pre class=\"notranslate\">Subject: [PATCH] Add failing test case to ExampleGenerator for date format\n<span class=\"pl-ms\">---</span>\nIndex: modules/openapi-generator/src/test/resources/3_0/example_generator_test.yaml\nIDEA additional info:\nSubsystem: com.intellij.openapi.diff.impl.patch.CharsetEP\n<+>UTF-8\n<span class=\"pl-ms\">===================================================================</span>\n<span class=\"pl-c1\">diff --git a/modules/openapi-generator/src/test/resources/3_0/example_generator_test.yaml b/modules/openapi-generator/src/test/resources/3_0/example_generator_test.yaml</span>\n<span class=\"pl-md\">--- a/modules/openapi-generator/src/test/resources/3_0/example_generator_test.yaml\t(revision a5d3fb4f601e4bced19f39cb6d82799a71531282)</span>\n<span class=\"pl-mi1\">+++ b/modules/openapi-generator/src/test/resources/3_0/example_generator_test.yaml\t(date 1703871594752)</span>\n<span class=\"pl-mdr\">@@ -26,6 +26,16 @@</span>\n               schema:\n                 type: string\n                 example: primitive type example value\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>  /generate_from_response_schema_with_date_format:</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>    get:</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>      operationId: generateFromResponseSchemaWithDateFormat</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>      responses:</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        '200':</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>          description: successful operation</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>          content:</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>            application/json:</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>              schema:</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>                $ref: '#/components/schemas/DateSchema'</span>\n   /generate_from_response_schema_with_array_of_model:\n     get:\n       operationId: generateFromResponseSchemaWithArrayOfModel\n<span class=\"pl-mdr\">@@ -63,6 +73,16 @@</span>\n                 $ref: '#/components/schemas/ExampleSchema'\n components:\n   schemas:\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>    DateSchema:</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>      type: object</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>      properties:</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        date_with_example:</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>          type: string</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>          format: date</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>          example: 2024-01-01</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        date_without_example:</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>          type: string</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>          format: date</span>\n     StringSchema:\n       type: string\n       example: string schema example value\nIndex: modules/openapi-generator/src/test/java/org/openapitools/codegen/ExampleGeneratorTest.java\nIDEA additional info:\nSubsystem: com.intellij.openapi.diff.impl.patch.CharsetEP\n<+>UTF-8\n<span class=\"pl-ms\">===================================================================</span>\n<span class=\"pl-c1\">diff --git a/modules/openapi-generator/src/test/java/org/openapitools/codegen/ExampleGeneratorTest.java b/modules/openapi-generator/src/test/java/org/openapitools/codegen/ExampleGeneratorTest.java</span>\n<span class=\"pl-md\">--- a/modules/openapi-generator/src/test/java/org/openapitools/codegen/ExampleGeneratorTest.java\t(revision a5d3fb4f601e4bced19f39cb6d82799a71531282)</span>\n<span class=\"pl-mi1\">+++ b/modules/openapi-generator/src/test/java/org/openapitools/codegen/ExampleGeneratorTest.java\t(date 1703871597569)</span>\n<span class=\"pl-mdr\">@@ -39,6 +39,35 @@</span>\n         assertEquals(\"200\", examples.get(0).get(\"statusCode\"));\n     }\n \n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>    @Test</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>    public void generateFromResponseSchemaWithDateFormat() {</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        OpenAPI openAPI = TestUtils.parseFlattenSpec(\"src/test/resources/3_0/example_generator_test.yaml\");</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span></span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        new InlineModelResolver().flatten(openAPI);</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span></span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        ExampleGenerator exampleGenerator = new ExampleGenerator(openAPI.getComponents().getSchemas(), openAPI);</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        Set<String> mediaTypeKeys = new TreeSet<>();</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        mediaTypeKeys.add(\"application/json\");</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        List<Map<String, String>> examples = exampleGenerator.generateFromResponseSchema(</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>                \"200\",</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>                openAPI</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>                        .getPaths()</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>                        .get(\"/generate_from_response_schema_with_date_format\")</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>                        .getGet()</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>                        .getResponses()</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>                        .get(\"200\")</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>                        .getContent()</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>                        .get(\"application/json\")</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>                        .getSchema(),</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>                mediaTypeKeys</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        );</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span></span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        assertEquals(1, examples.size());</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        assertEquals(\"application/json\", examples.get(0).get(\"contentType\"));</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        assertEquals(String.format(Locale.ROOT, \"{%n  \\\"date_with_example\\\" : \\\"2024-01-01\\\",%n  \\\"date_without_example\\\" : \\\"2000-01-23\\\"%n}\"), examples.get(0).get(\"example\"));</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>        assertEquals(\"200\", examples.get(0).get(\"statusCode\"));</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span>    }</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span></span>\n     @Test\n     public void generateFromResponseSchemaWithNoExample() {\n         OpenAPI openAPI = TestUtils.parseFlattenSpec(\"src/test/resources/3_0/example_generator_test.yaml\");\n</pre></div>\n<h5 dir=\"auto\">Related issues/PRs</h5>\n<p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1049923235\" data-permission-text=\"Title is private\" data-url=\"https://github.com/swagger-api/swagger-core/issues/4046\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/swagger-api/swagger-core/pull/4046/hovercard\" href=\"https://github.com/swagger-api/swagger-core/pull/4046\">swagger-api/swagger-core#4046</a><br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1688118484\" data-permission-text=\"Title is private\" data-url=\"https://github.com/OpenAPITools/openapi-generator/issues/15342\" data-hovercard-type=\"issue\" data-hovercard-url=\"/OpenAPITools/openapi-generator/issues/15342/hovercard\" href=\"https://github.com/OpenAPITools/openapi-generator/issues/15342\">#15342</a></p>",
  "description_text": "Bug Report Checklist\n\n Have you provided a full/minimal spec to reproduce the issue?\n Have you validated the input using an OpenAPI validator (example)?\n Have you tested with the latest master to confirm the issue still exists?\n Have you searched for related issues/PRs?\n What's the actual output vs expected output?\n [Optional] Sponsorship to speed up the bug fix or feature request (example)\n\nDescription\nWhen providing an example to a type string property with format date, the generated example is in the wrong format.\nCurrent (undesired) behavior:\nConsider the following schema:\ncomponents:\n  schemas:\n    DateSchema:\n      type: object\n      properties:\n        date_with_example:\n          type: string\n          format: date\n          example: 2024-01-01\n        date_without_example:\n          type: string\n          format: date\nI'd expect the generated example to look like:\n{\n  \"date_with_example\" : \"2024-01-01\",\n  \"date_without_example\" : \"2000-01-23\"\n}\nHowever, it currently generates the following:\n{\n  \"date_with_example\" : \"2024-01-01T00:00:00.000+00:00\",\n  \"date_without_example\" : \"2000-01-23\"\n}\nNote: the date without example refers to the current behavior in using a default predetermined value:\nhttps://github.com/OpenAPITools/openapi-generator/blob/a5d3fb4f601e4bced19f39cb6d82799a71531282/modules/openapi-generator/src/main/java/org/openapitools/codegen/examples/ExampleGenerator.java#L254C10-L255\nWhy is this behavior happening?\nThis issue is happening because how swagger-core is handling DateSchema classes.\nAs you can see, this PR tried to solve the issue directely in swagger-core: swagger-api/swagger-core#4046\nSo what's happening is that the model for a date format resolves to a DateSchema which gets parsed as a java.util.Date and gets printed using it's toString() method.\n\nopenapi-generator version\nmaster a5d3fb4\nOpenAPI declaration file content or url\nopenapi: 3.0.2\ninfo:\n  version: 1.0.0\n  title: OpenAPI Petstore\n  license:\n    name: Apache-2.0\npaths:\n  /generate_from_response_schema_with_date_format:\n    get:\n      operationId: generateFromResponseSchemaWithDateFormat\n      responses:\n        '200':\n          description: successful operation\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/DateSchema'\ncomponents:\n  schemas:\n    DateSchema:\n      type: object\n      properties:\n        date_with_example:\n          type: string\n          format: date\n          example: 2024-01-01\n        date_without_example:\n          type: string\n          format: date\nGeneration Details\nRunning ExampleGeneratorTest.java\nSteps to reproduce\nApply the following patch which adds the test case for example generation on date format.\n mediaTypeKeys = new TreeSet<>();\n+        mediaTypeKeys.add(\"application/json\");\n+        List> examples = exampleGenerator.generateFromResponseSchema(\n+                \"200\",\n+                openAPI\n+                        .getPaths()\n+                        .get(\"/generate_from_response_schema_with_date_format\")\n+                        .getGet()\n+                        .getResponses()\n+                        .get(\"200\")\n+                        .getContent()\n+                        .get(\"application/json\")\n+                        .getSchema(),\n+                mediaTypeKeys\n+        );\n+\n+        assertEquals(1, examples.size());\n+        assertEquals(\"application/json\", examples.get(0).get(\"contentType\"));\n+        assertEquals(String.format(Locale.ROOT, \"{%n  \\\"date_with_example\\\" : \\\"2024-01-01\\\",%n  \\\"date_without_example\\\" : \\\"2000-01-23\\\"%n}\"), examples.get(0).get(\"example\"));\n+        assertEquals(\"200\", examples.get(0).get(\"statusCode\"));\n+    }\n+\n     @Test\n     public void generateFromResponseSchemaWithNoExample() {\n         OpenAPI openAPI = TestUtils.parseFlattenSpec(\"src/test/resources/3_0/example_generator_test.yaml\");\n\">Subject: [PATCH] Add failing test case to ExampleGenerator for date format\n---\nIndex: modules/openapi-generator/src/test/resources/3_0/example_generator_test.yaml\nIDEA additional info:\nSubsystem: com.intellij.openapi.diff.impl.patch.CharsetEP\n<+>UTF-8\n===================================================================\ndiff --git a/modules/openapi-generator/src/test/resources/3_0/example_generator_test.yaml b/modules/openapi-generator/src/test/resources/3_0/example_generator_test.yaml\n--- a/modules/openapi-generator/src/test/resources/3_0/example_generator_test.yaml\t(revision a5d3fb4f601e4bced19f39cb6d82799a71531282)\n+++ b/modules/openapi-generator/src/test/resources/3_0/example_generator_test.yaml\t(date 1703871594752)\n@@ -26,6 +26,16 @@\n               schema:\n                 type: string\n                 example: primitive type example value\n+  /generate_from_response_schema_with_date_format:\n+    get:\n+      operationId: generateFromResponseSchemaWithDateFormat\n+      responses:\n+        '200':\n+          description: successful operation\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/DateSchema'\n   /generate_from_response_schema_with_array_of_model:\n     get:\n       operationId: generateFromResponseSchemaWithArrayOfModel\n@@ -63,6 +73,16 @@\n                 $ref: '#/components/schemas/ExampleSchema'\n components:\n   schemas:\n+    DateSchema:\n+      type: object\n+      properties:\n+        date_with_example:\n+          type: string\n+          format: date\n+          example: 2024-01-01\n+        date_without_example:\n+          type: string\n+          format: date\n     StringSchema:\n       type: string\n       example: string schema example value\nIndex: modules/openapi-generator/src/test/java/org/openapitools/codegen/ExampleGeneratorTest.java\nIDEA additional info:\nSubsystem: com.intellij.openapi.diff.impl.patch.CharsetEP\n<+>UTF-8\n===================================================================\ndiff --git a/modules/openapi-generator/src/test/java/org/openapitools/codegen/ExampleGeneratorTest.java b/modules/openapi-generator/src/test/java/org/openapitools/codegen/ExampleGeneratorTest.java\n--- a/modules/openapi-generator/src/test/java/org/openapitools/codegen/ExampleGeneratorTest.java\t(revision a5d3fb4f601e4bced19f39cb6d82799a71531282)\n+++ b/modules/openapi-generator/src/test/java/org/openapitools/codegen/ExampleGeneratorTest.java\t(date 1703871597569)\n@@ -39,6 +39,35 @@\n         assertEquals(\"200\", examples.get(0).get(\"statusCode\"));\n     }\n \n+    @Test\n+    public void generateFromResponseSchemaWithDateFormat() {\n+        OpenAPI openAPI = TestUtils.parseFlattenSpec(\"src/test/resources/3_0/example_generator_test.yaml\");\n+\n+        new InlineModelResolver().flatten(openAPI);\n+\n+        ExampleGenerator exampleGenerator = new ExampleGenerator(openAPI.getComponents().getSchemas(), openAPI);\n+        Set mediaTypeKeys = new TreeSet<>();\n+        mediaTypeKeys.add(\"application/json\");\n+        List> examples = exampleGenerator.generateFromResponseSchema(\n+                \"200\",\n+                openAPI\n+                        .getPaths()\n+                        .get(\"/generate_from_response_schema_with_date_format\")\n+                        .getGet()\n+                        .getResponses()\n+                        .get(\"200\")\n+                        .getContent()\n+                        .get(\"application/json\")\n+                        .getSchema(),\n+                mediaTypeKeys\n+        );\n+\n+        assertEquals(1, examples.size());\n+        assertEquals(\"application/json\", examples.get(0).get(\"contentType\"));\n+        assertEquals(String.format(Locale.ROOT, \"{%n  \\\"date_with_example\\\" : \\\"2024-01-01\\\",%n  \\\"date_without_example\\\" : \\\"2000-01-23\\\"%n}\"), examples.get(0).get(\"example\"));\n+        assertEquals(\"200\", examples.get(0).get(\"statusCode\"));\n+    }\n+\n     @Test\n     public void generateFromResponseSchemaWithNoExample() {\n         OpenAPI openAPI = TestUtils.parseFlattenSpec(\"src/test/resources/3_0/example_generator_test.yaml\");\n\nRelated issues/PRs\nswagger-api/swagger-core#4046\n#15342"
}