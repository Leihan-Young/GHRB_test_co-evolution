{
  "issue_id": 13830,
  "issue_url": "https://github.com/checkstyle/checkstyle/issues/13830",
  "title": "Support Java 21 string template syntax",
  "description": "<p dir=\"auto\">I have executed the cli and showed it below, as cli describes the problem better than 1,000 words</p>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"\u276f javac --enable-preview --release 21 src/main/java/HelloWorld.java\nNote: src/main/java/HelloWorld.java uses preview features of Java SE 21.\nNote: Recompile with -Xlint:preview for details.\n\n/var/tmp $ cat config.xml\n<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\" \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n<module name=\"Checker\">\n\n    <module name=\"NewlineAtEndOfFile\">\n        <property name=\"lineSeparator\" value=\"lf\"/>\n    </module>\n\n    <module name=\"TreeWalker\">\n        <module name=\"UnusedImports\"/>\n    </module>\n</module>\n\n\n/var/tmp $ cat YOUR_FILE.java\npublic class HelloWorld {\n    public static void main(String[] args) {\n        int x = 10;\n        int y = 20;\n        String result = STR.\"\\{x} + \\{y} = \\{x + y}\";\n        System.out.println(result);\n    }\n}\n\n/var/tmp $ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\n/var/tmp $ java $RUN_LOCALE -jar checkstyle-X.XX-all.jar -c config.xml YOUR_FILE.java\n> java $RUN_LOCALE -jar checkstyle-10.12.4-all.jar -c checkstyle.xml src/main/java/HelloWorld.java \n\nStarting audit...\ncom.puppycrawl.tools.checkstyle.api.CheckstyleException: Exception was thrown while processing src/main/java/HelloWorld.java\n        at com.puppycrawl.tools.checkstyle.Checker.processFiles(Checker.java:309)\n        at com.puppycrawl.tools.checkstyle.Checker.process(Checker.java:226)\n        at com.puppycrawl.tools.checkstyle.Main.runCheckstyle(Main.java:415)\n        at com.puppycrawl.tools.checkstyle.Main.runCli(Main.java:338)\n        at com.puppycrawl.tools.checkstyle.Main.execute(Main.java:195)\n        at com.puppycrawl.tools.checkstyle.Main.main(Main.java:130)\nCaused by: com.puppycrawl.tools.checkstyle.api.CheckstyleException: IllegalStateException occurred while parsing file /home/xxx/VCS/own/checkstyle-java21-reproducer/src/main/java/HelloWorld.java.\n        at com.puppycrawl.tools.checkstyle.JavaParser.parse(JavaParser.java:105)\n        at com.puppycrawl.tools.checkstyle.TreeWalker.processFiltered(TreeWalker.java:152)\n        at com.puppycrawl.tools.checkstyle.api.AbstractFileSetCheck.process(AbstractFileSetCheck.java:101)\n        at com.puppycrawl.tools.checkstyle.Checker.processFile(Checker.java:337)\n        at com.puppycrawl.tools.checkstyle.Checker.processFiles(Checker.java:296)\n        ... 5 more\nCaused by: java.lang.IllegalStateException: 6:32: mismatched input '}' expecting ';'\n        at com.puppycrawl.tools.checkstyle.JavaParser$CheckstyleErrorListener.syntaxError(JavaParser.java:255)\n        at org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41)\n        at org.antlr.v4.runtime.Parser.notifyErrorListeners(Parser.java:544)\n        at org.antlr.v4.runtime.DefaultErrorStrategy.reportInputMismatch(DefaultErrorStrategy.java:327)\n        at org.antlr.v4.runtime.DefaultErrorStrategy.reportError(DefaultErrorStrategy.java:139)\n        at com.puppycrawl.tools.checkstyle.CheckstyleParserErrorStrategy.recoverInline(CheckstyleParserErrorStrategy.java:38)\n        at org.antlr.v4.runtime.Parser.match(Parser.java:208)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.blockStatement(JavaLanguageParser.java:6190)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.block(JavaLanguageParser.java:6101)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.methodBody(JavaLanguageParser.java:2940)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.methodDeclaration(JavaLanguageParser.java:2898)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.memberDeclaration(JavaLanguageParser.java:2745)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.classBodyDeclaration(JavaLanguageParser.java:2671)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.classBody(JavaLanguageParser.java:2477)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.classDeclaration(JavaLanguageParser.java:1096)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.types(JavaLanguageParser.java:753)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.typeDeclaration(JavaLanguageParser.java:667)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.compilationUnit(JavaLanguageParser.java:414)\n        at com.puppycrawl.tools.checkstyle.JavaParser.parse(JavaParser.java:99)\n        ... 9 more\nCaused by: org.antlr.v4.runtime.InputMismatchException\n        ... 23 more\nCheckstyle ends with 1 errors.\n\"><pre class=\"notranslate\">\u276f javac --enable-preview --release 21 src/main/java/HelloWorld.java\nNote: src/main/java/HelloWorld.java uses preview features of Java SE 21.\nNote: Recompile with -Xlint:preview <span class=\"pl-k\">for</span> details.\n\n/var/tmp $ cat config.xml\n<span class=\"pl-k\"><</span><span class=\"pl-k\">?</span>xml version=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>1.0<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">?</span><span class=\"pl-k\">></span>\n<span class=\"pl-k\"><</span><span class=\"pl-k\">!</span>DOCTYPE module PUBLIC <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-//Checkstyle//DTD Checkstyle Configuration 1.3//EN<span class=\"pl-pds\">\"</span></span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>https://checkstyle.org/dtds/configuration_1_3.dtd<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n<span class=\"pl-k\"><</span>module name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Checker<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n\n    <span class=\"pl-k\"><</span>module name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>NewlineAtEndOfFile<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n        <span class=\"pl-k\"><</span>property name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>lineSeparator<span class=\"pl-pds\">\"</span></span> value=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>lf<span class=\"pl-pds\">\"</span></span>/<span class=\"pl-k\">></span>\n    <span class=\"pl-k\"><</span>/module<span class=\"pl-k\">></span>\n\n    <span class=\"pl-k\"><</span>module name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>TreeWalker<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n        <span class=\"pl-k\"><</span>module name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>UnusedImports<span class=\"pl-pds\">\"</span></span>/<span class=\"pl-k\">></span>\n    <span class=\"pl-k\"><</span>/module<span class=\"pl-k\">></span>\n<span class=\"pl-k\"><</span>/module<span class=\"pl-k\">></span>\n\n\n/var/tmp $ cat YOUR_FILE.java\npublic class HelloWorld {\n    public static void main(String[] args) {\n        int x = 10<span class=\"pl-k\">;</span>\n        int y = 20<span class=\"pl-k\">;</span>\n        String result = STR.<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>\\{x} + \\{y} = \\{x + y}<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">;</span>\n        System.out.println(result)<span class=\"pl-k\">;</span>\n    }\n}\n\n/var/tmp $ RUN_LOCALE=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-Duser.language=en -Duser.country=US<span class=\"pl-pds\">\"</span></span>\n/var/tmp $ java <span class=\"pl-smi\">$RUN_LOCALE</span> -jar checkstyle-X.XX-all.jar -c config.xml YOUR_FILE.java\n<span class=\"pl-k\">></span> java <span class=\"pl-smi\">$RUN_LOCALE</span> -jar checkstyle-10.12.4-all.jar -c checkstyle.xml src/main/java/HelloWorld.java \n\nStarting audit...\ncom.puppycrawl.tools.checkstyle.api.CheckstyleException: Exception was thrown <span class=\"pl-k\">while</span> processing src/main/java/HelloWorld.java\n        at com.puppycrawl.tools.checkstyle.Checker.processFiles(Checker.java:309)\n        at com.puppycrawl.tools.checkstyle.Checker.process(Checker.java:226)\n        at com.puppycrawl.tools.checkstyle.Main.runCheckstyle(Main.java:415)\n        at com.puppycrawl.tools.checkstyle.Main.runCli(Main.java:338)\n        at com.puppycrawl.tools.checkstyle.Main.execute(Main.java:195)\n        at com.puppycrawl.tools.checkstyle.Main.main(Main.java:130)\nCaused by: com.puppycrawl.tools.checkstyle.api.CheckstyleException: IllegalStateException occurred <span class=\"pl-k\">while</span> parsing file /home/xxx/VCS/own/checkstyle-java21-reproducer/src/main/java/HelloWorld.java.\n        at com.puppycrawl.tools.checkstyle.JavaParser.parse(JavaParser.java:105)\n        at com.puppycrawl.tools.checkstyle.TreeWalker.processFiltered(TreeWalker.java:152)\n        at com.puppycrawl.tools.checkstyle.api.AbstractFileSetCheck.process(AbstractFileSetCheck.java:101)\n        at com.puppycrawl.tools.checkstyle.Checker.processFile(Checker.java:337)\n        at com.puppycrawl.tools.checkstyle.Checker.processFiles(Checker.java:296)\n        ... 5 more\nCaused by: java.lang.IllegalStateException: 6:32: mismatched input <span class=\"pl-s\"><span class=\"pl-pds\">'</span>}<span class=\"pl-pds\">'</span></span> expecting <span class=\"pl-s\"><span class=\"pl-pds\">'</span>;<span class=\"pl-pds\">'</span></span>\n        at com.puppycrawl.tools.checkstyle.JavaParser<span class=\"pl-smi\">$CheckstyleErrorListener</span>.syntaxError(JavaParser.java:255)\n        at org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41)\n        at org.antlr.v4.runtime.Parser.notifyErrorListeners(Parser.java:544)\n        at org.antlr.v4.runtime.DefaultErrorStrategy.reportInputMismatch(DefaultErrorStrategy.java:327)\n        at org.antlr.v4.runtime.DefaultErrorStrategy.reportError(DefaultErrorStrategy.java:139)\n        at com.puppycrawl.tools.checkstyle.CheckstyleParserErrorStrategy.recoverInline(CheckstyleParserErrorStrategy.java:38)\n        at org.antlr.v4.runtime.Parser.match(Parser.java:208)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.blockStatement(JavaLanguageParser.java:6190)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.block(JavaLanguageParser.java:6101)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.methodBody(JavaLanguageParser.java:2940)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.methodDeclaration(JavaLanguageParser.java:2898)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.memberDeclaration(JavaLanguageParser.java:2745)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.classBodyDeclaration(JavaLanguageParser.java:2671)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.classBody(JavaLanguageParser.java:2477)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.classDeclaration(JavaLanguageParser.java:1096)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.types(JavaLanguageParser.java:753)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.typeDeclaration(JavaLanguageParser.java:667)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.compilationUnit(JavaLanguageParser.java:414)\n        at com.puppycrawl.tools.checkstyle.JavaParser.parse(JavaParser.java:99)\n        ... 9 more\nCaused by: org.antlr.v4.runtime.InputMismatchException\n        ... 23 more\nCheckstyle ends with 1 errors.\n</pre></div>\n<p dir=\"auto\">in place of the last 2 commands above.</p>\n<hr>\n<p dir=\"auto\">Java 21 is out, and it has the new <a href=\"https://openjdk.org/jeps/430\" rel=\"nofollow\">String Templates</a> as a preview feature. I did not really go deeper but if the configuration is having <strong>TreeWalker</strong> module, with at least one entry, then the build fails with the above-mentioned error, and if it happens inside a Maven build it just fails. It fails at the following line: <code class=\"notranslate\">String result = STR.\"\\{x} + \\{y} = \\{x + y}\";</code></p>\n<p dir=\"auto\">If the TreeWalker is not present or empty, it finishes successfuly. Will the Java 21 based preview features be supported in upcoming releases?</p>\n<hr>",
  "description_text": "I have executed the cli and showed it below, as cli describes the problem better than 1,000 words\n\n\n\n\n\n\n\n\n\n\n\n\n/var/tmp $ cat YOUR_FILE.java\npublic class HelloWorld {\n    public static void main(String[] args) {\n        int x = 10;\n        int y = 20;\n        String result = STR.\"\\{x} + \\{y} = \\{x + y}\";\n        System.out.println(result);\n    }\n}\n\n/var/tmp $ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\n/var/tmp $ java $RUN_LOCALE -jar checkstyle-X.XX-all.jar -c config.xml YOUR_FILE.java\n> java $RUN_LOCALE -jar checkstyle-10.12.4-all.jar -c checkstyle.xml src/main/java/HelloWorld.java \n\nStarting audit...\ncom.puppycrawl.tools.checkstyle.api.CheckstyleException: Exception was thrown while processing src/main/java/HelloWorld.java\n        at com.puppycrawl.tools.checkstyle.Checker.processFiles(Checker.java:309)\n        at com.puppycrawl.tools.checkstyle.Checker.process(Checker.java:226)\n        at com.puppycrawl.tools.checkstyle.Main.runCheckstyle(Main.java:415)\n        at com.puppycrawl.tools.checkstyle.Main.runCli(Main.java:338)\n        at com.puppycrawl.tools.checkstyle.Main.execute(Main.java:195)\n        at com.puppycrawl.tools.checkstyle.Main.main(Main.java:130)\nCaused by: com.puppycrawl.tools.checkstyle.api.CheckstyleException: IllegalStateException occurred while parsing file /home/xxx/VCS/own/checkstyle-java21-reproducer/src/main/java/HelloWorld.java.\n        at com.puppycrawl.tools.checkstyle.JavaParser.parse(JavaParser.java:105)\n        at com.puppycrawl.tools.checkstyle.TreeWalker.processFiltered(TreeWalker.java:152)\n        at com.puppycrawl.tools.checkstyle.api.AbstractFileSetCheck.process(AbstractFileSetCheck.java:101)\n        at com.puppycrawl.tools.checkstyle.Checker.processFile(Checker.java:337)\n        at com.puppycrawl.tools.checkstyle.Checker.processFiles(Checker.java:296)\n        ... 5 more\nCaused by: java.lang.IllegalStateException: 6:32: mismatched input '}' expecting ';'\n        at com.puppycrawl.tools.checkstyle.JavaParser$CheckstyleErrorListener.syntaxError(JavaParser.java:255)\n        at org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41)\n        at org.antlr.v4.runtime.Parser.notifyErrorListeners(Parser.java:544)\n        at org.antlr.v4.runtime.DefaultErrorStrategy.reportInputMismatch(DefaultErrorStrategy.java:327)\n        at org.antlr.v4.runtime.DefaultErrorStrategy.reportError(DefaultErrorStrategy.java:139)\n        at com.puppycrawl.tools.checkstyle.CheckstyleParserErrorStrategy.recoverInline(CheckstyleParserErrorStrategy.java:38)\n        at org.antlr.v4.runtime.Parser.match(Parser.java:208)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.blockStatement(JavaLanguageParser.java:6190)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.block(JavaLanguageParser.java:6101)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.methodBody(JavaLanguageParser.java:2940)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.methodDeclaration(JavaLanguageParser.java:2898)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.memberDeclaration(JavaLanguageParser.java:2745)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.classBodyDeclaration(JavaLanguageParser.java:2671)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.classBody(JavaLanguageParser.java:2477)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.classDeclaration(JavaLanguageParser.java:1096)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.types(JavaLanguageParser.java:753)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.typeDeclaration(JavaLanguageParser.java:667)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.compilationUnit(JavaLanguageParser.java:414)\n        at com.puppycrawl.tools.checkstyle.JavaParser.parse(JavaParser.java:99)\n        ... 9 more\nCaused by: org.antlr.v4.runtime.InputMismatchException\n        ... 23 more\nCheckstyle ends with 1 errors.\n\">\u276f javac --enable-preview --release 21 src/main/java/HelloWorld.java\nNote: src/main/java/HelloWorld.java uses preview features of Java SE 21.\nNote: Recompile with -Xlint:preview for details.\n\n/var/tmp $ cat config.xml\n<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\" \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n<module name=\"Checker\">\n\n    <module name=\"NewlineAtEndOfFile\">\n        <property name=\"lineSeparator\" value=\"lf\"/>\n    </module>\n\n    <module name=\"TreeWalker\">\n        <module name=\"UnusedImports\"/>\n    </module>\n</module>\n\n\n/var/tmp $ cat YOUR_FILE.java\npublic class HelloWorld {\n    public static void main(String[] args) {\n        int x = 10;\n        int y = 20;\n        String result = STR.\"\\{x} + \\{y} = \\{x + y}\";\n        System.out.println(result);\n    }\n}\n\n/var/tmp $ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\n/var/tmp $ java $RUN_LOCALE -jar checkstyle-X.XX-all.jar -c config.xml YOUR_FILE.java\n> java $RUN_LOCALE -jar checkstyle-10.12.4-all.jar -c checkstyle.xml src/main/java/HelloWorld.java \n\nStarting audit...\ncom.puppycrawl.tools.checkstyle.api.CheckstyleException: Exception was thrown while processing src/main/java/HelloWorld.java\n        at com.puppycrawl.tools.checkstyle.Checker.processFiles(Checker.java:309)\n        at com.puppycrawl.tools.checkstyle.Checker.process(Checker.java:226)\n        at com.puppycrawl.tools.checkstyle.Main.runCheckstyle(Main.java:415)\n        at com.puppycrawl.tools.checkstyle.Main.runCli(Main.java:338)\n        at com.puppycrawl.tools.checkstyle.Main.execute(Main.java:195)\n        at com.puppycrawl.tools.checkstyle.Main.main(Main.java:130)\nCaused by: com.puppycrawl.tools.checkstyle.api.CheckstyleException: IllegalStateException occurred while parsing file /home/xxx/VCS/own/checkstyle-java21-reproducer/src/main/java/HelloWorld.java.\n        at com.puppycrawl.tools.checkstyle.JavaParser.parse(JavaParser.java:105)\n        at com.puppycrawl.tools.checkstyle.TreeWalker.processFiltered(TreeWalker.java:152)\n        at com.puppycrawl.tools.checkstyle.api.AbstractFileSetCheck.process(AbstractFileSetCheck.java:101)\n        at com.puppycrawl.tools.checkstyle.Checker.processFile(Checker.java:337)\n        at com.puppycrawl.tools.checkstyle.Checker.processFiles(Checker.java:296)\n        ... 5 more\nCaused by: java.lang.IllegalStateException: 6:32: mismatched input '}' expecting ';'\n        at com.puppycrawl.tools.checkstyle.JavaParser$CheckstyleErrorListener.syntaxError(JavaParser.java:255)\n        at org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41)\n        at org.antlr.v4.runtime.Parser.notifyErrorListeners(Parser.java:544)\n        at org.antlr.v4.runtime.DefaultErrorStrategy.reportInputMismatch(DefaultErrorStrategy.java:327)\n        at org.antlr.v4.runtime.DefaultErrorStrategy.reportError(DefaultErrorStrategy.java:139)\n        at com.puppycrawl.tools.checkstyle.CheckstyleParserErrorStrategy.recoverInline(CheckstyleParserErrorStrategy.java:38)\n        at org.antlr.v4.runtime.Parser.match(Parser.java:208)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.blockStatement(JavaLanguageParser.java:6190)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.block(JavaLanguageParser.java:6101)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.methodBody(JavaLanguageParser.java:2940)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.methodDeclaration(JavaLanguageParser.java:2898)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.memberDeclaration(JavaLanguageParser.java:2745)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.classBodyDeclaration(JavaLanguageParser.java:2671)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.classBody(JavaLanguageParser.java:2477)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.classDeclaration(JavaLanguageParser.java:1096)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.types(JavaLanguageParser.java:753)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.typeDeclaration(JavaLanguageParser.java:667)\n        at com.puppycrawl.tools.checkstyle.grammar.java.JavaLanguageParser.compilationUnit(JavaLanguageParser.java:414)\n        at com.puppycrawl.tools.checkstyle.JavaParser.parse(JavaParser.java:99)\n        ... 9 more\nCaused by: org.antlr.v4.runtime.InputMismatchException\n        ... 23 more\nCheckstyle ends with 1 errors.\n\nin place of the last 2 commands above.\n\nJava 21 is out, and it has the new String Templates as a preview feature. I did not really go deeper but if the configuration is having TreeWalker module, with at least one entry, then the build fails with the above-mentioned error, and if it happens inside a Maven build it just fails. It fails at the following line: String result = STR.\"\\{x} + \\{y} = \\{x + y}\";\nIf the TreeWalker is not present or empty, it finishes successfuly. Will the Java 21 based preview features be supported in upcoming releases?\n"
}