{
  "issue_id": 6169,
  "issue_url": "https://github.com/apache/rocketmq/issues/6169",
  "title": "NPE found when timerWheel disabled",
  "description": "<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"2023-02-24 11:12:10 INFO PopReviveService_0 - reviveQueueId=0, old offset is -1\n2023-02-24 11:12:10 INFO PopReviveService_1 - reviveQueueId=1, old offset is -1\n2023-02-24 11:12:10 ERROR PopReviveService_2 - reviveQueueId=2, revive error\njava.lang.NullPointerException: null\n\tat org.apache.rocketmq.broker.processor.PopReviveService.consumeReviveMessage(PopReviveService.java:327)\n\tat org.apache.rocketmq.broker.processor.PopReviveService.run(PopReviveService.java:606)\n\tat java.lang.Thread.run(Thread.java:766)\n2023-02-24 11:12:10 ERROR PopReviveService_6 - reviveQueueId=6, revive error\njava.lang.NullPointerException: null\n\tat org.apache.rocketmq.broker.processor.PopReviveService.consumeReviveMessage(PopReviveService.java:327)\n\tat org.apache.rocketmq.broker.processor.PopReviveService.run(PopReviveService.java:606)\n\tat java.lang.Thread.run(Thread.java:766)\n2023-02-24 11:12:10 ERROR PopReviveService_4 - reviveQueueId=4, revive error\"><pre class=\"notranslate\"><code class=\"notranslate\">2023-02-24 11:12:10 INFO PopReviveService_0 - reviveQueueId=0, old offset is -1\n2023-02-24 11:12:10 INFO PopReviveService_1 - reviveQueueId=1, old offset is -1\n2023-02-24 11:12:10 ERROR PopReviveService_2 - reviveQueueId=2, revive error\njava.lang.NullPointerException: null\n\tat org.apache.rocketmq.broker.processor.PopReviveService.consumeReviveMessage(PopReviveService.java:327)\n\tat org.apache.rocketmq.broker.processor.PopReviveService.run(PopReviveService.java:606)\n\tat java.lang.Thread.run(Thread.java:766)\n2023-02-24 11:12:10 ERROR PopReviveService_6 - reviveQueueId=6, revive error\njava.lang.NullPointerException: null\n\tat org.apache.rocketmq.broker.processor.PopReviveService.consumeReviveMessage(PopReviveService.java:327)\n\tat org.apache.rocketmq.broker.processor.PopReviveService.run(PopReviveService.java:606)\n\tat java.lang.Thread.run(Thread.java:766)\n2023-02-24 11:12:10 ERROR PopReviveService_4 - reviveQueueId=4, revive error\n</code></pre></div>\n<p dir=\"auto\">TimerMessageStore could be null when timerWheelEnable setting false.</p>\n<p dir=\"auto\">Since some processors are related with [timerWheelEnable], such as PopMessageProcessor, AckMessageProcessor, and only initialized once before startup, so can we check this switch and skip instantiation when disabled?</p>",
  "description_text": "2023-02-24 11:12:10 INFO PopReviveService_0 - reviveQueueId=0, old offset is -1\n2023-02-24 11:12:10 INFO PopReviveService_1 - reviveQueueId=1, old offset is -1\n2023-02-24 11:12:10 ERROR PopReviveService_2 - reviveQueueId=2, revive error\njava.lang.NullPointerException: null\n\tat org.apache.rocketmq.broker.processor.PopReviveService.consumeReviveMessage(PopReviveService.java:327)\n\tat org.apache.rocketmq.broker.processor.PopReviveService.run(PopReviveService.java:606)\n\tat java.lang.Thread.run(Thread.java:766)\n2023-02-24 11:12:10 ERROR PopReviveService_6 - reviveQueueId=6, revive error\njava.lang.NullPointerException: null\n\tat org.apache.rocketmq.broker.processor.PopReviveService.consumeReviveMessage(PopReviveService.java:327)\n\tat org.apache.rocketmq.broker.processor.PopReviveService.run(PopReviveService.java:606)\n\tat java.lang.Thread.run(Thread.java:766)\n2023-02-24 11:12:10 ERROR PopReviveService_4 - reviveQueueId=4, revive error\n\nTimerMessageStore could be null when timerWheelEnable setting false.\nSince some processors are related with [timerWheelEnable], such as PopMessageProcessor, AckMessageProcessor, and only initialized once before startup, so can we check this switch and skip instantiation when disabled?"
}