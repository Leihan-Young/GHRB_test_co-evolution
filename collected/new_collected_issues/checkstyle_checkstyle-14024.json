{
  "issue_id": 14014,
  "issue_url": "https://github.com/checkstyle/checkstyle/issues/14014",
  "title": "Indentation: Switch expression doesn't pass with LeftCurlies on newlines",
  "description": "<p dir=\"auto\">I have read check documentation: <a href=\"https://checkstyle.sourceforge.io/checks/misc/indentation.html\" rel=\"nofollow\">https://checkstyle.sourceforge.io/checks/misc/indentation.html</a><br>\nI have downloaded the latest checkstyle from: <a href=\"https://checkstyle.org/cmdline.html#Download_and_Run\" rel=\"nofollow\">https://checkstyle.org/cmdline.html#Download_and_Run</a><br>\nI have executed the cli and showed it below, as cli describes the problem better than 1,000 words</p>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"$ javac Test.java\n$ cat Test.java\npublic class Test\n{\n    public void test()\n    {\n        String otherValue = switch(\"test\") \n        {  // violation\n            case \"test\" -> \"hi\";\n\n            default -> null;\n        };\n    }\n}\n$ cat config.xml\n<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n        \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n        \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n<module name=\"Checker\">\n  <module name=\"TreeWalker\">\n    <module name=\"Indentation\"/>\n  </module>\n</module>\n$ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\n$ java $RUN_LOCALE -jar checkstyle-10.12.4-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /home/markus/tmp/checkstyle-test/Test.java:6:9: '{' has incorrect indentation level 8, expected level should be 12. [Indentation]\nAudit done.\nCheckstyle ends with 1 errors.\n\n$ javac Test.java\n$ cat Test.java\npublic class Test\n{\n    public void test()\n    {\n        String otherValue = switch(\"test\") \n            {\n            case \"test\" -> \"hi\";\n\n            default -> null;\n        };\n    }\n}\n$ java $RUN_LOCALE -jar checkstyle-10.12.4-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /home/markus/tmp/checkstyle-test/Test.java:6:13: 'switch lcurly' has incorrect indentation level 12, expected level should be 8. [Indentation]\nAudit done.\nCheckstyle ends with 1 errors.\"><pre class=\"notranslate\">$ javac Test.java\n$ cat Test.java\npublic class Test\n{\n    public void <span class=\"pl-en\">test</span>()\n    {\n        String otherValue = switch(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>test<span class=\"pl-pds\">\"</span></span>) \n        {  // violation\n            <span class=\"pl-k\">case</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>test<span class=\"pl-pds\">\"</span></span> -<span class=\"pl-k\">></span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>hi<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">;</span>\n\n            default -<span class=\"pl-k\">></span> null<span class=\"pl-k\">;</span>\n        }<span class=\"pl-k\">;</span>\n    }\n}\n$ cat config.xml\n<span class=\"pl-k\"><</span><span class=\"pl-k\">?</span>xml version=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>1.0<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">?</span><span class=\"pl-k\">></span>\n<span class=\"pl-k\"><</span><span class=\"pl-k\">!</span>DOCTYPE module PUBLIC\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-//Checkstyle//DTD Checkstyle Configuration 1.3//EN<span class=\"pl-pds\">\"</span></span>\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>https://checkstyle.org/dtds/configuration_1_3.dtd<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n<span class=\"pl-k\"><</span>module name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Checker<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n  <span class=\"pl-k\"><</span>module name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>TreeWalker<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n    <span class=\"pl-k\"><</span>module name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Indentation<span class=\"pl-pds\">\"</span></span>/<span class=\"pl-k\">></span>\n  <span class=\"pl-k\"><</span>/module<span class=\"pl-k\">></span>\n<span class=\"pl-k\"><</span>/module<span class=\"pl-k\">></span>\n$ RUN_LOCALE=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-Duser.language=en -Duser.country=US<span class=\"pl-pds\">\"</span></span>\n$ java <span class=\"pl-smi\">$RUN_LOCALE</span> -jar checkstyle-10.12.4-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /home/markus/tmp/checkstyle-test/Test.java:6:9: <span class=\"pl-s\"><span class=\"pl-pds\">'</span>{<span class=\"pl-pds\">'</span></span> has incorrect indentation level 8, expected level should be 12. [Indentation]\nAudit done.\nCheckstyle ends with 1 errors.\n\n$ javac Test.java\n$ cat Test.java\npublic class Test\n{\n    public void <span class=\"pl-en\">test</span>()\n    {\n        String otherValue = switch(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>test<span class=\"pl-pds\">\"</span></span>) \n            {\n            <span class=\"pl-k\">case</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>test<span class=\"pl-pds\">\"</span></span> -<span class=\"pl-k\">></span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>hi<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">;</span>\n\n            default -<span class=\"pl-k\">></span> null<span class=\"pl-k\">;</span>\n        }<span class=\"pl-k\">;</span>\n    }\n}\n$ java <span class=\"pl-smi\">$RUN_LOCALE</span> -jar checkstyle-10.12.4-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /home/markus/tmp/checkstyle-test/Test.java:6:13: <span class=\"pl-s\"><span class=\"pl-pds\">'</span>switch lcurly<span class=\"pl-pds\">'</span></span> has incorrect indentation level 12, expected level should be 8. [Indentation]\nAudit done.\nCheckstyle ends with 1 errors.</pre></div>\n<hr>\n<p dir=\"auto\"><strong>Describe what you expect in detail.</strong><br>\nCheckstyle can be passed, following the suggested outputs of the Indendation check is just an infinite loop.<br>\nNote that I intentionally left out the <code class=\"notranslate\">LeftCurly</code> module with <code class=\"notranslate\">option=nl</code> as it's not needed to reproduce this</p>",
  "description_text": "I have read check documentation: https://checkstyle.sourceforge.io/checks/misc/indentation.html\nI have downloaded the latest checkstyle from: https://checkstyle.org/cmdline.html#Download_and_Run\nI have executed the cli and showed it below, as cli describes the problem better than 1,000 words\n \"hi\";\n\n            default -> null;\n        };\n    }\n}\n$ cat config.xml\n\n\n\n\n\n\n\n$ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\n$ java $RUN_LOCALE -jar checkstyle-10.12.4-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /home/markus/tmp/checkstyle-test/Test.java:6:9: '{' has incorrect indentation level 8, expected level should be 12. [Indentation]\nAudit done.\nCheckstyle ends with 1 errors.\n\n$ javac Test.java\n$ cat Test.java\npublic class Test\n{\n    public void test()\n    {\n        String otherValue = switch(\"test\") \n            {\n            case \"test\" -> \"hi\";\n\n            default -> null;\n        };\n    }\n}\n$ java $RUN_LOCALE -jar checkstyle-10.12.4-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /home/markus/tmp/checkstyle-test/Test.java:6:13: 'switch lcurly' has incorrect indentation level 12, expected level should be 8. [Indentation]\nAudit done.\nCheckstyle ends with 1 errors.\">$ javac Test.java\n$ cat Test.java\npublic class Test\n{\n    public void test()\n    {\n        String otherValue = switch(\"test\") \n        {  // violation\n            case \"test\" -> \"hi\";\n\n            default -> null;\n        };\n    }\n}\n$ cat config.xml\n<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n        \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n        \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n<module name=\"Checker\">\n  <module name=\"TreeWalker\">\n    <module name=\"Indentation\"/>\n  </module>\n</module>\n$ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\n$ java $RUN_LOCALE -jar checkstyle-10.12.4-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /home/markus/tmp/checkstyle-test/Test.java:6:9: '{' has incorrect indentation level 8, expected level should be 12. [Indentation]\nAudit done.\nCheckstyle ends with 1 errors.\n\n$ javac Test.java\n$ cat Test.java\npublic class Test\n{\n    public void test()\n    {\n        String otherValue = switch(\"test\") \n            {\n            case \"test\" -> \"hi\";\n\n            default -> null;\n        };\n    }\n}\n$ java $RUN_LOCALE -jar checkstyle-10.12.4-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /home/markus/tmp/checkstyle-test/Test.java:6:13: 'switch lcurly' has incorrect indentation level 12, expected level should be 8. [Indentation]\nAudit done.\nCheckstyle ends with 1 errors.\n\nDescribe what you expect in detail.\nCheckstyle can be passed, following the suggested outputs of the Indendation check is just an infinite loop.\nNote that I intentionally left out the LeftCurly module with option=nl as it's not needed to reproduce this"
}