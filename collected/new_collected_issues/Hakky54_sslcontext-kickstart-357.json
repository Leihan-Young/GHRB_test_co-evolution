{
  "issue_id": 356,
  "issue_url": "https://github.com/Hakky54/sslcontext-kickstart/issues/356",
  "title": "New System Keystores in Windows",
  "description": "<p dir=\"auto\">With Java 11.0.18 and 17.0.5 a long standing issue (<a href=\"https://bugs.openjdk.org/browse/JDK-6782021\" rel=\"nofollow\">https://bugs.openjdk.org/browse/JDK-6782021</a>) with Windows-MY was solved. This includes the introduction of new keystore types in SunMSCAPI</p>\n<p dir=\"auto\">From: <a href=\"https://bugs.openjdk.org/browse/JDK-8286790\" rel=\"nofollow\">https://bugs.openjdk.org/browse/JDK-8286790</a></p>\n<p dir=\"auto\">The Windows KeyStore support in the SunMSCAPI provider has been expanded to include access to the local machine location. The new keystore types are:</p>\n<ul dir=\"auto\">\n<li>\"Windows-MY-LOCALMACHINE\"</li>\n<li>\"Windows-ROOT-LOCALMACHINE\"</li>\n</ul>\n<p dir=\"auto\">The following keystore types were also added, allowing developers to make it clear they map to the current user:</p>\n<ul dir=\"auto\">\n<li>\"Windows-MY-CURRENTUSER\" (same as \"Windows-MY\")</li>\n<li>\"Windows-ROOT-CURRENTUSER\" (same as \"Windows-ROOT\")</li>\n</ul>\n<p dir=\"auto\">Perhaps it could be generated automatically from something like:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"    try {\n        final Provider p = Security.getProvider(\"SunMSCAPI\");\n        for(final Enumeration e = p.keys(); e.hasMoreElements();) {\n            final String name = e.nextElement().toString();\n            if (name.startsWith(\"KeyStore.\")) {\n                System.out.println(name.substring(9));\n            }\n\n            }\n    } catch (final Exception e) {\n        System.out.println(e);\n    }\"><pre class=\"notranslate\"><code class=\"notranslate\">    try {\n        final Provider p = Security.getProvider(\"SunMSCAPI\");\n        for(final Enumeration e = p.keys(); e.hasMoreElements();) {\n            final String name = e.nextElement().toString();\n            if (name.startsWith(\"KeyStore.\")) {\n                System.out.println(name.substring(9));\n            }\n\n            }\n    } catch (final Exception e) {\n        System.out.println(e);\n    }\n</code></pre></div>\n<p dir=\"auto\">Which returns in Java 11/17</p>\n<p dir=\"auto\">Windows-MY-CURRENTUSER<br>\nWindows-MY-LOCALMACHINE<br>\nWindows-ROOT-LOCALMACHINE<br>\nWindows-ROOT-CURRENTUSER<br>\nWindows-ROOT<br>\nWindows-MY</p>\n<p dir=\"auto\">Could this be added in the KeyStoreUtils.loadSystemKeyStores() ? The new Windows-MY-LOCALMACHINE is very useful for services that run on ACME certificates published automatically to the store (e.g. with win.acme)</p>",
  "description_text": "With Java 11.0.18 and 17.0.5 a long standing issue (https://bugs.openjdk.org/browse/JDK-6782021) with Windows-MY was solved. This includes the introduction of new keystore types in SunMSCAPI\nFrom: https://bugs.openjdk.org/browse/JDK-8286790\nThe Windows KeyStore support in the SunMSCAPI provider has been expanded to include access to the local machine location. The new keystore types are:\n\n\"Windows-MY-LOCALMACHINE\"\n\"Windows-ROOT-LOCALMACHINE\"\n\nThe following keystore types were also added, allowing developers to make it clear they map to the current user:\n\n\"Windows-MY-CURRENTUSER\" (same as \"Windows-MY\")\n\"Windows-ROOT-CURRENTUSER\" (same as \"Windows-ROOT\")\n\nPerhaps it could be generated automatically from something like:\n    try {\n        final Provider p = Security.getProvider(\"SunMSCAPI\");\n        for(final Enumeration e = p.keys(); e.hasMoreElements();) {\n            final String name = e.nextElement().toString();\n            if (name.startsWith(\"KeyStore.\")) {\n                System.out.println(name.substring(9));\n            }\n\n            }\n    } catch (final Exception e) {\n        System.out.println(e);\n    }\n\nWhich returns in Java 11/17\nWindows-MY-CURRENTUSER\nWindows-MY-LOCALMACHINE\nWindows-ROOT-LOCALMACHINE\nWindows-ROOT-CURRENTUSER\nWindows-ROOT\nWindows-MY\nCould this be added in the KeyStoreUtils.loadSystemKeyStores() ? The new Windows-MY-LOCALMACHINE is very useful for services that run on ACME certificates published automatically to the store (e.g. with win.acme)"
}