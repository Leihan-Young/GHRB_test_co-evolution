{
  "issue_id": 11821,
  "issue_url": "https://github.com/checkstyle/checkstyle/issues/11821",
  "title": "RequireThisCheck not able to handle try-with-resources",
  "description": "<p dir=\"auto\">I have read check documentation: <a href=\"https://checkstyle.sourceforge.io/config_coding.html#RequireThis\" rel=\"nofollow\">https://checkstyle.sourceforge.io/config_coding.html#RequireThis</a><br>\nI have downloaded the latest checkstyle from: <a href=\"https://checkstyle.org/cmdline.html#Download_and_Run\" rel=\"nofollow\">https://checkstyle.org/cmdline.html#Download_and_Run</a><br>\nI have executed the cli and showed it below, as cli describes the problem better than 1,000 words</p>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"/var/tmp $ javac Test.java\"><pre class=\"notranslate\">/var/tmp $ javac Test.java</pre></div>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"/var/tmp $ cat config.xml\"><pre class=\"notranslate\">/var/tmp $ cat config.xml</pre></div>\n<div class=\"highlight highlight-text-xml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"<!DOCTYPE module PUBLIC\n        \"-//Puppy Crawl//DTD Check Configuration 1.2//EN\"\n        \"http://www.puppycrawl.com/dtds/configuration_1_2.dtd\">\n\n<module name=\"Checker\">\n  <module name=\"TreeWalker\">\n    <module name=\"RequireThisCheck\">\n      <property name=\"validateOnlyOverlapping\" value=\"false\" />\n    </module>\n  </module>\n</module>\"><pre class=\"notranslate\"><!<span class=\"pl-ent\">DOCTYPE</span> <span class=\"pl-e\">module</span> PUBLIC\n        \"-//Puppy Crawl//DTD Check Configuration 1.2//EN\"\n        \"http://www.puppycrawl.com/dtds/configuration_1_2.dtd\">\n\n<<span class=\"pl-ent\">module</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Checker<span class=\"pl-pds\">\"</span></span>>\n  <<span class=\"pl-ent\">module</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>TreeWalker<span class=\"pl-pds\">\"</span></span>>\n    <<span class=\"pl-ent\">module</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>RequireThisCheck<span class=\"pl-pds\">\"</span></span>>\n      <<span class=\"pl-ent\">property</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>validateOnlyOverlapping<span class=\"pl-pds\">\"</span></span> <span class=\"pl-e\">value</span>=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>false<span class=\"pl-pds\">\"</span></span> />\n    </<span class=\"pl-ent\">module</span>>\n  </<span class=\"pl-ent\">module</span>>\n</<span class=\"pl-ent\">module</span>></pre></div>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"/var/tmp $ cat Test.java\"><pre class=\"notranslate\">/var/tmp $ cat Test.java</pre></div>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\n\npublic class Test {\n\n    public BufferedReader instFld2;\n\n     void method() {\n        try (BufferedReader instFld2 = new BufferedReader(new InputStreamReader(null, \"utf-8\"))) {\n        }\n        catch (IOException e) {\n        }\n    }\n}\"><pre class=\"notranslate\"><span class=\"pl-k\">import</span> <span class=\"pl-s1\">java</span>.<span class=\"pl-s1\">io</span>.<span class=\"pl-s1\">BufferedReader</span>;\n<span class=\"pl-k\">import</span> <span class=\"pl-s1\">java</span>.<span class=\"pl-s1\">io</span>.<span class=\"pl-s1\">IOException</span>;\n<span class=\"pl-k\">import</span> <span class=\"pl-s1\">java</span>.<span class=\"pl-s1\">io</span>.<span class=\"pl-s1\">InputStreamReader</span>;\n\n<span class=\"pl-k\">public</span> <span class=\"pl-k\">class</span> <span class=\"pl-smi\">Test</span> {\n\n    <span class=\"pl-k\">public</span> <span class=\"pl-smi\">BufferedReader</span> <span class=\"pl-s1\">instFld2</span>;\n\n     <span class=\"pl-smi\">void</span> <span class=\"pl-en\">method</span>() {\n        <span class=\"pl-k\">try</span> (<span class=\"pl-smi\">BufferedReader</span> <span class=\"pl-s1\">instFld2</span> = <span class=\"pl-k\">new</span> <span class=\"pl-smi\">BufferedReader</span>(<span class=\"pl-k\">new</span> <span class=\"pl-smi\">InputStreamReader</span>(<span class=\"pl-c1\">null</span>, <span class=\"pl-s\">\"utf-8\"</span>))) {\n        }\n        <span class=\"pl-k\">catch</span> (<span class=\"pl-smi\">IOException</span> <span class=\"pl-s1\">e</span>) {\n        }\n    }\n}</pre></div>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"/var/tmp $ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\n/var/tmp $ java $RUN_LOCALE -jar checkstyle-10.3.1-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /var/tmp/Test.java:10:29: Reference to instance variable 'instFld2' needs \"this.\". [RequireThis]\nAudit done.\nCheckstyle ends with 1 errors.\"><pre class=\"notranslate\">/var/tmp $ RUN_LOCALE=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-Duser.language=en -Duser.country=US<span class=\"pl-pds\">\"</span></span>\n/var/tmp $ java <span class=\"pl-smi\">$RUN_LOCALE</span> -jar checkstyle-10.3.1-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /var/tmp/Test.java:10:29: Reference to instance variable <span class=\"pl-s\"><span class=\"pl-pds\">'</span>instFld2<span class=\"pl-pds\">'</span></span> needs <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>this.<span class=\"pl-pds\">\"</span></span>. [RequireThis]\nAudit done.\nCheckstyle ends with 1 errors.</pre></div>\n<p dir=\"auto\">The violation is given for resource definition, which is not expected.</p>",
  "description_text": "I have read check documentation: https://checkstyle.sourceforge.io/config_coding.html#RequireThis\nI have downloaded the latest checkstyle from: https://checkstyle.org/cmdline.html#Download_and_Run\nI have executed the cli and showed it below, as cli describes the problem better than 1,000 words\n/var/tmp $ javac Test.java\n/var/tmp $ cat config.xml\n\n\n\n\n\n\n\n\">DOCTYPE module PUBLIC\n        \"-//Puppy Crawl//DTD Check Configuration 1.2//EN\"\n        \"http://www.puppycrawl.com/dtds/configuration_1_2.dtd\">\n\n<module name=\"Checker\">\n  <module name=\"TreeWalker\">\n    <module name=\"RequireThisCheck\">\n      <property name=\"validateOnlyOverlapping\" value=\"false\" />\n    module>\n  module>\nmodule>\n/var/tmp $ cat Test.java\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\n\npublic class Test {\n\n    public BufferedReader instFld2;\n\n     void method() {\n        try (BufferedReader instFld2 = new BufferedReader(new InputStreamReader(null, \"utf-8\"))) {\n        }\n        catch (IOException e) {\n        }\n    }\n}\n/var/tmp $ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\n/var/tmp $ java $RUN_LOCALE -jar checkstyle-10.3.1-all.jar -c config.xml Test.java\nStarting audit...\n[ERROR] /var/tmp/Test.java:10:29: Reference to instance variable 'instFld2' needs \"this.\". [RequireThis]\nAudit done.\nCheckstyle ends with 1 errors.\nThe violation is given for resource definition, which is not expected."
}