{
  "issue_id": 10153,
  "issue_url": "https://github.com/alibaba/nacos/issues/10153",
  "title": "Close console login page when `auth.enabled` is false or close the login page.",
  "description": "<p dir=\"auto\"><strong>Is your feature request related to a problem? Please describe.</strong></p>\n<p dir=\"auto\">After <code class=\"notranslate\">2.2.0.1</code> released, the <code class=\"notranslate\">token.sceret.key</code> is a required value without default value. So It will make users <strong>must</strong> configure it even <code class=\"notranslate\">auth.enabled</code> is false.</p>\n<p dir=\"auto\">The most reason can't ignore <code class=\"notranslate\">token.sceret.key</code> when <code class=\"notranslate\">auth.enabled</code> is false is that the console has a login page which is strong depend the <code class=\"notranslate\">token.sceret.key</code> to generate <code class=\"notranslate\">accessToken</code>.</p>\n<p dir=\"auto\">So there is necessary to add a feature to close the login page when <code class=\"notranslate\">auth.enabled</code> is false.</p>\n<p dir=\"auto\">What's more, For other auth plugin, whether the login page should saved should be defined by plugins.</p>\n<p dir=\"auto\"><strong>Describe the solution you'd like</strong></p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Add <code class=\"notranslate\">auth.enabled</code> status and <code class=\"notranslate\">login.page.enabled</code> status from <code class=\"notranslate\">/v1/console/server/state</code> API. <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1641892826\" data-permission-text=\"Title is private\" data-url=\"https://github.com/alibaba/nacos/issues/10203\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/alibaba/nacos/pull/10203/hovercard\" href=\"https://github.com/alibaba/nacos/pull/10203\">#10203</a></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> The console ui judge  <code class=\"notranslate\">login.page.enabled</code>, and stop redirect to login page when <code class=\"notranslate\">login.page.enabled</code> is false. <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1651511013\" data-permission-text=\"Title is private\" data-url=\"https://github.com/alibaba/nacos/issues/10262\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/alibaba/nacos/pull/10262/hovercard\" href=\"https://github.com/alibaba/nacos/pull/10262\">#10262</a></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Add announcement hint when <code class=\"notranslate\">auth.enabled</code> is false to tell users the server has no auth.\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Add announcement API such as  <code class=\"notranslate\">/v1/console/server/announcement</code>. <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1641892826\" data-permission-text=\"Title is private\" data-url=\"https://github.com/alibaba/nacos/issues/10203\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/alibaba/nacos/pull/10203/hovercard\" href=\"https://github.com/alibaba/nacos/pull/10203\">#10203</a></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Show announcement in console pages. <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1651511013\" data-permission-text=\"Title is private\" data-url=\"https://github.com/alibaba/nacos/issues/10262\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/alibaba/nacos/pull/10262/hovercard\" href=\"https://github.com/alibaba/nacos/pull/10262\">#10262</a></li>\n</ul>\n</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Remove strong depend on <code class=\"notranslate\">token.sceret.key</code> when <code class=\"notranslate\">auth.enabled=false</code>, only keep stopping start when <code class=\"notranslate\">auth.enabled=true</code> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1651801414\" data-permission-text=\"Title is private\" data-url=\"https://github.com/alibaba/nacos/issues/10265\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/alibaba/nacos/pull/10265/hovercard\" href=\"https://github.com/alibaba/nacos/pull/10265\">#10265</a></li>\n</ul>",
  "description_text": "Is your feature request related to a problem? Please describe.\nAfter 2.2.0.1 released, the token.sceret.key is a required value without default value. So It will make users must configure it even auth.enabled is false.\nThe most reason can't ignore token.sceret.key when auth.enabled is false is that the console has a login page which is strong depend the token.sceret.key to generate accessToken.\nSo there is necessary to add a feature to close the login page when auth.enabled is false.\nWhat's more, For other auth plugin, whether the login page should saved should be defined by plugins.\nDescribe the solution you'd like\n\n Add auth.enabled status and login.page.enabled status from /v1/console/server/state API. #10203\n The console ui judge  login.page.enabled, and stop redirect to login page when login.page.enabled is false. #10262\n Add announcement hint when auth.enabled is false to tell users the server has no auth.\n\n Add announcement API such as  /v1/console/server/announcement. #10203\n Show announcement in console pages. #10262\n\n\n Remove strong depend on token.sceret.key when auth.enabled=false, only keep stopping start when auth.enabled=true #10265\n"
}