{
  "issue_id": 7534,
  "issue_url": "https://github.com/apache/rocketmq/issues/7534",
  "title": "[Bug] class Topiclist use CopyOnWriteArraySet will cause timeout ",
  "description": "<h3 dir=\"auto\">Before Creating the Bug Report</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\">\n<p dir=\"auto\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I found a bug, not just asking a question, which should be created in <a href=\"https://github.com/apache/rocketmq/discussions\">GitHub Discussions</a>.</p>\n</li>\n<li class=\"task-list-item\">\n<p dir=\"auto\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I have searched the <a href=\"https://github.com/apache/rocketmq/issues\">GitHub Issues</a> and <a href=\"https://github.com/apache/rocketmq/discussions\">GitHub Discussions</a>  of this repository and believe that this is not a duplicate.</p>\n</li>\n<li class=\"task-list-item\">\n<p dir=\"auto\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I have confirmed that this bug belongs to the current repository, not other repositories of RocketMQ.</p>\n</li>\n</ul>\n<h3 dir=\"auto\">Runtime platform environment</h3>\n<p dir=\"auto\">centos</p>\n<h3 dir=\"auto\">RocketMQ version</h3>\n<p dir=\"auto\">release 5.1.3</p>\n<h3 dir=\"auto\">JDK Version</h3>\n<p dir=\"auto\">jdk8</p>\n<h3 dir=\"auto\">Describe the Bug</h3>\n<p dir=\"auto\">when topic list in namesrv is huge(eg:50000), the interface getAllTopicList in routeinfomanager will cost a lot time,which may be timeout.</p>\n<h3 dir=\"auto\">Steps to Reproduce</h3>\n<p dir=\"auto\">use tools to call this interface, and calculate the time</p>\n<h3 dir=\"auto\">What Did You Expect to See?</h3>\n<p dir=\"auto\">topiclist on namesrv</p>\n<h3 dir=\"auto\">What Did You See Instead?</h3>\n<p dir=\"auto\">timeout</p>\n<h3 dir=\"auto\">Additional Context</h3>\n<p dir=\"auto\"><em>No response</em></p>",
  "description_text": "Before Creating the Bug Report\n\n\n I found a bug, not just asking a question, which should be created in GitHub Discussions.\n\n\n I have searched the GitHub Issues and GitHub Discussions  of this repository and believe that this is not a duplicate.\n\n\n I have confirmed that this bug belongs to the current repository, not other repositories of RocketMQ.\n\n\nRuntime platform environment\ncentos\nRocketMQ version\nrelease 5.1.3\nJDK Version\njdk8\nDescribe the Bug\nwhen topic list in namesrv is huge(eg:50000), the interface getAllTopicList in routeinfomanager will cost a lot time,which may be timeout.\nSteps to Reproduce\nuse tools to call this interface, and calculate the time\nWhat Did You Expect to See?\ntopiclist on namesrv\nWhat Did You See Instead?\ntimeout\nAdditional Context\nNo response"
}