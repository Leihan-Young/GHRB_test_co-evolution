{
  "issue_id": 6884,
  "issue_url": "https://github.com/apache/rocketmq/issues/6884",
  "title": "[Bug] Proxy Error: org.apache.rocketmq.client.exception.MQBrokerException: CODE: 1  DESC: org.apache.rocketmq.acl.common.AclException: No accessKey is configured, org.apache.rocketmq.acl.plain.PlainPermissionManager.validate(PlainPermissionManager.java:607) BROKER",
  "description": "<h3 dir=\"auto\">Before Creating the Bug Report</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\">\n<p dir=\"auto\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I found a bug, not just asking a question, which should be created in <a href=\"https://github.com/apache/rocketmq/discussions\">GitHub Discussions</a>.</p>\n</li>\n<li class=\"task-list-item\">\n<p dir=\"auto\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I have searched the <a href=\"https://github.com/apache/rocketmq/issues\">GitHub Issues</a> and <a href=\"https://github.com/apache/rocketmq/discussions\">GitHub Discussions</a>  of this repository and believe that this is not a duplicate.</p>\n</li>\n<li class=\"task-list-item\">\n<p dir=\"auto\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I have confirmed that this bug belongs to the current repository, not other repositories of RocketMQ.</p>\n</li>\n</ul>\n<h3 dir=\"auto\">Runtime platform environment</h3>\n<p dir=\"auto\">Centos 7</p>\n<h3 dir=\"auto\">RocketMQ version</h3>\n<p dir=\"auto\">5.1.1</p>\n<h3 dir=\"auto\">JDK Version</h3>\n<p dir=\"auto\">JDK8</p>\n<h3 dir=\"auto\">Describe the Bug</h3>\n<p dir=\"auto\">After the proxy of Rocketmq5.1.1 is started, the following error is reported:</p>\n<p dir=\"auto\">2023-06-09 15:26:22 WARN RebalanceService - Compute consume offset from last offset exception, mq=MessageQueue [topic=DefaultHeartBeatSyncerTopic, brokerName=rocketmq-standalone-broker-0, queueId=0], exception={}<br>\norg.apache.rocketmq.client.exception.MQClientException: Invoke Broker[10.244.134.179:10911] exception<br>\nFor more information, please visit the url, <a href=\"https://rocketmq.apache.org/docs/bestPractice/06FAQ\" rel=\"nofollow\">https://rocketmq.apache.org/docs/bestPractice/06FAQ</a><br>\nat org.apache.rocketmq.client.impl.MQAdminImpl.maxOffset(MQAdminImpl.java:215)<br>\nat org.apache.rocketmq.client.impl.consumer.RebalancePushImpl.computePullFromWhereWithException(RebalancePushImpl.java:185)<br>\nat org.apache.rocketmq.client.impl.consumer.RebalancePushImpl.computePullFromWhere(RebalancePushImpl.java:158)<br>\nat org.apache.rocketmq.client.impl.consumer.RebalanceImpl.updateProcessQueueTableInRebalance(RebalanceImpl.java:524)<br>\nat org.apache.rocketmq.client.impl.consumer.RebalanceImpl.rebalanceByTopic(RebalanceImpl.java:305)<br>\nat org.apache.rocketmq.client.impl.consumer.RebalanceImpl.doRebalance(RebalanceImpl.java:247)<br>\nat org.apache.rocketmq.client.impl.consumer.DefaultMQPushConsumerImpl.doRebalance(DefaultMQPushConsumerImpl.java:1362)<br>\nat org.apache.rocketmq.client.impl.factory.MQClientInstance.doRebalance(MQClientInstance.java:867)<br>\nat org.apache.rocketmq.client.impl.consumer.RebalanceService.run(RebalanceService.java:41)<br>\nat java.lang.Thread.run(Thread.java:750)<br>\nCaused by: org.apache.rocketmq.client.exception.MQBrokerException: CODE: 1  DESC: org.apache.rocketmq.acl.common.AclException: No accessKey is configured, org.apache.rocketmq.acl.plain.PlainPermissionManager.validate(PlainPermissionManager.java:607) BROKER: 10.244.134.179:10911<br>\nFor more information, please visit the url, <a href=\"https://rocketmq.apache.org/docs/bestPractice/06FAQ\" rel=\"nofollow\">https://rocketmq.apache.org/docs/bestPractice/06FAQ</a><br>\nat org.apache.rocketmq.client.impl.MQClientAPIImpl.getMaxOffset(MQClientAPIImpl.java:1232)<br>\nat org.apache.rocketmq.client.impl.MQAdminImpl.maxOffset(MQAdminImpl.java:213)<br>\n... 9 common frames omitted</p>\n<h3 dir=\"auto\">Steps to Reproduce</h3>\n<p dir=\"auto\">After the proxy of Rocketmq5.1.1 is started, the error is reported</p>\n<h3 dir=\"auto\">What Did You Expect to See?</h3>\n<p dir=\"auto\">Rocketmq5.1.1's proxy starts normally</p>\n<h3 dir=\"auto\">What Did You See Instead?</h3>\n<p dir=\"auto\">Rocketmq5.1.1's proxy starts not normally</p>\n<h3 dir=\"auto\">Additional Context</h3>\n<p dir=\"auto\"><em>No response</em></p>",
  "description_text": "Before Creating the Bug Report\n\n\n I found a bug, not just asking a question, which should be created in GitHub Discussions.\n\n\n I have searched the GitHub Issues and GitHub Discussions  of this repository and believe that this is not a duplicate.\n\n\n I have confirmed that this bug belongs to the current repository, not other repositories of RocketMQ.\n\n\nRuntime platform environment\nCentos 7\nRocketMQ version\n5.1.1\nJDK Version\nJDK8\nDescribe the Bug\nAfter the proxy of Rocketmq5.1.1 is started, the following error is reported:\n2023-06-09 15:26:22 WARN RebalanceService - Compute consume offset from last offset exception, mq=MessageQueue [topic=DefaultHeartBeatSyncerTopic, brokerName=rocketmq-standalone-broker-0, queueId=0], exception={}\norg.apache.rocketmq.client.exception.MQClientException: Invoke Broker[10.244.134.179:10911] exception\nFor more information, please visit the url, https://rocketmq.apache.org/docs/bestPractice/06FAQ\nat org.apache.rocketmq.client.impl.MQAdminImpl.maxOffset(MQAdminImpl.java:215)\nat org.apache.rocketmq.client.impl.consumer.RebalancePushImpl.computePullFromWhereWithException(RebalancePushImpl.java:185)\nat org.apache.rocketmq.client.impl.consumer.RebalancePushImpl.computePullFromWhere(RebalancePushImpl.java:158)\nat org.apache.rocketmq.client.impl.consumer.RebalanceImpl.updateProcessQueueTableInRebalance(RebalanceImpl.java:524)\nat org.apache.rocketmq.client.impl.consumer.RebalanceImpl.rebalanceByTopic(RebalanceImpl.java:305)\nat org.apache.rocketmq.client.impl.consumer.RebalanceImpl.doRebalance(RebalanceImpl.java:247)\nat org.apache.rocketmq.client.impl.consumer.DefaultMQPushConsumerImpl.doRebalance(DefaultMQPushConsumerImpl.java:1362)\nat org.apache.rocketmq.client.impl.factory.MQClientInstance.doRebalance(MQClientInstance.java:867)\nat org.apache.rocketmq.client.impl.consumer.RebalanceService.run(RebalanceService.java:41)\nat java.lang.Thread.run(Thread.java:750)\nCaused by: org.apache.rocketmq.client.exception.MQBrokerException: CODE: 1  DESC: org.apache.rocketmq.acl.common.AclException: No accessKey is configured, org.apache.rocketmq.acl.plain.PlainPermissionManager.validate(PlainPermissionManager.java:607) BROKER: 10.244.134.179:10911\nFor more information, please visit the url, https://rocketmq.apache.org/docs/bestPractice/06FAQ\nat org.apache.rocketmq.client.impl.MQClientAPIImpl.getMaxOffset(MQClientAPIImpl.java:1232)\nat org.apache.rocketmq.client.impl.MQAdminImpl.maxOffset(MQAdminImpl.java:213)\n... 9 common frames omitted\nSteps to Reproduce\nAfter the proxy of Rocketmq5.1.1 is started, the error is reported\nWhat Did You Expect to See?\nRocketmq5.1.1's proxy starts normally\nWhat Did You See Instead?\nRocketmq5.1.1's proxy starts not normally\nAdditional Context\nNo response"
}