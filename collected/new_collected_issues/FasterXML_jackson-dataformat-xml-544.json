{
  "issue_id": 545,
  "issue_url": "https://github.com/FasterXML/jackson-dataformat-xml/issues/545",
  "title": "`@JacksonXmlText` does not work when paired with `@JsonRawValue`",
  "description": "<p dir=\"auto\">I apologize if there's a similar issue already opened - I didn't find anything when searching.</p>\n<p dir=\"auto\"><strong>Describe the bug</strong><br>\nWhen a field has both the <code class=\"notranslate\">@JsonRawValue</code> and the <code class=\"notranslate\">@JacksonXmlText</code> annotations, the <code class=\"notranslate\">@JacksonXlmText</code> annotation has no effect.</p>\n<p dir=\"auto\"><strong>Version information</strong><br>\ncom.fasterxml.jackson.core:jackson-annotations:2.13.3<br>\ncom.fasterxml.jackson.dataformat:jackson-dataformat-xml:2.13.3</p>\n<p dir=\"auto\"><strong>To Reproduce</strong></p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"@JacksonXmlRootElement(localName = \"test-pojo\")\npublic class TestPojo {\n     @JacksonXmlProperty(isAttribute = true)\n     String id;\n\n     @JacksonXmlText\n     @JsonRawValue\n     String value;\n}\n\n//....\n\nTestPojo sut = new TestPojo();\nsut.id = \"123\";\nsut.value = \"<a>A</a><b someAttribute=\\\"B\\\">B</b>\";\"><pre class=\"notranslate\"><span class=\"pl-c1\">@</span><span class=\"pl-c1\">JacksonXmlRootElement</span>(<span class=\"pl-s1\">localName</span> = <span class=\"pl-s\">\"test-pojo\"</span>)\n<span class=\"pl-k\">public</span> <span class=\"pl-k\">class</span> <span class=\"pl-smi\">TestPojo</span> {\n     <span class=\"pl-c1\">@</span><span class=\"pl-c1\">JacksonXmlProperty</span>(<span class=\"pl-s1\">isAttribute</span> = <span class=\"pl-c1\">true</span>)\n     <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">id</span>;\n\n     <span class=\"pl-c1\">@</span><span class=\"pl-c1\">JacksonXmlText</span>\n     <span class=\"pl-c1\">@</span><span class=\"pl-c1\">JsonRawValue</span>\n     <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">value</span>;\n}\n\n<span class=\"pl-c\">//....</span>\n\n<span class=\"pl-smi\">TestPojo</span> <span class=\"pl-s1\">sut</span> = <span class=\"pl-k\">new</span> <span class=\"pl-smi\">TestPojo</span>();\n<span class=\"pl-s1\">sut</span>.<span class=\"pl-s1\">id</span> = <span class=\"pl-s\">\"123\"</span>;\n<span class=\"pl-s1\">sut</span>.<span class=\"pl-s1\">value</span> = <span class=\"pl-s\">\"<a>A</a><b someAttribute=<span class=\"pl-cce\">\\\"</span>B<span class=\"pl-cce\">\\\"</span>>B</b>\"</span>;</pre></div>\n<p dir=\"auto\">Actual output:</p>\n<div class=\"highlight highlight-text-xml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"<test-pojo>\n    <id>123</id>\n     <value>\n         <a>A</a>\n         <b someAttribute=\"B\">B</b>\n     </value>\n</test-pojo>\"><pre class=\"notranslate\"><<span class=\"pl-ent\">test-pojo</span>>\n    <<span class=\"pl-ent\">id</span>>123</<span class=\"pl-ent\">id</span>>\n     <<span class=\"pl-ent\">value</span>>\n         <<span class=\"pl-ent\">a</span>>A</<span class=\"pl-ent\">a</span>>\n         <<span class=\"pl-ent\">b</span> <span class=\"pl-e\">someAttribute</span>=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>B<span class=\"pl-pds\">\"</span></span>>B</<span class=\"pl-ent\">b</span>>\n     </<span class=\"pl-ent\">value</span>>\n</<span class=\"pl-ent\">test-pojo</span>></pre></div>\n<p dir=\"auto\">Expected output:</p>\n<div class=\"highlight highlight-text-xml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"<test-pojo>\n    <id>123</id>\n    <a>A</a><b someAttribute=\"B\">B</b>\n</test-pojo>\"><pre class=\"notranslate\"><<span class=\"pl-ent\">test-pojo</span>>\n    <<span class=\"pl-ent\">id</span>>123</<span class=\"pl-ent\">id</span>>\n    <<span class=\"pl-ent\">a</span>>A</<span class=\"pl-ent\">a</span>><<span class=\"pl-ent\">b</span> <span class=\"pl-e\">someAttribute</span>=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>B<span class=\"pl-pds\">\"</span></span>>B</<span class=\"pl-ent\">b</span>>\n</<span class=\"pl-ent\">test-pojo</span>></pre></div>\n<p dir=\"auto\"><strong>Additional context</strong></p>\n<ul dir=\"auto\">\n<li>I tried cheating the system, by included a <code class=\"notranslate\">@JsonProperty(\"\")</code> annotation on the <code class=\"notranslate\">value</code> field, it had no effect.</li>\n</ul>",
  "description_text": "I apologize if there's a similar issue already opened - I didn't find anything when searching.\nDescribe the bug\nWhen a field has both the @JsonRawValue and the @JacksonXmlText annotations, the @JacksonXlmText annotation has no effect.\nVersion information\ncom.fasterxml.jackson.core:jackson-annotations:2.13.3\ncom.fasterxml.jackson.dataformat:jackson-dataformat-xml:2.13.3\nTo Reproduce\nB\";\">@JacksonXmlRootElement(localName = \"test-pojo\")\npublic class TestPojo {\n     @JacksonXmlProperty(isAttribute = true)\n     String id;\n\n     @JacksonXmlText\n     @JsonRawValue\n     String value;\n}\n\n//....\n\nTestPojo sut = new TestPojo();\nsut.id = \"123\";\nsut.value = \"A\\\"B\\\">B\";\nActual output:\nB\n\n\"><test-pojo>\n    <id>123id>\n     <value>\n         <a>Aa>\n         <b someAttribute=\"B\">Bb>\n     value>\ntest-pojo>\nExpected output:\nB\n\"><test-pojo>\n    <id>123id>\n    <a>Aa><b someAttribute=\"B\">Bb>\ntest-pojo>\nAdditional context\n\nI tried cheating the system, by included a @JsonProperty(\"\") annotation on the value field, it had no effect.\n"
}