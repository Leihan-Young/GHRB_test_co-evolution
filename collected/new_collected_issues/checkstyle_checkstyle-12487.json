{
  "issue_id": 12486,
  "issue_url": "https://github.com/checkstyle/checkstyle/issues/12486",
  "title": "NoWhitespaceAfter false positive on synchronized method",
  "description": "<p dir=\"auto\">Hello,</p>\n<p dir=\"auto\">I have the following checkstyle configuration in <code class=\"notranslate\">pom.xml</code>:</p>\n<div class=\"highlight highlight-text-xml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"<module\u00a0name=\"NoWhitespaceAfter\">\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<property\u00a0name=\"tokens\"\u00a0value=\"ARRAY_INIT,AT,INC,DEC,UNARY_MINUS,UNARY_PLUS,BNOT,LNOT,DOT,TYPECAST,ARRAY_DECLARATOR,INDEX_OP,LITERAL_SYNCHRONIZED,METHOD_REF\"\u00a0/>\n</module>\"><pre class=\"notranslate\"><<span class=\"pl-ent\">module</span>\u00a0name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>NoWhitespaceAfter<span class=\"pl-pds\">\"</span></span>>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<<span class=\"pl-ent\">property</span>\u00a0name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>tokens<span class=\"pl-pds\">\"</span></span>\u00a0value=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>ARRAY_INIT,AT,INC,DEC,UNARY_MINUS,UNARY_PLUS,BNOT,LNOT,DOT,TYPECAST,ARRAY_DECLARATOR,INDEX_OP,LITERAL_SYNCHRONIZED,METHOD_REF<span class=\"pl-pds\">\"</span></span>\u00a0/>\n</<span class=\"pl-ent\">module</span>></pre></div>\n<p dir=\"auto\">With a <code class=\"notranslate\">mvn verify</code>, the following piece of code reports an error <code class=\"notranslate\">'synchronized' is followed by whitespace</code>:</p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"public\u00a0class\u00a0TestClass\u00a0{\n\u00a0\u00a0\u00a0\u00a0private\u00a0synchronized\u00a0Row\u00a0waitForNextRow()\u00a0{\n\u00a0\u00a0\u00a0\u00a0}\n}\"><pre class=\"notranslate\"><span class=\"pl-k\">public</span>\u00a0<span class=\"pl-k\">class</span>\u00a0<span class=\"pl-smi\">TestClass</span>\u00a0{\n\u00a0\u00a0\u00a0\u00a0<span class=\"pl-k\">private</span>\u00a0<span class=\"pl-k\">synchronized</span>\u00a0<span class=\"pl-smi\">Row</span>\u00a0<span class=\"pl-en\">waitForNextRow</span>()\u00a0{\n\u00a0\u00a0\u00a0\u00a0}\n}</pre></div>\n<p dir=\"auto\">It seems to be a false positive because the check should only apply on structures like:</p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"synchronized(lock) { ... }\"><pre class=\"notranslate\"><span class=\"pl-k\">synchronized</span>(<span class=\"pl-s1\">lock</span>) { ... }</pre></div>\n<p dir=\"auto\">Here is the output:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ cat TestClass.java\npublic\u00a0class\u00a0TestClass\u00a0{\n\u00a0\u00a0\u00a0\u00a0private\u00a0synchronized\u00a0Row\u00a0waitForNextRow()\u00a0{\n\u00a0\u00a0\u00a0\u00a0}\n}\n\n$ cat TestConfig.xml\n<?xml\u00a0version=\"1.0\"?>\n<!DOCTYPE\u00a0module\u00a0PUBLIC\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"-//Puppy\u00a0Crawl//DTD\u00a0Check\u00a0Configuration\u00a01.3//EN\"\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n\n<module\u00a0name=\"Checker\">\n\u00a0\u00a0\u00a0\u00a0<property\u00a0name=\"charset\"\u00a0value=\"UTF-8\"/>\n\n\u00a0\u00a0\u00a0\u00a0<module\u00a0name=\"TreeWalker\">\n<module\u00a0name=\"NoWhitespaceAfter\">\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<property\u00a0name=\"tokens\"\u00a0value=\"ARRAY_INIT,AT,INC,DEC,UNARY_MINUS,UNARY_PLUS,BNOT,LNOT,DOT,TYPECAST,ARRAY_DECLARATOR,INDEX_OP,LITERAL_SYNCHRONIZED,METHOD_REF\"\u00a0/>\n</module>\n\u00a0\u00a0\u00a0\u00a0</module>\n</module>\n\n$ java -jar checkstyle-10.5.0-all.jar -c TestConfig.xml TestClass.java\nStarting audit...\n[ERROR] TestClass.java:2:13: 'synchronized' is followed by whitespace. [NoWhitespaceAfter]\nAudit done.\nCheckstyle ends with 1 errors.\"><pre class=\"notranslate\"><code class=\"notranslate\">$ cat TestClass.java\npublic\u00a0class\u00a0TestClass\u00a0{\n\u00a0\u00a0\u00a0\u00a0private\u00a0synchronized\u00a0Row\u00a0waitForNextRow()\u00a0{\n\u00a0\u00a0\u00a0\u00a0}\n}\n\n$ cat TestConfig.xml\n<?xml\u00a0version=\"1.0\"?>\n<!DOCTYPE\u00a0module\u00a0PUBLIC\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"-//Puppy\u00a0Crawl//DTD\u00a0Check\u00a0Configuration\u00a01.3//EN\"\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n\n<module\u00a0name=\"Checker\">\n\u00a0\u00a0\u00a0\u00a0<property\u00a0name=\"charset\"\u00a0value=\"UTF-8\"/>\n\n\u00a0\u00a0\u00a0\u00a0<module\u00a0name=\"TreeWalker\">\n<module\u00a0name=\"NoWhitespaceAfter\">\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<property\u00a0name=\"tokens\"\u00a0value=\"ARRAY_INIT,AT,INC,DEC,UNARY_MINUS,UNARY_PLUS,BNOT,LNOT,DOT,TYPECAST,ARRAY_DECLARATOR,INDEX_OP,LITERAL_SYNCHRONIZED,METHOD_REF\"\u00a0/>\n</module>\n\u00a0\u00a0\u00a0\u00a0</module>\n</module>\n\n$ java -jar checkstyle-10.5.0-all.jar -c TestConfig.xml TestClass.java\nStarting audit...\n[ERROR] TestClass.java:2:13: 'synchronized' is followed by whitespace. [NoWhitespaceAfter]\nAudit done.\nCheckstyle ends with 1 errors.\n</code></pre></div>\n<p dir=\"auto\">Thanks & best regards.</p>",
  "description_text": "Hello,\nI have the following checkstyle configuration in pom.xml:\n\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\n\"><module\u00a0name=\"NoWhitespaceAfter\">\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<property\u00a0name=\"tokens\"\u00a0value=\"ARRAY_INIT,AT,INC,DEC,UNARY_MINUS,UNARY_PLUS,BNOT,LNOT,DOT,TYPECAST,ARRAY_DECLARATOR,INDEX_OP,LITERAL_SYNCHRONIZED,METHOD_REF\"\u00a0/>\nmodule>\nWith a mvn verify, the following piece of code reports an error 'synchronized' is followed by whitespace:\npublic\u00a0class\u00a0TestClass\u00a0{\n\u00a0\u00a0\u00a0\u00a0private\u00a0synchronized\u00a0Row\u00a0waitForNextRow()\u00a0{\n\u00a0\u00a0\u00a0\u00a0}\n}\nIt seems to be a false positive because the check should only apply on structures like:\nsynchronized(lock) { ... }\nHere is the output:\n\n\n\n\u00a0\u00a0\u00a0\u00a0\n\n\u00a0\u00a0\u00a0\u00a0\n\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\n\n\u00a0\u00a0\u00a0\u00a0\n\n\n$ java -jar checkstyle-10.5.0-all.jar -c TestConfig.xml TestClass.java\nStarting audit...\n[ERROR] TestClass.java:2:13: 'synchronized' is followed by whitespace. [NoWhitespaceAfter]\nAudit done.\nCheckstyle ends with 1 errors.\">$ cat TestClass.java\npublic\u00a0class\u00a0TestClass\u00a0{\n\u00a0\u00a0\u00a0\u00a0private\u00a0synchronized\u00a0Row\u00a0waitForNextRow()\u00a0{\n\u00a0\u00a0\u00a0\u00a0}\n}\n\n$ cat TestConfig.xml\n\n\n\n\n\u00a0\u00a0\u00a0\u00a0\n\n\u00a0\u00a0\u00a0\u00a0\n\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\n\n\u00a0\u00a0\u00a0\u00a0\n\n\n$ java -jar checkstyle-10.5.0-all.jar -c TestConfig.xml TestClass.java\nStarting audit...\n[ERROR] TestClass.java:2:13: 'synchronized' is followed by whitespace. [NoWhitespaceAfter]\nAudit done.\nCheckstyle ends with 1 errors.\n\nThanks & best regards."
}