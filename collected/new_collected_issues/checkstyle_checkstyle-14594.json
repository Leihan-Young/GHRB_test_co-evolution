{
  "issue_id": 12020,
  "issue_url": "https://github.com/checkstyle/checkstyle/issues/12020",
  "title": "False positive in RightCurly with 'alone_or_singleline' RightCurlyOption in try/catch",
  "description": "<p dir=\"auto\">I have read check documentation: <a href=\"https://checkstyle.org/checks/blocks/rightcurly.html#RightCurly\" rel=\"nofollow\">https://checkstyle.org/checks/blocks/rightcurly.html#RightCurly</a></p>\n<p dir=\"auto\">Related documentation: <a href=\"https://checkstyle.org/property_types.html#RightCurlyOption\" rel=\"nofollow\">https://checkstyle.org/property_types.html#RightCurlyOption</a></p>\n<p dir=\"auto\">From <code class=\"notranslate\">alone_or_singleline</code>:</p>\n<blockquote>\n<p dir=\"auto\">The brace must be alone on the line, yet single-line format of block is allowed.</p>\n</blockquote>\n<p dir=\"auto\">I have downloaded the latest checkstyle from: <a href=\"https://checkstyle.org/cmdline.html#Download_and_Run\" rel=\"nofollow\">https://checkstyle.org/cmdline.html#Download_and_Run</a><br>\nI have executed the cli and showed it below, as cli describes the problem better than 1,000 words</p>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"/var/tmp $ javac RCurlyTest.java\n\n/var/tmp $ cat config.xml\n<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n    \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n    \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n\n<module name=\"Checker\">\n    <property name=\"severity\" value=\"error\"/>\n    <property name=\"tabWidth\" value=\"4\"/>\n    <property name=\"fileExtensions\" value=\"java, properties, xml\"/>\n\n    <module name=\"TreeWalker\">\n        <module name=\"RightCurly\">\n            <property name=\"option\" value=\"alone_or_singleline\"/>\n        </module>\n    </module>\n</module>\n\n/var/tmp $ cat RCurlyTest.java\npublic class RCurlyTest {\n\tpublic static void main(String args[]) {\n\t\ttry { System.out.println(args[0]); } catch (Exception e) {}\n\t}\n}\n\n/var/tmp $ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\n/var/tmp $ java $RUN_LOCALE -jar checkstyle-10.3.1-all.jar -c config.xml RCurlyTest.java\nStarting audit...\n[ERROR] [...]/RCurlyTest.java:3:44: '}' at column 38 should be alone on a line. [RightCurly]\nAudit done.\nCheckstyle ends with 1 errors.\"><pre class=\"notranslate\">/var/tmp $ javac RCurlyTest.java\n\n/var/tmp $ cat config.xml\n<span class=\"pl-k\"><</span><span class=\"pl-k\">?</span>xml version=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>1.0<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">?</span><span class=\"pl-k\">></span>\n<span class=\"pl-k\"><</span><span class=\"pl-k\">!</span>DOCTYPE module PUBLIC\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-//Checkstyle//DTD Checkstyle Configuration 1.3//EN<span class=\"pl-pds\">\"</span></span>\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>https://checkstyle.org/dtds/configuration_1_3.dtd<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n\n<span class=\"pl-k\"><</span>module name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Checker<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n    <span class=\"pl-k\"><</span>property name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>severity<span class=\"pl-pds\">\"</span></span> value=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>error<span class=\"pl-pds\">\"</span></span>/<span class=\"pl-k\">></span>\n    <span class=\"pl-k\"><</span>property name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>tabWidth<span class=\"pl-pds\">\"</span></span> value=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>4<span class=\"pl-pds\">\"</span></span>/<span class=\"pl-k\">></span>\n    <span class=\"pl-k\"><</span>property name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>fileExtensions<span class=\"pl-pds\">\"</span></span> value=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>java, properties, xml<span class=\"pl-pds\">\"</span></span>/<span class=\"pl-k\">></span>\n\n    <span class=\"pl-k\"><</span>module name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>TreeWalker<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n        <span class=\"pl-k\"><</span>module name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>RightCurly<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n            <span class=\"pl-k\"><</span>property name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>option<span class=\"pl-pds\">\"</span></span> value=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>alone_or_singleline<span class=\"pl-pds\">\"</span></span>/<span class=\"pl-k\">></span>\n        <span class=\"pl-k\"><</span>/module<span class=\"pl-k\">></span>\n    <span class=\"pl-k\"><</span>/module<span class=\"pl-k\">></span>\n<span class=\"pl-k\"><</span>/module<span class=\"pl-k\">></span>\n\n/var/tmp $ cat RCurlyTest.java\npublic class RCurlyTest {\n\tpublic static void main(String args[]) {\n\t\ttry { System.out.println(args[0])<span class=\"pl-k\">;</span> } catch (Exception e) {}\n\t}\n}\n\n/var/tmp $ RUN_LOCALE=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-Duser.language=en -Duser.country=US<span class=\"pl-pds\">\"</span></span>\n/var/tmp $ java <span class=\"pl-smi\">$RUN_LOCALE</span> -jar checkstyle-10.3.1-all.jar -c config.xml RCurlyTest.java\nStarting audit...\n[ERROR] [...]/RCurlyTest.java:3:44: <span class=\"pl-s\"><span class=\"pl-pds\">'</span>}<span class=\"pl-pds\">'</span></span> at column 38 should be alone on a line. [RightCurly]\nAudit done.\nCheckstyle ends with 1 errors.</pre></div>\n<hr>\n<p dir=\"auto\"><strong>Describe what you expect in detail.</strong></p>\n<p dir=\"auto\">Since the whole try..catch construct is in a single line, I expect the RightCurly test to pass (i.e. no errors raised).</p>\n<p dir=\"auto\">As a side-note. Column number in the error message seems to be wrong when tabs are used in the source file. In the above example you can see that:</p>\n<ul dir=\"auto\">\n<li>RCurlyTest.java:3:44 is correct and honours the top level tabWidth property in the config.xml file</li>\n<li>However the message incorrectly refers to \"column 38\"</li>\n</ul>",
  "description_text": "I have read check documentation: https://checkstyle.org/checks/blocks/rightcurly.html#RightCurly\nRelated documentation: https://checkstyle.org/property_types.html#RightCurlyOption\nFrom alone_or_singleline:\n\nThe brace must be alone on the line, yet single-line format of block is allowed.\n\nI have downloaded the latest checkstyle from: https://checkstyle.org/cmdline.html#Download_and_Run\nI have executed the cli and showed it below, as cli describes the problem better than 1,000 words\n\n\n\n\n\n\n\n\n\n\n\n\n\n/var/tmp $ cat RCurlyTest.java\npublic class RCurlyTest {\n\tpublic static void main(String args[]) {\n\t\ttry { System.out.println(args[0]); } catch (Exception e) {}\n\t}\n}\n\n/var/tmp $ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\n/var/tmp $ java $RUN_LOCALE -jar checkstyle-10.3.1-all.jar -c config.xml RCurlyTest.java\nStarting audit...\n[ERROR] [...]/RCurlyTest.java:3:44: '}' at column 38 should be alone on a line. [RightCurly]\nAudit done.\nCheckstyle ends with 1 errors.\">/var/tmp $ javac RCurlyTest.java\n\n/var/tmp $ cat config.xml\n<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n    \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n    \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n\n<module name=\"Checker\">\n    <property name=\"severity\" value=\"error\"/>\n    <property name=\"tabWidth\" value=\"4\"/>\n    <property name=\"fileExtensions\" value=\"java, properties, xml\"/>\n\n    <module name=\"TreeWalker\">\n        <module name=\"RightCurly\">\n            <property name=\"option\" value=\"alone_or_singleline\"/>\n        </module>\n    </module>\n</module>\n\n/var/tmp $ cat RCurlyTest.java\npublic class RCurlyTest {\n\tpublic static void main(String args[]) {\n\t\ttry { System.out.println(args[0]); } catch (Exception e) {}\n\t}\n}\n\n/var/tmp $ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\n/var/tmp $ java $RUN_LOCALE -jar checkstyle-10.3.1-all.jar -c config.xml RCurlyTest.java\nStarting audit...\n[ERROR] [...]/RCurlyTest.java:3:44: '}' at column 38 should be alone on a line. [RightCurly]\nAudit done.\nCheckstyle ends with 1 errors.\n\nDescribe what you expect in detail.\nSince the whole try..catch construct is in a single line, I expect the RightCurly test to pass (i.e. no errors raised).\nAs a side-note. Column number in the error message seems to be wrong when tabs are used in the source file. In the above example you can see that:\n\nRCurlyTest.java:3:44 is correct and honours the top level tabWidth property in the config.xml file\nHowever the message incorrectly refers to \"column 38\"\n"
}