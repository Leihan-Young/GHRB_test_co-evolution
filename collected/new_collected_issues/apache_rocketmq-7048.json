{
  "issue_id": 7047,
  "issue_url": "https://github.com/apache/rocketmq/issues/7047",
  "title": "[Bug]  Broker address is not carried when channel is not active",
  "description": "<h3 dir=\"auto\">Before Creating the Bug Report</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\">\n<p dir=\"auto\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I found a bug, not just asking a question, which should be created in <a href=\"https://github.com/apache/rocketmq/discussions\">GitHub Discussions</a>.</p>\n</li>\n<li class=\"task-list-item\">\n<p dir=\"auto\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I have searched the <a href=\"https://github.com/apache/rocketmq/issues\">GitHub Issues</a> and <a href=\"https://github.com/apache/rocketmq/discussions\">GitHub Discussions</a>  of this repository and believe that this is not a duplicate.</p>\n</li>\n<li class=\"task-list-item\">\n<p dir=\"auto\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> I have confirmed that this bug belongs to the current repository, not other repositories of RocketMQ.</p>\n</li>\n</ul>\n<h3 dir=\"auto\">Runtime platform environment</h3>\n<p dir=\"auto\">OS: CentOS 6.9</p>\n<h3 dir=\"auto\">RocketMQ version</h3>\n<p dir=\"auto\">branch: (develop|tag 5.1.3) version: 5.1.3</p>\n<h3 dir=\"auto\">JDK Version</h3>\n<p dir=\"auto\">JDK: 1.8.0_202</p>\n<h3 dir=\"auto\">Describe the Bug</h3>\n<p dir=\"auto\">NettyRemotingClient#invokeOneway is not carry broker addr when throw RemotingConnectException:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/10137071/254521688-8bf98a30-e7ad-4ee0-b91b-b29512b080be.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTU4ODYsIm5iZiI6MTcxMjA1NTU4NiwicGF0aCI6Ii8xMDEzNzA3MS8yNTQ1MjE2ODgtOGJmOThhMzAtZTdhZC00ZWUwLWI5MWItYjI5NTEyYjA4MGJlLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDEwNTk0NlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTRjMzcyNTMzYTI5NmIyNGE1MzMyNjA5OGZiZmI2YjhhM2Q1ZGZlMDdmOTQ3Zjk1N2I3ZjA1NDVjZTY1YzRjYWEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.oys8BUYo2bGIQqnTWV76fLxsOpDX3slQoAoOShXacZk\"><img src=\"https://private-user-images.githubusercontent.com/10137071/254521688-8bf98a30-e7ad-4ee0-b91b-b29512b080be.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTIwNTU4ODYsIm5iZiI6MTcxMjA1NTU4NiwicGF0aCI6Ii8xMDEzNzA3MS8yNTQ1MjE2ODgtOGJmOThhMzAtZTdhZC00ZWUwLWI5MWItYjI5NTEyYjA4MGJlLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MDIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDAyVDEwNTk0NlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTRjMzcyNTMzYTI5NmIyNGE1MzMyNjA5OGZiZmI2YjhhM2Q1ZGZlMDdmOTQ3Zjk1N2I3ZjA1NDVjZTY1YzRjYWEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.oys8BUYo2bGIQqnTWV76fLxsOpDX3slQoAoOShXacZk\" alt=\"image\" style=\"max-width: 100%;\"></a></p>\n<h3 dir=\"auto\">Steps to Reproduce</h3>\n<ol dir=\"auto\">\n<li>Consume message from broker cluster.</li>\n<li>Kill one broker.</li>\n<li>Watch the log of consumer.</li>\n</ol>\n<h3 dir=\"auto\">What Did You Expect to See?</h3>\n<p dir=\"auto\">No broker address.</p>\n<h3 dir=\"auto\">What Did You See Instead?</h3>\n<p dir=\"auto\">Print broker address.</p>\n<h3 dir=\"auto\">Additional Context</h3>\n<p dir=\"auto\"><em>No response</em></p>",
  "description_text": "Before Creating the Bug Report\n\n\n I found a bug, not just asking a question, which should be created in GitHub Discussions.\n\n\n I have searched the GitHub Issues and GitHub Discussions  of this repository and believe that this is not a duplicate.\n\n\n I have confirmed that this bug belongs to the current repository, not other repositories of RocketMQ.\n\n\nRuntime platform environment\nOS: CentOS 6.9\nRocketMQ version\nbranch: (develop|tag 5.1.3) version: 5.1.3\nJDK Version\nJDK: 1.8.0_202\nDescribe the Bug\nNettyRemotingClient#invokeOneway is not carry broker addr when throw RemotingConnectException:\n\nSteps to Reproduce\n\nConsume message from broker cluster.\nKill one broker.\nWatch the log of consumer.\n\nWhat Did You Expect to See?\nNo broker address.\nWhat Did You See Instead?\nPrint broker address.\nAdditional Context\nNo response"
}