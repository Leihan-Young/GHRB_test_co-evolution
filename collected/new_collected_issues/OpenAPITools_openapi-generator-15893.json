{
  "issue_id": 5110,
  "issue_url": "https://github.com/OpenAPITools/openapi-generator/issues/5110",
  "title": "[BUG][Typescript] Duplicate key in enum when value (string) has characters that are not valid in variable name ",
  "description": "<h4 dir=\"auto\">Bug Report Checklist</h4>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you provided a full/minimal spec to reproduce the issue?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you validated the input using an OpenAPI validator (<a href=\"https://apidevtools.org/swagger-parser/online/\" rel=\"nofollow\">example</a>)?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> What's the version of OpenAPI Generator used?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you search for related issues/PRs?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> What's the actual output vs expected output?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> [Optional] Bounty to sponsor the fix (<a href=\"https://www.bountysource.com/issues/66123212-javascript-client-produces-a-wrong-object-for-a-string-enum-type-that-is-used-with-ref\" rel=\"nofollow\">example</a>)</li>\n</ul>\n<h5 dir=\"auto\">Description</h5>\n<p dir=\"auto\">Characters that can not be used in variable names should be translated into words, and yet still used in enum keys. Removing them (current behavior), leads to duplicate keys.</p>\n<p dir=\"auto\">This enum is generated with <code class=\"notranslate\">typescript-node</code> and <code class=\"notranslate\">typescript-axios</code> (and I am sure, other generators will work the same, but I did not test them):</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"export enum GradeEnum {\n        A = <any> 'A+',\n        A = <any> 'A',\n        B = <any> 'B',\n        C = <any> 'C',\n        D = <any> 'D',\n        E = <any> 'E'\n    }\"><pre class=\"notranslate\"><code class=\"notranslate\">export enum GradeEnum {\n        A = <any> 'A+',\n        A = <any> 'A',\n        B = <any> 'B',\n        C = <any> 'C',\n        D = <any> 'D',\n        E = <any> 'E'\n    }\n</code></pre></div>\n<h5 dir=\"auto\">openapi-generator version</h5>\n<p dir=\"auto\">The one installed from npm, 4.2.2</p>\n<h5 dir=\"auto\">OpenAPI declaration file content or url</h5>\n<p dir=\"auto\">Spec: <a href=\"https://lgtm.com/api/v1.0/openapi\" rel=\"nofollow\">https://lgtm.com/api/v1.0/openapi</a></p>\n<p dir=\"auto\">Bug is related to this part of the spec:</p>\n<div class=\"highlight highlight-source-json notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"{\n  \"type\": \"string\",\n  \"description\": \"The grade of the code for this language.\",\n  \"example\": \"A+\",\n  \"enum\": [\n    \"A+\",\n    \"A\",\n    \"B\",\n    \"C\",\n    \"D\",\n    \"E\"\n  ]\n}\"><pre class=\"notranslate\">{\n  <span class=\"pl-ent\">\"type\"</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>string<span class=\"pl-pds\">\"</span></span>,\n  <span class=\"pl-ent\">\"description\"</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>The grade of the code for this language.<span class=\"pl-pds\">\"</span></span>,\n  <span class=\"pl-ent\">\"example\"</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>A+<span class=\"pl-pds\">\"</span></span>,\n  <span class=\"pl-ent\">\"enum\"</span>: [\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>A+<span class=\"pl-pds\">\"</span></span>,\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>A<span class=\"pl-pds\">\"</span></span>,\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>B<span class=\"pl-pds\">\"</span></span>,\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>C<span class=\"pl-pds\">\"</span></span>,\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>D<span class=\"pl-pds\">\"</span></span>,\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>E<span class=\"pl-pds\">\"</span></span>\n  ]\n}</pre></div>\n<h5 dir=\"auto\">Command line used for generation</h5>\n<p dir=\"auto\"><a href=\"https://github.com/Warchant/lgtm-api-ts/blob/f7fbd5e587b7b49d7aa2ee405cf8be5423c01059/Makefile#L8\">https://github.com/Warchant/lgtm-api-ts/blob/f7fbd5e587b7b49d7aa2ee405cf8be5423c01059/Makefile#L8</a></p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"npx openapi-generator generate --git-user-id=$(GIT_USER) --git-repo-id=$(GIT_REPO) -i $(API) -g typescript-axios -c config.json\n\"><pre class=\"notranslate\"><code class=\"notranslate\">npx openapi-generator generate --git-user-id=$(GIT_USER) --git-repo-id=$(GIT_REPO) -i $(API) -g typescript-axios -c config.json\n\n</code></pre></div>\n<h5 dir=\"auto\">Steps to reproduce</h5>\n<ol dir=\"auto\">\n<li>Use <code class=\"notranslate\">typescript-axios</code> generator on lgtm spec</li>\n<li>Find <code class=\"notranslate\">GradeEnum</code> in generated fles.</li>\n<li>See duplicate keys.</li>\n</ol>\n<h5 dir=\"auto\">Related issues/PRs</h5>\n<p dir=\"auto\">None.</p>\n<h5 dir=\"auto\">Suggest a fix</h5>\n<p dir=\"auto\">Characters that can not be used in variable names, should be replaced with special words, or so:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"const replacement = {\n  \"+\": \"plus\",\n  \"-\": \"minus\"\n}\"><pre class=\"notranslate\"><code class=\"notranslate\">const replacement = {\n  \"+\": \"plus\",\n  \"-\": \"minus\"\n}\n</code></pre></div>\n<p dir=\"auto\">Then, enum keys will become:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"export enum GradeEnum {\n        Aplus = <any> 'A+',\n        A = <any> 'A',\n        B = <any> 'B',\n        C = <any> 'C',\n        D = <any> 'D',\n        E = <any> 'E'\n    }\"><pre class=\"notranslate\"><code class=\"notranslate\">export enum GradeEnum {\n        Aplus = <any> 'A+',\n        A = <any> 'A',\n        B = <any> 'B',\n        C = <any> 'C',\n        D = <any> 'D',\n        E = <any> 'E'\n    }\n</code></pre></div>",
  "description_text": "Bug Report Checklist\n\n Have you provided a full/minimal spec to reproduce the issue?\n Have you validated the input using an OpenAPI validator (example)?\n What's the version of OpenAPI Generator used?\n Have you search for related issues/PRs?\n What's the actual output vs expected output?\n [Optional] Bounty to sponsor the fix (example)\n\nDescription\nCharacters that can not be used in variable names should be translated into words, and yet still used in enum keys. Removing them (current behavior), leads to duplicate keys.\nThis enum is generated with typescript-node and typescript-axios (and I am sure, other generators will work the same, but I did not test them):\nexport enum GradeEnum {\n        A =  'A+',\n        A =  'A',\n        B =  'B',\n        C =  'C',\n        D =  'D',\n        E =  'E'\n    }\n\nopenapi-generator version\nThe one installed from npm, 4.2.2\nOpenAPI declaration file content or url\nSpec: https://lgtm.com/api/v1.0/openapi\nBug is related to this part of the spec:\n{\n  \"type\": \"string\",\n  \"description\": \"The grade of the code for this language.\",\n  \"example\": \"A+\",\n  \"enum\": [\n    \"A+\",\n    \"A\",\n    \"B\",\n    \"C\",\n    \"D\",\n    \"E\"\n  ]\n}\nCommand line used for generation\nhttps://github.com/Warchant/lgtm-api-ts/blob/f7fbd5e587b7b49d7aa2ee405cf8be5423c01059/Makefile#L8\nnpx openapi-generator generate --git-user-id=$(GIT_USER) --git-repo-id=$(GIT_REPO) -i $(API) -g typescript-axios -c config.json\n\n\nSteps to reproduce\n\nUse typescript-axios generator on lgtm spec\nFind GradeEnum in generated fles.\nSee duplicate keys.\n\nRelated issues/PRs\nNone.\nSuggest a fix\nCharacters that can not be used in variable names, should be replaced with special words, or so:\nconst replacement = {\n  \"+\": \"plus\",\n  \"-\": \"minus\"\n}\n\nThen, enum keys will become:\nexport enum GradeEnum {\n        Aplus =  'A+',\n        A =  'A',\n        B =  'B',\n        C =  'C',\n        D =  'D',\n        E =  'E'\n    }\n"
}