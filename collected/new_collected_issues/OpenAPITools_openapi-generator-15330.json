{
  "issue_id": 15213,
  "issue_url": "https://github.com/OpenAPITools/openapi-generator/issues/15213",
  "title": "[BUG] [JAVA] Declaring arrays of ranged integers produces generated java code that fails compilation on 'cannot find symbol' ",
  "description": "<h4 dir=\"auto\">Bug Report Checklist</h4>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you provided a full/minimal spec to reproduce the issue?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you validated the input using an OpenAPI validator (<a href=\"https://apidevtools.org/swagger-parser/online/\" rel=\"nofollow\">example</a>)?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you <a href=\"https://github.com/OpenAPITools/openapi-generator/wiki/FAQ#how-to-test-with-the-latest-master-of-openapi-generator\">tested with the latest master</a> to confirm the issue still exists?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you searched for related issues/PRs?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> What's the actual output vs expected output?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> [Optional] Sponsorship to speed up the bug fix or feature request (<a href=\"https://github.com/OpenAPITools/openapi-generator/issues/6178\" data-hovercard-type=\"issue\" data-hovercard-url=\"/OpenAPITools/openapi-generator/issues/6178/hovercard\">example</a>)</li>\n</ul>\n\n<h5 dir=\"auto\">Description</h5>\n<p dir=\"auto\">Starting from version 6.5.0 (<code class=\"notranslate\">id 'org.openapi.generator' version '6.5.0'</code>) - the below <code class=\"notranslate\">openapi.yaml</code> produces code that fails compilation.<br>\nThe scenario is defining an array of integers which have a validation rule defined (I used min/max ranges - there might be other scenarios as well).</p>\n<p dir=\"auto\">The relevant generated method in the interface is:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\" default ResponseEntity<String> getDemo(\n        @NotNull @Parameter(name = \"type\", description = \"The type of Demo.\", required = true, in = ParameterIn.QUERY) @Valid @RequestParam(value = \"type\", required = true) List<SomeEnum> type,\n        @Parameter(name = \"rangedValues\", description = \"The values within ranged.\", in = ParameterIn.QUERY) @Valid @RequestParam(value = \"rangedValues\", required = false) List<@Valid RangedValue> rangedValues\n    ) {\n        return getDelegate().getDemo(type, rangedValues);\n    }\"><pre class=\"notranslate\"><code class=\"notranslate\"> default ResponseEntity<String> getDemo(\n        @NotNull @Parameter(name = \"type\", description = \"The type of Demo.\", required = true, in = ParameterIn.QUERY) @Valid @RequestParam(value = \"type\", required = true) List<SomeEnum> type,\n        @Parameter(name = \"rangedValues\", description = \"The values within ranged.\", in = ParameterIn.QUERY) @Valid @RequestParam(value = \"rangedValues\", required = false) List<@Valid RangedValue> rangedValues\n    ) {\n        return getDelegate().getDemo(type, rangedValues);\n    }\n</code></pre></div>\n<p dir=\"auto\">I believe the extra <code class=\"notranslate\">@Valid</code> within the <code class=\"notranslate\">List<...</code> is redundant but have not verified that.</p>\n<h5 dir=\"auto\">openapi-generator version</h5>\n<p dir=\"auto\">The problem occurs in 6.5.0 only, in 6.4.0 it works fine.</p>\n<h5 dir=\"auto\">OpenAPI declaration file content or url</h5>\n<div class=\"highlight highlight-source-yaml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"openapi: \"3.0.0\"\ninfo:\n  title: Demo API\n  description: A Demo API\n  version: 0.0.1\n\nservers:\n  - url: https://localhost:8080/api/1\n\ntags:\n  - name: demo\n    description: Contains all the demo APIs\n\ncomponents:\n  schemas:\n    SomeEnum:\n      type: string\n      enum:\n        - value1\n        - another-value\n        - best_value\n        - thevalue\n\n    RangedValueList:\n      type: array\n      items:\n        $ref: \"#/components/schemas/RangedValue\"\n\n    RangedValue:\n      properties:\n        value:\n          type: integer\n          minimum: 5\n          maximum: 50\n\npaths:\n  /demo:\n    get:\n      tags:\n        - demo\n      description: \"A demo API\"\n      operationId: \"getDemo\"\n      parameters:\n        - in: query\n          name: type\n          description: The type of Demo.\n          schema:\n            type: array\n            items:\n              $ref: \"#/components/schemas/SomeEnum\"\n          required: true\n\n        - in: query\n          name: rangedValues\n          description: The values within ranged.\n          schema:\n            $ref: \"#/components/schemas/RangedValueList\"\n          required: false\n\n      responses:\n        \"200\":\n          description: success\n          content:\n            application/json:\n              schema:\n                type: string\"><pre class=\"notranslate\"><span class=\"pl-ent\">openapi</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>3.0.0<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-ent\">info</span>:\n  <span class=\"pl-ent\">title</span>: <span class=\"pl-s\">Demo API</span>\n  <span class=\"pl-ent\">description</span>: <span class=\"pl-s\">A Demo API</span>\n  <span class=\"pl-ent\">version</span>: <span class=\"pl-s\">0.0.1</span>\n\n<span class=\"pl-ent\">servers</span>:\n  - <span class=\"pl-ent\">url</span>: <span class=\"pl-s\">https://localhost:8080/api/1</span>\n\n<span class=\"pl-ent\">tags</span>:\n  - <span class=\"pl-ent\">name</span>: <span class=\"pl-s\">demo</span>\n    <span class=\"pl-ent\">description</span>: <span class=\"pl-s\">Contains all the demo APIs</span>\n\n<span class=\"pl-ent\">components</span>:\n  <span class=\"pl-ent\">schemas</span>:\n    <span class=\"pl-ent\">SomeEnum</span>:\n      <span class=\"pl-ent\">type</span>: <span class=\"pl-s\">string</span>\n      <span class=\"pl-ent\">enum</span>:\n        - <span class=\"pl-s\">value1</span>\n        - <span class=\"pl-s\">another-value</span>\n        - <span class=\"pl-s\">best_value</span>\n        - <span class=\"pl-s\">thevalue</span>\n\n    <span class=\"pl-ent\">RangedValueList</span>:\n      <span class=\"pl-ent\">type</span>: <span class=\"pl-s\">array</span>\n      <span class=\"pl-ent\">items</span>:\n        <span class=\"pl-ent\">$ref</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>#/components/schemas/RangedValue<span class=\"pl-pds\">\"</span></span>\n\n    <span class=\"pl-ent\">RangedValue</span>:\n      <span class=\"pl-ent\">properties</span>:\n        <span class=\"pl-ent\">value</span>:\n          <span class=\"pl-ent\">type</span>: <span class=\"pl-s\">integer</span>\n          <span class=\"pl-ent\">minimum</span>: <span class=\"pl-c1\">5</span>\n          <span class=\"pl-ent\">maximum</span>: <span class=\"pl-c1\">50</span>\n\n<span class=\"pl-ent\">paths</span>:\n  <span class=\"pl-ent\">/demo</span>:\n    <span class=\"pl-ent\">get</span>:\n      <span class=\"pl-ent\">tags</span>:\n        - <span class=\"pl-s\">demo</span>\n      <span class=\"pl-ent\">description</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>A demo API<span class=\"pl-pds\">\"</span></span>\n      <span class=\"pl-ent\">operationId</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>getDemo<span class=\"pl-pds\">\"</span></span>\n      <span class=\"pl-ent\">parameters</span>:\n        - <span class=\"pl-ent\">in</span>: <span class=\"pl-s\">query</span>\n          <span class=\"pl-ent\">name</span>: <span class=\"pl-s\">type</span>\n          <span class=\"pl-ent\">description</span>: <span class=\"pl-s\">The type of Demo.</span>\n          <span class=\"pl-ent\">schema</span>:\n            <span class=\"pl-ent\">type</span>: <span class=\"pl-s\">array</span>\n            <span class=\"pl-ent\">items</span>:\n              <span class=\"pl-ent\">$ref</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>#/components/schemas/SomeEnum<span class=\"pl-pds\">\"</span></span>\n          <span class=\"pl-ent\">required</span>: <span class=\"pl-c1\">true</span>\n\n        - <span class=\"pl-ent\">in</span>: <span class=\"pl-s\">query</span>\n          <span class=\"pl-ent\">name</span>: <span class=\"pl-s\">rangedValues</span>\n          <span class=\"pl-ent\">description</span>: <span class=\"pl-s\">The values within ranged.</span>\n          <span class=\"pl-ent\">schema</span>:\n            <span class=\"pl-ent\">$ref</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>#/components/schemas/RangedValueList<span class=\"pl-pds\">\"</span></span>\n          <span class=\"pl-ent\">required</span>: <span class=\"pl-c1\">false</span>\n\n      <span class=\"pl-ent\">responses</span>:\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-ent\">200</span><span class=\"pl-pds\">\"</span></span>:\n          <span class=\"pl-ent\">description</span>: <span class=\"pl-s\">success</span>\n          <span class=\"pl-ent\">content</span>:\n            <span class=\"pl-ent\">application/json</span>:\n              <span class=\"pl-ent\">schema</span>:\n                <span class=\"pl-ent\">type</span>: <span class=\"pl-s\">string</span></pre></div>\n<h5 dir=\"auto\">Generation Details</h5>\n<p dir=\"auto\">I recreated the issue with the following <code class=\"notranslate\">gradle</code> setup:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"plugins {\n\tid 'java'\n\tid 'org.springframework.boot' version '2.7.9'\n\tid 'io.spring.dependency-management' version '1.0.15.RELEASE'\n\t\n\tid 'org.openapi.generator' version '6.5.0'\n}\n\napply plugin: 'org.openapi.generator'\n\ngroup = 'com.ronkitay'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '1.8'\n\nrepositories {\n\tmavenCentral()\n}\n\ndependencies {\n\timplementation 'org.springframework.boot:spring-boot-starter-web'\n\ttestImplementation 'org.springframework.boot:spring-boot-starter-test'\n\n\timplementation 'org.springdoc:springdoc-openapi-ui:1.6.14'\n    implementation 'org.openapitools:jackson-databind-nullable:0.2.3'\n    implementation 'org.modelmapper:modelmapper:3.0.0'\n}\n\ntasks.named('test') {\n\tuseJUnitPlatform()\n}\n\nspringBoot {\n    mainClass = 'com.ronkitay.gradle.springboot.Main'\n}\n\nsourceSets {\n    main {\n        java {\n            srcDirs = ['src/main/java', 'build/generated/src/main/java']\n        }\n    }\n}\n\nopenApiGenerate {\n    generatorName = 'spring'\n    inputSpec = \"$rootDir/src/main/resources/openapi.yaml\".toString()\n    outputDir = \"$buildDir/generated\".toString()\n    apiPackage = 'com.ronkitay.openapidemo.api'\n    modelPackage = 'com.ronkitay.openapidemo.model'\n    invokerPackage = 'com.ronkitay.openapidemo.invoker'\n\n    configOptions = [\n            dateLibrary      : 'java8',\n            annotationLibrary: 'swagger2',\n            delegatePattern  : 'true',\n            useTags: 'true',\n            additionalEnumTypeAnnotations: '@com.fasterxml.jackson.annotation.JsonFormat'\n\n    ]\n}\n\ncompileJava.dependsOn tasks.openApiGenerate  \"><pre class=\"notranslate\"><code class=\"notranslate\">plugins {\n\tid 'java'\n\tid 'org.springframework.boot' version '2.7.9'\n\tid 'io.spring.dependency-management' version '1.0.15.RELEASE'\n\t\n\tid 'org.openapi.generator' version '6.5.0'\n}\n\napply plugin: 'org.openapi.generator'\n\ngroup = 'com.ronkitay'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '1.8'\n\nrepositories {\n\tmavenCentral()\n}\n\ndependencies {\n\timplementation 'org.springframework.boot:spring-boot-starter-web'\n\ttestImplementation 'org.springframework.boot:spring-boot-starter-test'\n\n\timplementation 'org.springdoc:springdoc-openapi-ui:1.6.14'\n    implementation 'org.openapitools:jackson-databind-nullable:0.2.3'\n    implementation 'org.modelmapper:modelmapper:3.0.0'\n}\n\ntasks.named('test') {\n\tuseJUnitPlatform()\n}\n\nspringBoot {\n    mainClass = 'com.ronkitay.gradle.springboot.Main'\n}\n\nsourceSets {\n    main {\n        java {\n            srcDirs = ['src/main/java', 'build/generated/src/main/java']\n        }\n    }\n}\n\nopenApiGenerate {\n    generatorName = 'spring'\n    inputSpec = \"$rootDir/src/main/resources/openapi.yaml\".toString()\n    outputDir = \"$buildDir/generated\".toString()\n    apiPackage = 'com.ronkitay.openapidemo.api'\n    modelPackage = 'com.ronkitay.openapidemo.model'\n    invokerPackage = 'com.ronkitay.openapidemo.invoker'\n\n    configOptions = [\n            dateLibrary      : 'java8',\n            annotationLibrary: 'swagger2',\n            delegatePattern  : 'true',\n            useTags: 'true',\n            additionalEnumTypeAnnotations: '@com.fasterxml.jackson.annotation.JsonFormat'\n\n    ]\n}\n\ncompileJava.dependsOn tasks.openApiGenerate  \n</code></pre></div>\n<p dir=\"auto\">This is the main class in my app:</p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"package com.ronkitay.gradle.springboot;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.ComponentScan;\n\n@SpringBootApplication\n@ComponentScan(basePackages = {\n\t\t\"com.ronkitay.openapidemo.invoker\",\n\t\t\"com.ronkitay.gradle.springboot\" })\npublic class Main {\n\n\tpublic static void main(String[] args) {\n\t\tSpringApplication.run(Main.class, args);\n\t}\n\n}\"><pre class=\"notranslate\"><span class=\"pl-k\">package</span> <span class=\"pl-s1\">com</span>.<span class=\"pl-s1\">ronkitay</span>.<span class=\"pl-s1\">gradle</span>.<span class=\"pl-s1\">springboot</span>;\n\n<span class=\"pl-k\">import</span> <span class=\"pl-s1\">org</span>.<span class=\"pl-s1\">springframework</span>.<span class=\"pl-s1\">boot</span>.<span class=\"pl-s1\">SpringApplication</span>;\n<span class=\"pl-k\">import</span> <span class=\"pl-s1\">org</span>.<span class=\"pl-s1\">springframework</span>.<span class=\"pl-s1\">boot</span>.<span class=\"pl-s1\">autoconfigure</span>.<span class=\"pl-s1\">SpringBootApplication</span>;\n<span class=\"pl-k\">import</span> <span class=\"pl-s1\">org</span>.<span class=\"pl-s1\">springframework</span>.<span class=\"pl-s1\">context</span>.<span class=\"pl-s1\">annotation</span>.<span class=\"pl-s1\">ComponentScan</span>;\n\n<span class=\"pl-c1\">@</span><span class=\"pl-c1\">SpringBootApplication</span>\n<span class=\"pl-c1\">@</span><span class=\"pl-c1\">ComponentScan</span>(<span class=\"pl-s1\">basePackages</span> = {\n\t\t<span class=\"pl-s\">\"com.ronkitay.openapidemo.invoker\"</span>,\n\t\t<span class=\"pl-s\">\"com.ronkitay.gradle.springboot\"</span> })\n<span class=\"pl-k\">public</span> <span class=\"pl-k\">class</span> <span class=\"pl-smi\">Main</span> {\n\n\t<span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-smi\">void</span> <span class=\"pl-en\">main</span>(<span class=\"pl-smi\">String</span>[] <span class=\"pl-s1\">args</span>) {\n\t\t<span class=\"pl-smi\">SpringApplication</span>.<span class=\"pl-en\">run</span>(<span class=\"pl-smi\">Main</span>.<span class=\"pl-k\">class</span>, <span class=\"pl-s1\">args</span>);\n\t}\n\n}</pre></div>\n<p dir=\"auto\">I'm using <code class=\"notranslate\">gradle</code> v8.0.2.</p>\n<h5 dir=\"auto\">Steps to reproduce</h5>\n<p dir=\"auto\">Running the below command triggers the issue:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"gradle clean build\"><pre class=\"notranslate\"><code class=\"notranslate\">gradle clean build\n</code></pre></div>\n<h5 dir=\"auto\">Related issues/PRs</h5>\n<p dir=\"auto\">Judging by the diffs between 6.4.0 and 6.5.0 and the description of the commit - this seems like a likely culprit:</p>\n<p dir=\"auto\"><a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/OpenAPITools/openapi-generator/commit/92b96635bd39710513a77b7eb3933de45fe212df/hovercard\" href=\"https://github.com/OpenAPITools/openapi-generator/commit/92b96635bd39710513a77b7eb3933de45fe212df\"><tt>92b9663</tt></a></p>\n<p dir=\"auto\">The relevant code seems to be this method:</p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"    private String replaceBeanValidationCollectionType(CodegenProperty codegenProperty, String dataType) {\n        if (!useBeanValidation() || !codegenProperty.isModel || isResponseType(codegenProperty)) {\n            return dataType;\n        }\n\n        if (StringUtils.isEmpty( dataType ) || dataType.contains( \"@Valid\" )) {\n            return dataType;\n        }\n        return dataType.replace( \"<\", \"<@Valid \" );\n    }\"><pre class=\"notranslate\">    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">replaceBeanValidationCollectionType</span>(<span class=\"pl-smi\">CodegenProperty</span> <span class=\"pl-s1\">codegenProperty</span>, <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">dataType</span>) {\n        <span class=\"pl-k\">if</span> (!<span class=\"pl-en\">useBeanValidation</span>() || !<span class=\"pl-s1\">codegenProperty</span>.<span class=\"pl-s1\">isModel</span> || <span class=\"pl-en\">isResponseType</span>(<span class=\"pl-s1\">codegenProperty</span>)) {\n            <span class=\"pl-k\">return</span> <span class=\"pl-s1\">dataType</span>;\n        }\n\n        <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">StringUtils</span>.<span class=\"pl-en\">isEmpty</span>( <span class=\"pl-s1\">dataType</span> ) || <span class=\"pl-s1\">dataType</span>.<span class=\"pl-en\">contains</span>( <span class=\"pl-s\">\"@Valid\"</span> )) {\n            <span class=\"pl-k\">return</span> <span class=\"pl-s1\">dataType</span>;\n        }\n        <span class=\"pl-k\">return</span> <span class=\"pl-s1\">dataType</span>.<span class=\"pl-en\">replace</span>( <span class=\"pl-s\">\"<\"</span>, <span class=\"pl-s\">\"<@Valid \"</span> );\n    }</pre></div>\n<p dir=\"auto\">I am not certain that this is the root cause - but it seems very relevant.</p>\n<h5 dir=\"auto\">Suggest a fix</h5>\n<p dir=\"auto\">See the above related commit  - if it is the root cause I do not know how best to fix it as I'm assuming it solves a concrete problem, so removing it will not be enough.</p>",
  "description_text": "Bug Report Checklist\n\n Have you provided a full/minimal spec to reproduce the issue?\n Have you validated the input using an OpenAPI validator (example)?\n Have you tested with the latest master to confirm the issue still exists?\n Have you searched for related issues/PRs?\n What's the actual output vs expected output?\n [Optional] Sponsorship to speed up the bug fix or feature request (example)\n\nDescription\nStarting from version 6.5.0 (id 'org.openapi.generator' version '6.5.0') - the below openapi.yaml produces code that fails compilation.\nThe scenario is defining an array of integers which have a validation rule defined (I used min/max ranges - there might be other scenarios as well).\nThe relevant generated method in the interface is:\n type,\n        @Parameter(name = \"rangedValues\", description = \"The values within ranged.\", in = ParameterIn.QUERY) @Valid @RequestParam(value = \"rangedValues\", required = false) List<@Valid RangedValue> rangedValues\n    ) {\n        return getDelegate().getDemo(type, rangedValues);\n    }\"> default ResponseEntity getDemo(\n        @NotNull @Parameter(name = \"type\", description = \"The type of Demo.\", required = true, in = ParameterIn.QUERY) @Valid @RequestParam(value = \"type\", required = true) List type,\n        @Parameter(name = \"rangedValues\", description = \"The values within ranged.\", in = ParameterIn.QUERY) @Valid @RequestParam(value = \"rangedValues\", required = false) List<@Valid RangedValue> rangedValues\n    ) {\n        return getDelegate().getDemo(type, rangedValues);\n    }\n\nI believe the extra @Valid within the List<... is redundant but have not verified that.\nopenapi-generator version\nThe problem occurs in 6.5.0 only, in 6.4.0 it works fine.\nOpenAPI declaration file content or url\nopenapi: \"3.0.0\"\ninfo:\n  title: Demo API\n  description: A Demo API\n  version: 0.0.1\n\nservers:\n  - url: https://localhost:8080/api/1\n\ntags:\n  - name: demo\n    description: Contains all the demo APIs\n\ncomponents:\n  schemas:\n    SomeEnum:\n      type: string\n      enum:\n        - value1\n        - another-value\n        - best_value\n        - thevalue\n\n    RangedValueList:\n      type: array\n      items:\n        $ref: \"#/components/schemas/RangedValue\"\n\n    RangedValue:\n      properties:\n        value:\n          type: integer\n          minimum: 5\n          maximum: 50\n\npaths:\n  /demo:\n    get:\n      tags:\n        - demo\n      description: \"A demo API\"\n      operationId: \"getDemo\"\n      parameters:\n        - in: query\n          name: type\n          description: The type of Demo.\n          schema:\n            type: array\n            items:\n              $ref: \"#/components/schemas/SomeEnum\"\n          required: true\n\n        - in: query\n          name: rangedValues\n          description: The values within ranged.\n          schema:\n            $ref: \"#/components/schemas/RangedValueList\"\n          required: false\n\n      responses:\n        \"200\":\n          description: success\n          content:\n            application/json:\n              schema:\n                type: string\nGeneration Details\nI recreated the issue with the following gradle setup:\nplugins {\n\tid 'java'\n\tid 'org.springframework.boot' version '2.7.9'\n\tid 'io.spring.dependency-management' version '1.0.15.RELEASE'\n\t\n\tid 'org.openapi.generator' version '6.5.0'\n}\n\napply plugin: 'org.openapi.generator'\n\ngroup = 'com.ronkitay'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '1.8'\n\nrepositories {\n\tmavenCentral()\n}\n\ndependencies {\n\timplementation 'org.springframework.boot:spring-boot-starter-web'\n\ttestImplementation 'org.springframework.boot:spring-boot-starter-test'\n\n\timplementation 'org.springdoc:springdoc-openapi-ui:1.6.14'\n    implementation 'org.openapitools:jackson-databind-nullable:0.2.3'\n    implementation 'org.modelmapper:modelmapper:3.0.0'\n}\n\ntasks.named('test') {\n\tuseJUnitPlatform()\n}\n\nspringBoot {\n    mainClass = 'com.ronkitay.gradle.springboot.Main'\n}\n\nsourceSets {\n    main {\n        java {\n            srcDirs = ['src/main/java', 'build/generated/src/main/java']\n        }\n    }\n}\n\nopenApiGenerate {\n    generatorName = 'spring'\n    inputSpec = \"$rootDir/src/main/resources/openapi.yaml\".toString()\n    outputDir = \"$buildDir/generated\".toString()\n    apiPackage = 'com.ronkitay.openapidemo.api'\n    modelPackage = 'com.ronkitay.openapidemo.model'\n    invokerPackage = 'com.ronkitay.openapidemo.invoker'\n\n    configOptions = [\n            dateLibrary      : 'java8',\n            annotationLibrary: 'swagger2',\n            delegatePattern  : 'true',\n            useTags: 'true',\n            additionalEnumTypeAnnotations: '@com.fasterxml.jackson.annotation.JsonFormat'\n\n    ]\n}\n\ncompileJava.dependsOn tasks.openApiGenerate  \n\nThis is the main class in my app:\npackage com.ronkitay.gradle.springboot;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.ComponentScan;\n\n@SpringBootApplication\n@ComponentScan(basePackages = {\n\t\t\"com.ronkitay.openapidemo.invoker\",\n\t\t\"com.ronkitay.gradle.springboot\" })\npublic class Main {\n\n\tpublic static void main(String[] args) {\n\t\tSpringApplication.run(Main.class, args);\n\t}\n\n}\nI'm using gradle v8.0.2.\nSteps to reproduce\nRunning the below command triggers the issue:\ngradle clean build\n\nRelated issues/PRs\nJudging by the diffs between 6.4.0 and 6.5.0 and the description of the commit - this seems like a likely culprit:\n92b9663\nThe relevant code seems to be this method:\n    private String replaceBeanValidationCollectionType(CodegenProperty codegenProperty, String dataType) {\n        if (!useBeanValidation() || !codegenProperty.isModel || isResponseType(codegenProperty)) {\n            return dataType;\n        }\n\n        if (StringUtils.isEmpty( dataType ) || dataType.contains( \"@Valid\" )) {\n            return dataType;\n        }\n        return dataType.replace( \"<\", \"<@Valid \" );\n    }\nI am not certain that this is the root cause - but it seems very relevant.\nSuggest a fix\nSee the above related commit  - if it is the root cause I do not know how best to fix it as I'm assuming it solves a concrete problem, so removing it will not be enough."
}