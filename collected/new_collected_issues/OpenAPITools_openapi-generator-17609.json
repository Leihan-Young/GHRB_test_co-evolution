{
  "issue_id": 17415,
  "issue_url": "https://github.com/OpenAPITools/openapi-generator/issues/17415",
  "title": "[BUG] Python generated client give `name 'AnyOf' is not defined`",
  "description": "<h4 dir=\"auto\">Bug Report Checklist</h4>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you provided a full/minimal spec to reproduce the issue?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you validated the input using an OpenAPI validator (<a href=\"https://apidevtools.org/swagger-parser/online/\" rel=\"nofollow\">example</a>)?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you <a href=\"https://github.com/OpenAPITools/openapi-generator/wiki/FAQ#how-to-test-with-the-latest-master-of-openapi-generator\">tested with the latest master</a> to confirm the issue still exists?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Have you searched for related issues/PRs?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> What's the actual output vs expected output?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> [Optional] Sponsorship to speed up the bug fix or feature request (<a href=\"https://github.com/OpenAPITools/openapi-generator/issues/6178\" data-hovercard-type=\"issue\" data-hovercard-url=\"/OpenAPITools/openapi-generator/issues/6178/hovercard\">example</a>)</li>\n</ul>\n\n<h5 dir=\"auto\">Description</h5>\n\n<p dir=\"auto\">Python generated client give <code class=\"notranslate\">NameError: name 'AnyOf' is not defined</code>:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"_____________________________________________________________ ERROR collecting test/test_default_api.py ______________________________________________________________\ntest/test_default_api.py:17: in <module>\n    from openapi_client.api.default_api import DefaultApi\nopenapi_client/__init__.py:20: in <module>\n    from openapi_client.api.default_api import DefaultApi\nopenapi_client/api/__init__.py:4: in <module>\n    from openapi_client.api.default_api import DefaultApi\nopenapi_client/api/default_api.py:36: in <module>\n    class DefaultApi:\nopenapi_client/api/default_api.py:66: in DefaultApi\n    ) -> AnyOf:\nE   NameError: name 'AnyOf' is not defined\n====================================================================== short test summary info =======================================================================\nERROR test/test_default_api.py - NameError: name 'AnyOf' is not defined\"><pre class=\"notranslate\"><code class=\"notranslate\">_____________________________________________________________ ERROR collecting test/test_default_api.py ______________________________________________________________\ntest/test_default_api.py:17: in <module>\n    from openapi_client.api.default_api import DefaultApi\nopenapi_client/__init__.py:20: in <module>\n    from openapi_client.api.default_api import DefaultApi\nopenapi_client/api/__init__.py:4: in <module>\n    from openapi_client.api.default_api import DefaultApi\nopenapi_client/api/default_api.py:36: in <module>\n    class DefaultApi:\nopenapi_client/api/default_api.py:66: in DefaultApi\n    ) -> AnyOf:\nE   NameError: name 'AnyOf' is not defined\n====================================================================== short test summary info =======================================================================\nERROR test/test_default_api.py - NameError: name 'AnyOf' is not defined\n</code></pre></div>\n<h5 dir=\"auto\">openapi-generator version</h5>\n\n<p dir=\"auto\">Docker image: <code class=\"notranslate\">openapitools/openapi-generator-cli:v7.1.0</code></p>\n<h5 dir=\"auto\">OpenAPI declaration file content or url</h5>\n\n<p dir=\"auto\">Gist URL: <a href=\"https://gist.githubusercontent.com/ArnaudPalgen/811236b902e9ab1c6d225f4c5d2d0d36/raw/3d3ec30f988e491aa95c6d0fbd66c08c1e3d2f8e/open_api_spec.json\" rel=\"nofollow\">https://gist.githubusercontent.com/ArnaudPalgen/811236b902e9ab1c6d225f4c5d2d0d36/raw/3d3ec30f988e491aa95c6d0fbd66c08c1e3d2f8e/open_api_spec.json</a></p>\n<h5 dir=\"auto\">Generation Details</h5>\n\n<ul dir=\"auto\">\n<li>Generation from a Python FastAPI application</li>\n<li>The target language is Python.</li>\n<li>CLI command: <code class=\"notranslate\">docker run --rm -v ${PWD}:/local openapitools/openapi-generator-cli:v7.1.0 generate -i /local/openapi.json -g python -o /local/out/python</code></li>\n<li>Python version: 3.10.4</li>\n<li>OS infos: macOS 14.1.1 (23B81)</li>\n</ul>\n<h5 dir=\"auto\">Steps to reproduce</h5>\n\n<p dir=\"auto\">All code used in the followings steps is available at: <a href=\"https://gist.github.com/ArnaudPalgen/811236b902e9ab1c6d225f4c5d2d0d36\">https://gist.github.com/ArnaudPalgen/811236b902e9ab1c6d225f4c5d2d0d36</a></p>\n<ol dir=\"auto\">\n<li><code class=\"notranslate\">mkdir bug_example && cd bug_example</code></li>\n<li><code class=\"notranslate\">wget https://gist.githubusercontent.com/ArnaudPalgen/811236b902e9ab1c6d225f4c5d2d0d36/raw/de6059a6581c170ed665d6997d59c55e3bdb6aa7/main.py</code></li>\n<li><code class=\"notranslate\">python3 -m venv venv</code></li>\n<li><code class=\"notranslate\">source venv/bin/activate</code></li>\n<li><code class=\"notranslate\">wget https://gist.githubusercontent.com/ArnaudPalgen/811236b902e9ab1c6d225f4c5d2d0d36/raw/42de99d10fdc234484fd38fe03ebae069da54901/requirements.txt && pip install -r requirements.txt</code></li>\n<li><code class=\"notranslate\">uvicorn main:app --reload</code></li>\n<li>In an other session: <code class=\"notranslate\">wget http://127.0.0.1:8000/openapi.json</code></li>\n<li><code class=\"notranslate\">docker run --rm -v ${PWD}:/local openapitools/openapi-generator-cli:v7.1.0 generate -i /local/openapi.json -g python -o /local/out/python</code></li>\n<li><code class=\"notranslate\">cd out</code></li>\n<li><code class=\"notranslate\">python3 -m venv venv</code></li>\n<li><code class=\"notranslate\">source venv/bin/activate</code></li>\n<li><code class=\"notranslate\">cd python</code></li>\n<li><code class=\"notranslate\">pip install -r requirements.txt</code></li>\n<li><code class=\"notranslate\">pip install -r test-requirements.txt</code></li>\n<li><code class=\"notranslate\">pytest</code></li>\n</ol>\n<h5 dir=\"auto\">Related issues/PRs</h5>\n\n<p dir=\"auto\">Stackoverflow question without answer<br>\n<a href=\"https://stackoverflow.com/questions/77528788/openapi-generator-python-name-anyof-is-not-defined\" rel=\"nofollow\">https://stackoverflow.com/questions/77528788/openapi-generator-python-name-anyof-is-not-defined</a></p>\n<h5 dir=\"auto\">Suggest a fix</h5>\n",
  "description_text": "Bug Report Checklist\n\n Have you provided a full/minimal spec to reproduce the issue?\n Have you validated the input using an OpenAPI validator (example)?\n Have you tested with the latest master to confirm the issue still exists?\n Have you searched for related issues/PRs?\n What's the actual output vs expected output?\n [Optional] Sponsorship to speed up the bug fix or feature request (example)\n\nDescription\nPython generated client give NameError: name 'AnyOf' is not defined:\n_____________________________________________________________ ERROR collecting test/test_default_api.py ______________________________________________________________\ntest/test_default_api.py:17: in \n    from openapi_client.api.default_api import DefaultApi\nopenapi_client/__init__.py:20: in \n    from openapi_client.api.default_api import DefaultApi\nopenapi_client/api/__init__.py:4: in \n    from openapi_client.api.default_api import DefaultApi\nopenapi_client/api/default_api.py:36: in \n    class DefaultApi:\nopenapi_client/api/default_api.py:66: in DefaultApi\n    ) -> AnyOf:\nE   NameError: name 'AnyOf' is not defined\n====================================================================== short test summary info =======================================================================\nERROR test/test_default_api.py - NameError: name 'AnyOf' is not defined\n\nopenapi-generator version\nDocker image: openapitools/openapi-generator-cli:v7.1.0\nOpenAPI declaration file content or url\nGist URL: https://gist.githubusercontent.com/ArnaudPalgen/811236b902e9ab1c6d225f4c5d2d0d36/raw/3d3ec30f988e491aa95c6d0fbd66c08c1e3d2f8e/open_api_spec.json\nGeneration Details\n\nGeneration from a Python FastAPI application\nThe target language is Python.\nCLI command: docker run --rm -v ${PWD}:/local openapitools/openapi-generator-cli:v7.1.0 generate -i /local/openapi.json -g python -o /local/out/python\nPython version: 3.10.4\nOS infos: macOS 14.1.1 (23B81)\n\nSteps to reproduce\nAll code used in the followings steps is available at: https://gist.github.com/ArnaudPalgen/811236b902e9ab1c6d225f4c5d2d0d36\n\nmkdir bug_example && cd bug_example\nwget https://gist.githubusercontent.com/ArnaudPalgen/811236b902e9ab1c6d225f4c5d2d0d36/raw/de6059a6581c170ed665d6997d59c55e3bdb6aa7/main.py\npython3 -m venv venv\nsource venv/bin/activate\nwget https://gist.githubusercontent.com/ArnaudPalgen/811236b902e9ab1c6d225f4c5d2d0d36/raw/42de99d10fdc234484fd38fe03ebae069da54901/requirements.txt && pip install -r requirements.txt\nuvicorn main:app --reload\nIn an other session: wget http://127.0.0.1:8000/openapi.json\ndocker run --rm -v ${PWD}:/local openapitools/openapi-generator-cli:v7.1.0 generate -i /local/openapi.json -g python -o /local/out/python\ncd out\npython3 -m venv venv\nsource venv/bin/activate\ncd python\npip install -r requirements.txt\npip install -r test-requirements.txt\npytest\n\nRelated issues/PRs\nStackoverflow question without answer\nhttps://stackoverflow.com/questions/77528788/openapi-generator-python-name-anyof-is-not-defined\nSuggest a fix\n"
}